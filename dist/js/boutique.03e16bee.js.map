{"version":3,"sources":["webpack:///../../../src/components/VGrid/VRow.ts","webpack:///./node_modules/vue-filepond/dist/vue-filepond.js","webpack:///./node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/views/boutique/Boutique.vue?8d1c","webpack:///./src/views/boutique/Boutique.vue?032e","webpack:///src/views/boutique/Boutique.vue","webpack:///./src/views/boutique/Boutique.vue?1855","webpack:///../../../src/mixins/rippleable/index.ts","webpack:///../../../src/mixins/selectable/index.ts","webpack:///../../../src/components/VSwitch/VSwitch.ts","webpack:///./src/views/boutique/Boutique.vue?c25a","webpack:///./src/views/prenda/Prendas.vue?3d3d","webpack:///src/views/prenda/Prendas.vue","webpack:///./src/views/prenda/Prendas.vue?e30f","webpack:///./src/views/prenda/Prendas.vue","webpack:///../../../src/components/VGrid/VCol.ts","webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./node_modules/cropperjs/dist/cropper.js","webpack:///./node_modules/filepond/dist/filepond.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/uuid/lib/rng-browser.js"],"names":["breakpoints","ALIGNMENT","makeProps","props","prefix","def","alignValidator","str","alignProps","type","default","validator","justifyValidator","justifyProps","alignContentValidator","alignContentProps","propMap","align","Object","justify","alignContent","classMap","breakpointClass","className","val","breakpoint","prop","cache","name","functional","tag","dense","noGutters","render","children","cacheKey","String","classList","value","h","data","staticClass","class","global","factory","this","exports","_vue","_filepond","defineProperty","setOptions","undefined","_vue2","_interopRequireDefault","obj","__esModule","filteredComponentMethods","isSupported","supported","getNativeConstructorFromType","string","boolean","Boolean","array","Array","function","Function","int","Number","serverapi","object","events","watch","instances","globalOptions","options","assign","forEach","instance","registerPlugin","apply","arguments","length","_loop","test","push","OptionTypes","_pond","component","attrs","id","required","multiple","allowMultiple","accept","acceptedFileTypes","capture","captureMethod","mounted","_this","_element","$el","querySelector","reduce","_len","args","_key","$emit","getFiles","substr","concat","$attrs","create","$options","propsData","keys","filter","key","includes","destroyed","_this2","detached","offsetParent","mutationHandler","mutations","observer","removedNodes","removedNode","contains","disconnect","call","MutationObserver","observe","document","documentElement","childList","subtree","destroy","index","indexOf","splice","module","plugin","_ref","addFilter","utils","Type","isString","replaceInString","guesstimateMimeType","getExtensionFromFilename","getFilenameFromURL","mimeTypeMatchesWildCard","mimeType","wildcard","mimeTypeGroup","exec","pop","wildcardGroup","slice","isValidMimeType","acceptedTypes","userInputType","some","acceptedType","getItemType","item","filename","extension","validateFile","typeDetector","Promise","resolve","reject","then","detectedType","catch","applyMimeTypeMap","map","acceptedFileType","file","_ref2","query","_ref3","validationResult","handleRejection","acceptedFileTypesMapped","label","status","main","sub","allTypes","join","allButLastType","lastType","allowFileTypeValidation","BOOLEAN","ARRAY","labelFileTypeNotAllowed","STRING","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","OBJECT","fileValidateTypeDetectType","FUNCTION","isBrowser","window","dispatchEvent","CustomEvent","detail","byteToHex","i","toString","bytesToUuid","buf","offset","bth","_vm","_h","$createElement","_c","_self","boutique","_v","_s","nombre","logo","_l","scopedSlots","_u","fn","ref","on","_g","model","callback","$$v","modalPrenda","expression","prenda","$set","categorias","categoriaSeleccionada","categoria","tallas","_e","vista","cargarImagen","$event","guardarPrenda","search","headers","prendas","params","actualizarEstatus","staticRenderFns","directives","ripple","methods","genRipple","center","click","onChange","mixins","event","inputValue","falseValue","trueValue","hasColor","lazyValue","computed","computedColor","isDark","isMultiple","isActive","input","valueComparator","isDirty","genLabel","VInput","e","genInput","disabled","role","domProps","checked","blur","change","focus","keydown","onKeydown","onBlur","onFocus","Touch","inset","loading","flat","classes","validationState","hasError","switchData","setTextColor","themeClasses","genDefaultSlot","genSwitch","attrs$","left","right","onSwipeRight","genProgress","$slots","progress","VProgressCircular","color","size","width","indeterminate","onSwipeLeft","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VDataTable","VDialog","VFlex","VIcon","VImg","VLayout","VRow","VSelect","VSpacer","VSwitch","VTextField","VTextarea","foto","descripcion","prendaEdicion","JSON","parse","stringify","editarPrenda","VChip","VDivider","breakpointProps","offsetProps","orderProps","col","order","cols","alignSelf","justifySelf","parent","hasColClasses","baseMixins","autoGrow","noResize","rowHeight","v","isNaN","parseFloat","rows","parseInt","noResizeHandle","$nextTick","setTimeout","calculateInputHeight","$refs","height","minHeight","Math","onInput","onKeyDown","isFocused","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","Constructor","TypeError","_defineProperties","target","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_defineProperty","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","isArray","arr2","iter","from","IS_BROWSER","WINDOW","IS_TOUCH_DEVICE","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","ready","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","error","isFunction","toArray","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","round","REGEXP_SUFFIX","setStyle","element","styles","style","property","hasClass","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","once","listener","get","set","addEventListener","removeEventListener","removeListener","handler","split","listeners","addListener","_handler","_element$listeners","_len2","_key2","Event","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","rotate","scaleX","scaleY","translateX","translateY","values","transform","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","endOnly","pageX","pageY","end","getPointersCenter","count","getAdjustedSizes","_ref4","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","fillStyle","fillRect","save","translate","scale","drawImage","param","floor","fromCharCode","getStringFromCharCode","dataView","start","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","parseOrientation","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","oldLeft","oldTop","limited","limitCanvas","initialImageData","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","initPreview","crossOrigin","crossOriginUrl","alt","src","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","bind","onCropStart","cropStart","onWheel","wheel","passive","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","getCanvasData","getCropBoxData","setCanvasData","n","setCropBoxData","setDragMode","dragBox","delta","preventDefault","wheeling","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","bottom","renderable","shiftKey","range","x","y","check","side","move","p","reset","clear","hasSameSize","isImg","replaced","uncreate","load","enable","disable","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","sourceWidth","sourceHeight","srcX","srcY","setAspectRatio","mode","croppable","AnotherCropper","Cropper","tagName","Error","reloading","sizing","init","toDataURL","read","clone","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","isNode","HTMLElement","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","getState","processActionQueue","queue","processDispatchQueue","dispatch","isBlocking","actionHandlers","_queryHandles","queryHandles","api","definition","forin","cb","createObject","attr","node","hasAttribute","ns","svgElements","isSVGElement","attributes","createElementNS","child","appendChildView","childViews","view","removeChildView","testElement","getChildCount","childNodes","getViewRect","elementRect","rect","inner","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","thereYet","position","destination","velocity","errorMargin","spring","_ref$stiffness","stiffness","_ref$damping","damping","_ref$mass","mass","resting","interpolate","f","onupdate","oncomplete","setTarget","easeInOutQuad","t","tween","_ref$duration","duration","_ref$easing","easing","_ref$delay","delay","reverse","ts","animator","createAnimator","category","addGetSet","overwrite","o","getter","setter","isDefined","animations","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","viewState","animation","write","addEvent","removeEvent","off","findIndex","apis","defaults","opacity","rotateX","rotateY","rotateZ","originX","originY","currentProps","getScale","getRect","propsHaveChanged","applyStyles","newProps","perspective","transforms","elementCurrentStyle","Mixins","updateRect","layoutCalculated","paddingTop","marginTop","marginLeft","offsetLeft","offsetTop","scrollTop","hidden","createView","_ref$tag","_ref$name","_ref$attributes","_ref$read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","didWriteView","_ref$ignoreRect","ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","store","getComputedStyle","frameRect","isResting","activeMixins","writers","readers","destroyers","getElement","getChildViews","getReference","createChildView","getStyle","_read","shouldUpdate","root","internalAPI","reader","_write","frameActions","shouldOptimize","writer","writerResting","mixin","mixinResting","childResting","_destroy","destroyer","sharedAPIDefinition","internalAPIDefinition","is","needle","linkView","unlinkView","registerWriter","registerReader","registerDestroyer","invalidateLayout","externalAPIDefinition","mixinAPIDefinition","mixinAPI","childCount","createPainter","fps","painter","interval","last","requestTick","cancelTick","setTimerType","tick","performance","now","clearTimeout","requestAnimationFrame","cancelAnimationFrame","pause","createRoute","routes","_ref$actions","newNode","referenceNode","insertAfter","isEmpty","splitter","isBoolean","toBoolean","toNumber","toInt","toFloat","isInt","isFinite","toBytes","naturalFileSize","toFunctionReference","self","levels","level","shift","process","patch","revert","fetch","createServerAPI","outline","timeout","createAction","method","ondata","header","toServerAPI","isNull","isAPI","getType","replaceSingleQuotes","conversionTable","number","float","bytes","convertTo","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOption","currentValue","createOptions","optionDefinition","createInitialState","items","listUpdateTimeout","itemUpdateTimeout","processingQueue","fromCamels","separator","part","createOptionAPI","toUpperCase","createOptionActions","createOptionQueries","InteractionMethod","API","DROP","BROWSE","PASTE","NONE","getUniqueId","random","arrayRemove","fire","onOnce","_cb","copyObjectPropertiesToObject","excluded","getOwnPropertyNames","PRIVATE","createItemAPI","removeReleasedItems","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","getDecimalSeparator","toLocaleString","getThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","thousandsStringWithoutSeparator","INT","NUMBER","ACTION","SERVER_API","REGEX","filters","applyFilterChain","matchingFilters","initialFilter","current","next","applyFilters","extendDefaultOptions","additionalOptions","defaultOptions","getOptions","opts","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowReorder","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","chunkUploads","chunkForce","chunkRetryDelays","server","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","beforeDropFile","beforeAddFile","beforeRemoveFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","files","getItemByQuery","find","getNumericAspectRatioFromString","getActiveItems","archived","Status","EMPTY","ERROR","BUSY","READY","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","GET_STATUS","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","GET_ITEM_SIZE","fileSize","GET_STYLES","GET_PANEL_ASPECT_RATIO","isShapeCircle","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","IS_ASYNC","hasRoomForItem","maxFileCount","limit","arrayInsert","insertItem","isBase64DataURI","guesstimateExtension","subtype","leftPad","padding","getDateString","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getFileFromBlob","blob","lastModifiedDate","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","createBlob","BB","bb","append","getBlob","Blob","getBlobFromByteStringWithMimeType","byteString","ab","ia","getMimeTypeFromBase64DataURI","dataURI","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getBlobFromBase64DataURI","getFileFromBase64DataURI","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","getTranfserIdFromHeader","getFileInfoFromHeaders","info","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","err","return","createFileLoader","fetchFn","complete","request","getProgress","File","loadURL","code","computable","total","fileinfo","setSource","isGet","sendRequest","onheaders","aborted","headersReceived","encodeURI","encodeURIComponent","upload","lengthComputable","loaded","onreadystatechange","readyState","unescape","setRequestHeader","createResponse","createTimeoutResponse","getAllResponseHeaders","createFetchFunction","apiUrl","res","statusText","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","result","wrappedAwait","settle","_invoke","asyncIterator","throw","ChunkStatus","QUEUED","COMPLETE","WAITING","processFileChunked","metadata","transfer","chunkTransferId","chunkServer","serverId","fd","requestTransferId","formData","FormData","requestParams","requestTransferOffset","requestUrl","lastChunkIndex","retries","completeProcessingChunks","canProcessChunk","chunk","processChunk","processChunks","updateTotalProgress","retryProcessChunk","every","totalBytesTransfered","totalSize","totalProcessing","abortChunks","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createProcessorFunction","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","runtime","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","progressFn","completeFn","transferId","getDuration","getFilenameWithoutExtension","lastIndexOf","createFileStub","isFile","deepCloneObject","createItem","origin","serverFileReference","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","success","retryLoad","abortLoad","processor","onprocess","console","requestProcessing","abortProcessing","revertFileUpload","_setMetadata","silent","getMetadata","filenameWithoutExtension","fileExtension","fileType","setMetadata","extend","itemAPI","freeze","release","archive","getItemIndexByQuery","getItemById","itemId","fetchLocal","getDomainFromURL","isExternalURL","href","dynamicLabel","isMockItem","listUpdated","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","_ref$failure","failure","ABORT_ALL","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","DID_UPDATE_ITEM_METADATA","doUpload","shouldPrepareOutput","MOVE_ITEM","currentIndex","SORT","ADD_ITEMS","_ref6$success","_ref6$failure","insertLocation","totalItems","isValidFile","validItems","promises","all","ADD_ITEM","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","_item","mainStatus","handleAdd","shouldAdd","loadComplete","REQUEST_PREPARE_OUTPUT","_ref9","_ref9$failure","COMPLETE_LOAD_ITEM","_ref10","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","REQUEST_ITEM_PROCESSING","itemCanBeQueuedForProcessing","PROCESS_ITEM","totalCurrentUploads","processNext","queueEntry","itemReference","allItemsProcessed","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","handleRevert","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","SET_OPTIONS","_ref11","formatFilename","createElement$1","text","textNode","nodeValue","createTextNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","describeArc","startAngle","endAngle","arcSweep","percentageArc","to","spin","svg","path","ringStrokeWidth","ringFrom","ringTo","coordinates","progressIndicator","create$1","icon","isDisabled","write$1","shouldDisable","fileActionButton","toNaturalFileSize","MB","KB","GB","removeDecimalsWhenZero","decimalCount","toFixed","create$2","fileName","updateFile","updateFileSizeOnError","fileInfo","DID_LOAD_ITEM","DID_UPDATE_ITEM_META","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_INVALID","toPercentage","create$3","didSetItemLoadProgress","title","didSetItemProcessProgress","didRequestItemProcessing","didAbortItemProcessing","didCompleteItemProcessing","fileStatus","DID_REVERT_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_COMPLETE_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","calculateFileInfoOffset","buttonRect","buttonRemoveItem","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getLoadIndicatorAlignment","getProcessIndicatorAlignment","getRemoveIndicatorAligment","DefaultStyle","buttonAbortItemLoad","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","DID_START_ITEM_PROCESSING","processingCompleteIndicatorView","create$4","isAsync","enabledButtons","buttonView","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","write$2","route","stylesToApply","defaultStyles","control","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","_ref12","create$5","dataContainer","didSetDisabled","didLoadItem","didRemoveItem","didCompleteItemProcessing$1","didRevertItemProcessing","fileWrapper","DID_SET_DISABLED","DID_REMOVE_ITEM","PANEL_SPRING_PROPS","create$6","section","createSection","viewConstructor","write$3","topRect","bottomRect","panel","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","create$7","handleClick","markedForRemoval","dragState","grab","isPrimary","dragOrigin","dragCenter","drag","dragOffset","drop","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","DID_DRAG_ITEM","DID_DROP_ITEM","currentState","filepondItemState","getItemIndexByPosition","positionInView","horizontalSpace","l","itemRect","itemHorizontalMargin","itemWidth","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","indexX","indexY","itemTop","itemRight","itemBottom","create$8","lastItemSpanwDate","addItemView","addIndex","spawnDate","cooldown","dist","moveItem","vx","vy","introItemView","removeItemView","getItemHeight","dragItem","dragPosition","visibleChildren","targetIndex","childHeight","childBottom","childTop","dragHeight","route$2","DID_ADD_ITEM","write$5","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","vectorX","sign","vectorY","filterSetItemActions","list","create$9","overflowing","storeDragCoordinates","scopeLeft","scopeTop","clearDragCoordinates","route$3","DID_DRAG","DID_END_DRAG","write$6","overflow","listScroller","attrToggle","enabledValue","resetFileInput","form","create$a","handleChange","setAcceptedFileTypes","toggleAllowMultiple","toggleDisabled","doesAllowBrowse","disableField","toggleRequired","setCaptureMethod","updateRequiredStatus","shouldCheckValidity","setCustomValidity","updateFieldValidityStatus","browser","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","ENTER","SPACE","create$b","handleKeyDown","isActivationKey","keyCode","isLabelClick","updateLabelValue","caption","clickable","dropLabel","DID_SET_LABEL_IDLE","addBlob","moveBlob","hideBlob","explodeBlob","write$7","route$4","DID_DROP","drip","getRootNode","images","text$1","zip","epub","requestDataTransferItems","dataTransfer","links","getLinks","hasFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctMissingFileType","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","createDragNDropClient","scopeToObserve","filterElement","getDragNDropObserver","client","ondrop","onenter","ondrag","onexit","allowdrop","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","createHandler","elementFromPoint","point","isEventTarget","elementAtPosition","initialTarget","setDropEffect","effect","dropEffect","overDropTarget","allowsTransfer","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","clipboardData","listen","unlisten","createPaster","create$c","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","message","textContent","clear$1","listModified","isUsingFilePond","activeElement","itemAdded","itemRemoved","itemProcessed","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","func","immidiateOnly","MAX_FILES_LIMIT","prevent","create$d","measure","bounds","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","write$8","route$5","calculateRootBoundingBoxHeight","_root$ref","hopper","isMultiItem","maxItems","atMaxCapacity","addAction","listItemMargin","calculateListItemMargin","listHeight","calculateListHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","visual","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","fixedHeight","_listAvailableHeight","cappedHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","scrollList","itemList","newItem","removedItem","verticalItemCount","ceil","measureHeight","exceedsMaxFiles","totalBrowseItems","hasMaxItems","getDragIndex","toggleDrop","isAllowed","enabled","toggleBrowse","togglePaste","paster","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_PREPARE_OUTPUT","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","composed","filtered","prepareFile","addFile","addFiles","removeFile","sources","lastArgument","processFile","prepareFiles","processFiles","_len3","_key3","removeFiles","_len4","_key4","mappedQueries","moveFile","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","app","lowerCaseFirstLetter","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","createAppAtElement","mergedOptions","attributeOptions","nodeName","createApp$1","PRIVATE_METHODS","createAppAPI","replacements","createWorker","workerBlob","workerURL","URL","createObjectURL","worker","Worker","post","transferList","onmessage","postMessage","terminate","revokeObjectURL","loadImage","Image","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","pluginOutline","views","isOperaMini","operamini","hasPromises","hasBlobSlice","hasCreateObjectURL","hasVisibility","hasTiming","apps","FileStatus","updateOptionTypes","hook","indexToRemove","matchedHooks","newHooks","newHook","plugins","rng","v4","rnds","ii","getRandomValues","crypto","msCrypto","rnds8","r"],"mappings":"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","file":"js/boutique.03e16bee.js","sourcesContent":["import './VGrid.sass'\n\nimport Vue, { PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst ALIGNMENT = ['start', 'end', 'center']\n\nfunction makeProps (prefix: string, def: () => PropOptions) {\n  return breakpoints.reduce((props, val) => {\n    props[prefix + upperFirst(val)] = def()\n    return props\n  }, {} as Dictionary<PropOptions>)\n}\n\nconst alignValidator = (str: any) => [...ALIGNMENT, 'baseline', 'stretch'].includes(str)\nconst alignProps = makeProps('align', () => ({\n  type: String,\n  default: null,\n  validator: alignValidator,\n}))\n\nconst justifyValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around'].includes(str)\nconst justifyProps = makeProps('justify', () => ({\n  type: String,\n  default: null,\n  validator: justifyValidator,\n}))\n\nconst alignContentValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around', 'stretch'].includes(str)\nconst alignContentProps = makeProps('alignContent', () => ({\n  type: String,\n  default: null,\n  validator: alignContentValidator,\n}))\n\nconst propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps),\n}\n\nconst classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content',\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: string) {\n  let className = classMap[type]\n  if (val == null) {\n    return undefined\n  }\n  if (prop) {\n    // alignSm -> Sm\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // .align-items-sm-center\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-row',\n  functional: true,\n  props: {\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator,\n    },\n    ...alignProps,\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator,\n    },\n    ...justifyProps,\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator,\n    },\n    ...alignContentProps,\n  },\n  render (h, { props, data, children }) {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `align`, `justify`, `alignContent` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      classList.push({\n        'no-gutters': props.noGutters,\n        'row--dense': props.dense,\n        [`align-${props.align}`]: props.align,\n        [`justify-${props.justify}`]: props.justify,\n        [`align-content-${props.alignContent}`]: props.alignContent,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(\n      props.tag,\n      mergeData(data, {\n        staticClass: 'row',\n        class: classList,\n      }),\n      children\n    )\n  },\n})\n","/*!\n * vue-filepond v5.1.3\n * A handy FilePond adapter component for Vue\n * \n * Copyright (c) 2019 PQINA\n * https://pqina.nl/filepond\n * \n * Licensed under the MIT license.\n */\n\n(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define('vueFilePond', ['exports', 'vue', 'filepond'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(exports, require('vue'), require('filepond'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports, global.Vue, global.FilePond);\n        global.vueFilePond = mod.exports;\n    }\n})(this, function (exports, _vue, _filepond) {\n    'use strict';\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n    exports.setOptions = undefined;\n\n    var _vue2 = _interopRequireDefault(_vue);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    // Methods not made available to the component\n    var filteredComponentMethods = ['setOptions', 'on', 'off', 'onOnce', 'appendTo', 'insertAfter', 'insertBefore', 'isAttachedTo', 'replaceElement', 'restoreElement', 'destroy'];\n\n    // Test if is supported on this client\n    var isSupported = (0, _filepond.supported)();\n\n    // Setup initial prop types and update when plugins are added\n    var getNativeConstructorFromType = function getNativeConstructorFromType(type) {\n        return {\n            string: String,\n            boolean: Boolean,\n            array: Array,\n            function: Function,\n            int: Number,\n            serverapi: Object,\n            object: Object\n        }[type];\n    };\n\n    // Activated props\n    var props = {};\n\n    // Events that need to be mapped to emitters\n    var events = [];\n\n    // Props to watch\n    var watch = {};\n\n    // all active instances\n    var instances = [];\n\n    // global options\n    var globalOptions = {};\n    var setOptions = exports.setOptions = function setOptions(options) {\n        globalOptions = Object.assign(globalOptions, options);\n        instances.forEach(function (instance) {\n            instance.setOptions(globalOptions);\n        });\n    };\n\n    exports.default = function () {\n\n        // register plugins in FilePond\n        _filepond.registerPlugin.apply(undefined, arguments);\n\n        // build events and props array\n        events.length = 0;\n\n        var _loop = function _loop(prop) {\n            // don't add events to the props array\n            if (/^on/.test(prop)) {\n                events.push(prop);\n                return 'continue';\n            }\n\n            // get property type ( can be either a String or the type defined within FilePond )\n            props[prop] = [String, getNativeConstructorFromType(_filepond.OptionTypes[prop])];\n\n            // setup watcher\n            watch[prop] = function (value) {\n                this._pond[prop] = value;\n            };\n        };\n\n        for (var prop in _filepond.OptionTypes) {\n            var _ret = _loop(prop);\n\n            if (_ret === 'continue') continue;\n        }\n\n        // create \n        return _vue2.default.component('FilePond', {\n            name: 'FilePond',\n            props: props,\n            watch: watch,\n            render: function render(h) {\n                return h('div', {\n                    'class': {\n                        'filepond--wrapper': true\n                    }\n                }, [h('input', {\n                    attrs: {\n                        id: this.id,\n                        name: this.name,\n                        type: 'file',\n                        'class': this.className,\n                        required: this.required,\n                        multiple: this.allowMultiple,\n                        accept: this.acceptedFileTypes,\n                        capture: this.captureMethod\n                    }\n                })]);\n            },\n\n\n            // Will setup FilePond instance when mounted\n            mounted: function mounted() {\n                var _this = this;\n\n                // exit here if not supported\n                if (!isSupported) {\n                    return;\n                }\n\n                // get pond element\n                this._element = this.$el.querySelector('input');\n\n                // Map FilePond callback methods to Vue $emitters\n                var options = events.reduce(function (obj, value) {\n                    obj[value] = function () {\n                        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                            args[_key] = arguments[_key];\n                        }\n\n                        _this.$emit('input', _this._pond ? _this._pond.getFiles() : []);\n                        _this.$emit.apply(_this, [value.substr(2)].concat(args));\n                    };\n                    return obj;\n                }, {});\n\n                // Scoop up attributes that might not have been caught by Vue ( because the props object is extended dynamically )\n                var attrs = Object.assign({}, this.$attrs);\n\n                // Create our pond\n                this._pond = (0, _filepond.create)(this._element, Object.assign({}, globalOptions, options, attrs, this.$options.propsData));\n\n                // Copy instance method references to component instance\n                Object.keys(this._pond).filter(function (key) {\n                    return !filteredComponentMethods.includes(key);\n                }).forEach(function (key) {\n                    _this[key] = _this._pond[key];\n                });\n\n                // Add to instances so we can apply global options when used\n                instances.push(this._pond);\n            },\n\n\n            // Will clean up FilePond instance when unmounted\n            destroyed: function destroyed() {\n                var _this2 = this;\n\n                // reference to detached method\n                var detached = this.$options.detached;\n\n                // no longer attached, clean up\n\n                if (!this.$el.offsetParent) {\n                    detached.call(this);\n                    return;\n                }\n\n                // if we're still attached it's likely a transition is running, we need to \n                // determine the moment when we're no longer attached to the DOM so we can \n                // clean up properly\n                var mutationHandler = function mutationHandler(mutations, observer) {\n                    var removedNodes = (mutations[0] || {}).removedNodes || [];\n                    var removedNode = removedNodes[0];\n                    if (!removedNode || !removedNode.contains(_this2.$el)) return;\n                    observer.disconnect();\n                    detached.call(_this2);\n                };\n\n                // start observing parent element for changes to the DOM\n                var observer = new MutationObserver(mutationHandler);\n                observer.observe(document.documentElement, { childList: true, subtree: true });\n            },\n\n\n            // called when the component root node has been detached\n            detached: function detached() {\n\n                // exit when no pond defined\n                if (!this._pond) return;\n\n                // bye bye pond\n                this._pond.destroy();\n\n                // remove from instances\n                var index = instances.indexOf(this._pond);\n                if (index >= 0) {\n                    instances.splice(index, 1);\n                }\n\n                // clear reference\n                this._pond = null;\n            }\n        });\n    };\n});\n\n\n","/*!\n * FilePondPluginFileValidateType 1.2.4\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n  'use strict';\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    // get quick reference to Type utils\n    var Type = utils.Type,\n      isString = utils.isString,\n      replaceInString = utils.replaceInString,\n      guesstimateMimeType = utils.guesstimateMimeType,\n      getExtensionFromFilename = utils.getExtensionFromFilename,\n      getFilenameFromURL = utils.getFilenameFromURL;\n\n    var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(\n      mimeType,\n      wildcard\n    ) {\n      var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n      var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n      return mimeTypeGroup === wildcardGroup;\n    };\n\n    var isValidMimeType = function isValidMimeType(\n      acceptedTypes,\n      userInputType\n    ) {\n      return acceptedTypes.some(function(acceptedType) {\n        // accepted is wildcard mime type\n        if (/\\*$/.test(acceptedType)) {\n          return mimeTypeMatchesWildCard(userInputType, acceptedType);\n        }\n\n        // is normal mime type\n        return acceptedType === userInputType;\n      });\n    };\n\n    var getItemType = function getItemType(item) {\n      // if the item is a url we guess the mime type by the extension\n      var type = '';\n      if (isString(item)) {\n        var filename = getFilenameFromURL(item);\n        var extension = getExtensionFromFilename(filename);\n        if (extension) {\n          type = guesstimateMimeType(extension);\n        }\n      } else {\n        type = item.type;\n      }\n\n      return type;\n    };\n\n    var validateFile = function validateFile(\n      item,\n      acceptedFileTypes,\n      typeDetector\n    ) {\n      // no types defined, everything is allowed \\o/\n      if (acceptedFileTypes.length === 0) {\n        return true;\n      }\n\n      // gets the item type\n      var type = getItemType(item);\n\n      // no type detector, test now\n      if (!typeDetector) {\n        return isValidMimeType(acceptedFileTypes, type);\n      }\n\n      // use type detector\n      return new Promise(function(resolve, reject) {\n        typeDetector(item, type)\n          .then(function(detectedType) {\n            if (isValidMimeType(acceptedFileTypes, detectedType)) {\n              resolve();\n            } else {\n              reject();\n            }\n          })\n          .catch(reject);\n      });\n    };\n\n    var applyMimeTypeMap = function applyMimeTypeMap(map) {\n      return function(acceptedFileType) {\n        return map[acceptedFileType] === null\n          ? false\n          : map[acceptedFileType] || acceptedFileType;\n      };\n    };\n\n    // setup attribute mapping for accept\n    addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n      return Object.assign(map, {\n        accept: 'acceptedFileTypes'\n      });\n    });\n\n    // filtering if an item is allowed in hopper\n    addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n      var query = _ref2.query;\n      // if we are not doing file type validation exit\n      if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n        return true;\n      }\n\n      // we validate the file against the accepted file types\n      return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n    });\n\n    // called for each file that is loaded\n    // right before it is set to the item state\n    // should return a promise\n    addFilter('LOAD_FILE', function(file, _ref3) {\n      var query = _ref3.query;\n      return new Promise(function(resolve, reject) {\n        if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n          resolve(file);\n          return;\n        }\n\n        var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n        // custom type detector method\n        var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n        // if invalid, exit here\n        var validationResult = validateFile(\n          file,\n          acceptedFileTypes,\n          typeDetector\n        );\n\n        var handleRejection = function handleRejection() {\n          var acceptedFileTypesMapped = acceptedFileTypes\n            .map(\n              applyMimeTypeMap(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n              )\n            )\n            .filter(function(label) {\n              return label !== false;\n            });\n\n          reject({\n            status: {\n              main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n              sub: replaceInString(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                {\n                  allTypes: acceptedFileTypesMapped.join(', '),\n                  allButLastType: acceptedFileTypesMapped\n                    .slice(0, -1)\n                    .join(', '),\n                  lastType:\n                    acceptedFileTypesMapped[acceptedFileTypesMapped.length - 1]\n                }\n              )\n            }\n          });\n        };\n\n        // has returned new filename immidiately\n        if (typeof validationResult === 'boolean') {\n          if (!validationResult) {\n            return handleRejection();\n          }\n          return resolve(file);\n        }\n\n        // is promise\n        validationResult\n          .then(function() {\n            resolve(file);\n          })\n          .catch(handleRejection);\n      });\n    });\n\n    // expose plugin\n    return {\n      // default options\n      options: {\n        // Enable or disable file type validation\n        allowFileTypeValidation: [true, Type.BOOLEAN],\n\n        // What file types to accept\n        acceptedFileTypes: [[], Type.ARRAY],\n        // - must be comma separated\n        // - mime types: image/png, image/jpeg, image/gif\n        // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n        // - wildcards: image/*\n\n        // label to show when a type is not allowed\n        labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n        // nicer label\n        fileValidateTypeLabelExpectedTypes: [\n          'Expects {allButLastType} or {lastType}',\n          Type.STRING\n        ],\n\n        // map mime types to extensions\n        fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n        // Custom function to detect type of file\n        fileValidateTypeDetectType: [null, Type.FUNCTION]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boutique.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boutique.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.boutique != null)?_c('v-layout',{attrs:{\"justify-center\":\"\",\"text-center\":\"\"}},[_c('v-container',[_c('v-row',[_c('v-col',[_c('v-flex',[_c('div',[_c('h1',{staticClass:\"boutique-nombre\"},[_vm._v(_vm._s(_vm.boutique.nombre))])]),_c('v-card',{staticClass:\"elevation-2 ma-3\"},[_c('v-img',{attrs:{\"src\":_vm.boutique.logo}})],1),_vm._l((_vm.boutique.categorias),function(item,index){return _c('v-btn',{key:index,attrs:{\"color\":\"success\"}},[_vm._v(\" \"+_vm._s(item.nombre)+\" \")])})],2)],1)],1),_c('v-row',[_c('v-col',[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"primary\",\"dark\":\"\"}},on),[_vm._v(\"Agregar prenda\")])]}}],null,false,1314681449),model:{value:(_vm.modalPrenda),callback:function ($$v) {_vm.modalPrenda=$$v},expression:\"modalPrenda\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_c('span',{staticClass:\"headline\"},[_vm._v(\"Prenda\")])]),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Nombre\",\"required\":\"\"},model:{value:(_vm.prenda.nombre),callback:function ($$v) {_vm.$set(_vm.prenda, \"nombre\", $$v)},expression:\"prenda.nombre\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Marca\",\"required\":\"\"},model:{value:(_vm.prenda.marca),callback:function ($$v) {_vm.$set(_vm.prenda, \"marca\", $$v)},expression:\"prenda.marca\"}})],1),_c('v-col',[_c('v-select',{attrs:{\"items\":_vm.categorias,\"item-text\":\"nombre\",\"item-value\":\"id\",\"label\":\"Categoria\"},model:{value:(_vm.categoriaSeleccionada),callback:function ($$v) {_vm.categoriaSeleccionada=$$v},expression:\"categoriaSeleccionada\"}})],1),(_vm.categoriaSeleccionada != null)?_c('v-col',[_c('v-select',{attrs:{\"items\":_vm.categoria.tallas,\"label\":\"Tallas\",\"multiple\":\"\",\"chips\":\"\"},model:{value:(_vm.tallas),callback:function ($$v) {_vm.tallas=$$v},expression:\"tallas\"}})],1):_vm._e(),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"Descripcion\",\"required\":\"\"},model:{value:(_vm.prenda.descripcion),callback:function ($$v) {_vm.$set(_vm.prenda, \"descripcion\", $$v)},expression:\"prenda.descripcion\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[(_vm.vista == 1)?_c('file-pond',{attrs:{\"label-idle\":\"Selecciona una imagen\",\"accepted-file-types\":\"image/jpeg, image/png, image/jpg\",\"labelFileTypeNotAllowed\":\"SOlo imagenes jpeg o png\",\"instant-upload\":\"false\"},on:{\"addfile\":_vm.cargarImagen}}):_vm._e(),(_vm.vista == 2)?_c('img',{ref:\"vistaPrevia\",attrs:{\"src\":\"\",\"alt\":\"\",\"width\":\"100%\"}}):_vm._e()],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.modalPrenda = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.guardarPrenda}},[_vm._v(\" Guardar \")])],1)],1)],1)],1)],1),_c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\" Prendas \"),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.prendas,\"items-per-page\":5,\"loading\":\"true\",\"search\":_vm.search},scopedSlots:_vm._u([{key:\"item.action\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-flex',[_c('router-link',{attrs:{\"to\":{ name: 'prendas', params: { id: item.id } }}},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\" remove_red_eye \")])],1)],1)]}},{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-switch',{on:{\"change\":function($event){return _vm.actualizarEstatus(item)}},model:{value:(item.publicado),callback:function ($$v) {_vm.$set(item, \"publicado\", $$v)},expression:\"item.publicado\"}})]}}],null,false,2776449052)})],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <v-layout v-if=\"boutique != null\" justify-center text-center>\n        <v-container>\n            <v-row>\n                <v-col>\n                    <v-flex >\n                        <div>\n                            <h1 class=\"boutique-nombre\">{{ boutique.nombre }}</h1>\n                        </div>\n                        <v-card class=\"elevation-2 ma-3\">\n                            <v-img :src=\"boutique.logo\">\n\n                            </v-img>\n                        </v-card>\n                        <v-btn color=\"success\" v-for=\"(item, index) in boutique.categorias\" :key=\"index\">\n                            {{ item.nombre }}\n                        </v-btn>\n                    </v-flex>\n                </v-col>\n            </v-row>\n            <v-row>\n                <v-col>\n                    <v-dialog v-model=\"modalPrenda\" persistent max-width=\"600px\">\n                        <template v-slot:activator=\"{ on }\">\n                            <v-btn color=\"primary\" dark v-on=\"on\">Agregar prenda</v-btn>\n                        </template>\n                        <v-card>\n                            <v-card-title class=\"headline grey lighten-2\" primary-title>\n                                <span class=\"headline\">Prenda</span>\n                            </v-card-title>\n\n                            <v-card-text>\n                                <v-container>\n                                    <v-row>\n                                        <v-col cols=\"12\" md=\"12\">\n                                            <v-text-field label=\"Nombre\" required v-model=\"prenda.nombre\"></v-text-field>\n                                        </v-col>\n                                        <v-col cols=\"12\" md=\"12\">\n                                            <v-text-field label=\"Marca\" required v-model=\"prenda.marca\"></v-text-field>\n                                        </v-col>\n                                        <v-col>\n                                            <v-select\n                                            :items=\"categorias\"\n                                            item-text=\"nombre\"\n                                            item-value=\"id\"\n                                            label=\"Categoria\"\n                                            v-model=\"categoriaSeleccionada\"\n                                            ></v-select>\n                                        </v-col>\n                                        <v-col v-if=\"categoriaSeleccionada != null\">\n                                            <v-select\n                                                v-model=\"tallas\"\n                                                :items=\"categoria.tallas\"\n                                                label=\"Tallas\"\n                                                multiple\n                                                chips\n                                            ></v-select>\n                                        </v-col>\n                                        <v-col cols=\"12\" md=\"12\">\n                                            <v-textarea label=\"Descripcion\" required v-model=\"prenda.descripcion\"></v-textarea>\n                                        </v-col>\n                                        <v-col cols=\"12\" md=\"12\">\n                                            <file-pond v-if=\"vista == 1\"\n                                                label-idle=\"Selecciona una imagen\" \n                                                accepted-file-types=\"image/jpeg, image/png, image/jpg\"\n                                                labelFileTypeNotAllowed=\"SOlo imagenes jpeg o png\"\n                                                instant-upload=\"false\"\n                                                @addfile=\"cargarImagen\"\n                                                >\n                                            </file-pond>\n                                            <img v-if=\"vista == 2\" ref=\"vistaPrevia\" src=\"\" alt=\"\" width=\"100%\">\n                                        </v-col>\n                                    </v-row>\n                                </v-container>\n                            </v-card-text>\n                            <v-card-actions>\n                                <v-spacer></v-spacer>\n                                <v-btn color=\"primary\" text @click=\"modalPrenda = false\">\n                                    Cancel\n                                </v-btn>\n                                <v-btn color=\"primary\" text @click=\"guardarPrenda\">\n                                    Guardar\n                                </v-btn>\n                            </v-card-actions>\n                        </v-card>\n                    </v-dialog>\n                </v-col>\n            </v-row>\n            <v-row>\n                <v-col>\n                    <v-card>\n                        <v-card-title>\n                            Prendas\n                            <v-spacer></v-spacer>\n                            <v-text-field\n                                v-model=\"search\"\n                                append-icon=\"search\"\n                                label=\"Search\"\n                                single-line\n                                hide-details\n                            ></v-text-field>\n                        </v-card-title>\n                        <v-data-table\n                            :headers=\"headers\"\n                            :items=\"prendas\"\n                            :items-per-page=\"5\"\n                            class=\"elevation-1\"\n                            loading=\"true\"\n                            :search=\"search\"\n                        >\n                            <template v-slot:item.action=\"{ item }\">\n                                <v-flex>\n                                    <router-link :to=\"{ name: 'prendas', params: { id: item.id } }\">\n                                        <v-icon\n                                            small\n                                            class=\"mr-2\"\n                                            \n                                        >\n                                        remove_red_eye\n                                        </v-icon>\n                                    </router-link>\n                                </v-flex>\n                            </template>\n                            <template v-slot:item.status=\"{ item }\">\n                                <v-switch\n                                    v-model=\"item.publicado\"\n                                    @change=\"actualizarEstatus(item)\"\n                                ></v-switch>\n                            </template>\n                        </v-data-table>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-layout>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { db, storage } from '@/firebase'\n\nimport vueFilePond from 'vue-filepond'\nimport FilePondPluginValidateType from 'filepond-plugin-file-validate-type'\nimport 'filepond/dist/filepond.min.css'\n\nimport Cropper from 'cropperjs/dist/cropper'\nimport 'cropperjs/dist/cropper.css'\n\nimport uuidv4 from 'uuid/v4'\n\nconst FilePond = vueFilePond(FilePondPluginValidateType)\n\nexport default {\n    components: {\n        FilePond\n    },\n    data(){\n        return{\n            vista: 1,\n            cropper: null,\n            load: false,\n            boutique: null,\n            //Modal\n            modalPrenda: false,\n            categoriaSeleccionada: null,\n            categoria: '',\n            categorias: [],\n\n            //Tabla\n            search: '',\n            headers: [\n                {\n                    text: 'Nombre',\n                    align: 'left',\n                    sortable: false,\n                    value: 'nombre',\n                },\n                { text: 'Marca', value: 'marca' },\n                { text: 'Tallas', value: 'tallas' },\n                { text: 'Opciones', value: 'action', sortable: false },\n                { text: 'Estatus', value: 'status', sortable: false },\n            ],\n            prendas: [],\n            \n\n            //Tallas\n            prenda: {\n                nombre: '',\n                marca: '',\n                descripcion: '',\n                foto: '',\n            },\n            tallas: [],\n        }\n    },\n    computed: {\n\n    },\n    async mounted(){\n        let id = this.$route.params.id\n        let response = await db.collection('boutiques').doc(id).get()\n\n        if(response.exists){\n            this.boutique = response.data()  \n        }\n\n        db.collection('categorias').onSnapshot(response => {\n            this.categorias = [];\n            response.forEach(doc => {\n                this.categorias.push(doc.data())\n            })\n        })\n\n        if(this.boutique != null){\n            db.collection('prendas')\n                    .where('boutique', '==', this.boutique.id)\n                    .onSnapshot(response => {\n                        this.prendas = [];\n                        response.forEach(doc => {\n                            this.prendas.push(doc.data())\n                        })\n                    })\n        }\n    },\n    watch:{\n        categoriaSeleccionada(){\n            this.categoria = this.categorias.find(element => element.id == this.categoriaSeleccionada)\n        }\n    },\n    methods: {\n        async guardarPrenda(){\n            this.prenda.tallas = this.tallas\n            this.prenda.categoria = this.categoria.nombre\n            try{\n                let response = await db.collection('prendas').add(this.prenda)\n                let addId = await db.collection('prendas').doc(response.id).set({ id: response.id, boutique: this.boutique.id }, { merge: true })\n\n                // let response = await db.collection('prendas').doc(this.boutique.id).set({id: this.boutique.id, nombre: this.boutique.nombre})\n                // let prenda = await db.collection('prendas').doc(this.boutique.id).collection('ropa').add(this.prenda)\n                // let addId = await db.collection('prendas').doc(this.boutique.id).collection('ropa').doc(prenda.id).update({ id: prenda.id })\n\n\n                let canvas = this.cropper.getCroppedCanvas()\n                let imagen = canvas.toDataURL('image/png')\n                let fotoId = uuidv4()\n\n                try {\n                    let ref = storage.ref()\n                    let resultado = await ref.child('boutiques/' + this.boutique.nombre + '/prendas/' + fotoId + '.png')\n                                             .putString(imagen, 'data_url')\n                    \n                    let URL = await resultado.ref.getDownloadURL()\n\n                    await db.collection('prendas').doc(response.id).update({ foto: URL })\n                } catch (e) {\n                    console.log(e)\n                }\n                \n\n                //let addId = await db.collection('prendas').doc(response.id).update({ id: response.id })\n            }\n            catch(e){\n                console.log(e)\n            }\n            finally{\n                this.modalPrenda = false\n            }\n        },\n\n        cargarImagen(error, imagen){\n            if(error){\n                console.log(error)\n                return\n            }\n            console.log(imagen.file)\n            this.vista = 2\n\n            let reader = new FileReader()\n\n            let vm = this\n\n            reader.onloadend= () => {\n                vm.$refs.vistaPrevia.src = reader.result\n                vm.recortarImagen()\n            }\n\n            if(imagen){\n                if(imagen.file){\n                    reader.readAsDataURL(imagen.file)\n                }\n            }\n        },\n\n        recortarImagen(){\n            this.cropper = new Cropper(this.$refs.vistaPrevia, {\n                preview: this.$refs.vistaPrevia,\n                //aspectRatio: 1,\n                modal: false,\n                guides: true,\n                sized: false,\n                zoomable: false,\n                highlight: true,\n                background: false,\n                autoCrop: true,\n            })\n        },\n\n        async actualizarEstatus(item){\n            try {\n                let response = await db.collection('prendas').doc(this.boutique.id).collection('ropa').doc(item.id)\n                response.update({ publicado: item.publicado })\n            } catch (e) {\n                console.log(e)\n            }\n        }\n    }\n}\n</script>\n\n<style>\n    .boutique-nombre{\n        font-size: 1.5rem;\n        color: red;\n    }\n\n    .filepond-drop-label{\n        font-size: 14pt !important;\n    }\n\n    .edicionImagen{\n        width: 100%;\n    }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boutique.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boutique.vue?vue&type=script&lang=js&\"","// Directives\nimport ripple from '../../directives/ripple'\n\n// Types\nimport Vue, { VNode, VNodeData, VNodeDirective } from 'vue'\n\nexport default Vue.extend({\n  name: 'rippleable',\n\n  directives: { ripple },\n\n  props: {\n    ripple: {\n      type: [Boolean, Object],\n      default: true,\n    },\n  },\n\n  methods: {\n    genRipple (data: VNodeData = {}): VNode | null {\n      if (!this.ripple) return null\n\n      data.staticClass = 'v-input--selection-controls__ripple'\n\n      data.directives = data.directives || []\n      data.directives.push({\n        name: 'ripple',\n        value: { center: true },\n      } as VNodeDirective)\n      data.on = Object.assign({\n        click: this.onChange,\n      }, this.$listeners)\n\n      return this.$createElement('div', data)\n    },\n    onChange () {},\n  },\n})\n","// Components\nimport VInput from '../../components/VInput'\n\n// Mixins\nimport Rippleable from '../rippleable'\nimport Comparable from '../comparable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(\n  VInput,\n  Rippleable,\n  Comparable\n).extend({\n  name: 'selectable',\n\n  model: {\n    prop: 'inputValue',\n    event: 'change',\n  },\n\n  props: {\n    id: String,\n    inputValue: null as any,\n    falseValue: null as any,\n    trueValue: null as any,\n    multiple: {\n      type: Boolean,\n      default: null,\n    },\n    label: String,\n  },\n\n  data () {\n    return {\n      hasColor: this.inputValue,\n      lazyValue: this.inputValue,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (!this.isActive) return undefined\n      if (this.color) return this.color\n      if (this.isDark && !this.appIsDark) return 'white'\n      return 'accent'\n    },\n    isMultiple (): boolean {\n      return this.multiple === true || (this.multiple === null && Array.isArray(this.internalValue))\n    },\n    isActive (): boolean {\n      const value = this.value\n      const input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) return false\n\n        return input.some(item => this.valueComparator(item, value))\n      }\n\n      if (this.trueValue === undefined || this.falseValue === undefined) {\n        return value\n          ? this.valueComparator(value, input)\n          : Boolean(input)\n      }\n\n      return this.valueComparator(input, this.trueValue)\n    },\n    isDirty (): boolean {\n      return this.isActive\n    },\n  },\n\n  watch: {\n    inputValue (val) {\n      this.lazyValue = val\n      this.hasColor = val\n    },\n  },\n\n  methods: {\n    genLabel () {\n      const label = VInput.options.methods.genLabel.call(this)\n\n      if (!label) return label\n\n      label!.data!.on = {\n        click: (e: Event) => {\n          // Prevent label from\n          // causing the input\n          // to focus\n          e.preventDefault()\n\n          this.onChange()\n        },\n      }\n\n      return label\n    },\n    genInput (type: string, attrs: object) {\n      return this.$createElement('input', {\n        attrs: Object.assign({\n          'aria-checked': this.isActive.toString(),\n          disabled: this.isDisabled,\n          id: this.computedId,\n          role: type,\n          type,\n        }, attrs),\n        domProps: {\n          value: this.value,\n          checked: this.isActive,\n        },\n        on: {\n          blur: this.onBlur,\n          change: this.onChange,\n          focus: this.onFocus,\n          keydown: this.onKeydown,\n        },\n        ref: 'input',\n      })\n    },\n    onBlur () {\n      this.isFocused = false\n    },\n    onChange () {\n      if (this.isDisabled) return\n\n      const value = this.value\n      let input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) {\n          input = []\n        }\n\n        const length = input.length\n\n        input = input.filter((item: any) => !this.valueComparator(item, value))\n\n        if (input.length === length) {\n          input.push(value)\n        }\n      } else if (this.trueValue !== undefined && this.falseValue !== undefined) {\n        input = this.valueComparator(input, this.trueValue) ? this.falseValue : this.trueValue\n      } else if (value) {\n        input = this.valueComparator(input, value) ? null : value\n      } else {\n        input = !input\n      }\n\n      this.validate(true, input)\n      this.internalValue = input\n      this.hasColor = input\n    },\n    onFocus () {\n      this.isFocused = true\n    },\n    /** @abstract */\n    onKeydown (e: Event) {},\n  },\n})\n","// Styles\nimport '../../styles/components/_selection-controls.sass'\nimport './VSwitch.sass'\n\n// Mixins\nimport Selectable from '../../mixins/selectable'\nimport VInput from '../VInput'\n\n// Directives\nimport Touch from '../../directives/touch'\n\n// Components\nimport { VFabTransition } from '../transitions'\nimport VProgressCircular from '../VProgressCircular/VProgressCircular'\n\n// Helpers\nimport { keyCodes } from '../../util/helpers'\n\n// Types\nimport { VNode, VNodeData } from 'vue'\n\n/* @vue/component */\nexport default Selectable.extend({\n  name: 'v-switch',\n\n  directives: { Touch },\n\n  props: {\n    inset: Boolean,\n    loading: {\n      type: [Boolean, String],\n      default: false,\n    },\n    flat: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-input--selection-controls v-input--switch': true,\n        'v-input--switch--flat': this.flat,\n        'v-input--switch--inset': this.inset,\n      }\n    },\n    attrs (): object {\n      return {\n        'aria-checked': String(this.isActive),\n        'aria-disabled': String(this.disabled),\n        role: 'switch',\n      }\n    },\n    // Do not return undefined if disabled,\n    // according to spec, should still show\n    // a color when disabled and active\n    validationState (): string | undefined {\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor !== null) return this.computedColor\n      return undefined\n    },\n    switchData (): VNodeData {\n      return this.setTextColor(this.loading ? undefined : this.validationState, {\n        class: this.themeClasses,\n      })\n    },\n  },\n\n  methods: {\n    genDefaultSlot (): (VNode | null)[] {\n      return [\n        this.genSwitch(),\n        this.genLabel(),\n      ]\n    },\n    genSwitch (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-input--selection-controls__input',\n      }, [\n        this.genInput('checkbox', {\n          ...this.attrs,\n          ...this.attrs$,\n        }),\n        this.genRipple(this.setTextColor(this.validationState, {\n          directives: [{\n            name: 'touch',\n            value: {\n              left: this.onSwipeLeft,\n              right: this.onSwipeRight,\n            },\n          }],\n        })),\n        this.$createElement('div', {\n          staticClass: 'v-input--switch__track',\n          ...this.switchData,\n        }),\n        this.$createElement('div', {\n          staticClass: 'v-input--switch__thumb',\n          ...this.switchData,\n        }, [this.genProgress()]),\n      ])\n    },\n    genProgress (): VNode {\n      return this.$createElement(VFabTransition, {}, [\n        this.loading === false\n          ? null\n          : this.$slots.progress || this.$createElement(VProgressCircular, {\n            props: {\n              color: (this.loading === true || this.loading === '')\n                ? (this.color || 'primary')\n                : this.loading,\n              size: 16,\n              width: 2,\n              indeterminate: true,\n            },\n          }),\n      ])\n    },\n    onSwipeLeft () {\n      if (this.isActive) this.onChange()\n    },\n    onSwipeRight () {\n      if (!this.isActive) this.onChange()\n    },\n    onKeydown (e: KeyboardEvent) {\n      if (\n        (e.keyCode === keyCodes.left && this.isActive) ||\n        (e.keyCode === keyCodes.right && !this.isActive)\n      ) this.onChange()\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./Boutique.vue?vue&type=template&id=af94a958&\"\nimport script from \"./Boutique.vue?vue&type=script&lang=js&\"\nexport * from \"./Boutique.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Boutique.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDataTable,VDialog,VFlex,VIcon,VImg,VLayout,VRow,VSelect,VSpacer,VSwitch,VTextField,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',[_c('v-container',{attrs:{\"grid-list-xs\":\"\"}},[_c('v-row',[_c('v-col',[_c('v-img',{staticClass:\"white--text align-end\",attrs:{\"width\":\"100%\",\"src\":_vm.prenda.foto}})],1),_c('v-col',[(_vm.prenda.length != 0)?_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"400\"}},[_c('v-card-title',[_vm._v(_vm._s(_vm.prenda.nombre))]),_c('v-divider'),_vm._l((_vm.prenda.tallas),function(item,index){return _c('v-chip',{key:index,staticClass:\"ma-2\",attrs:{\"color\":\"primary\"}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),_c('v-card-text',{staticClass:\"text--primary\"},[_c('div',[_vm._v(_vm._s(_vm.prenda.descripcion))])]),_c('v-card-actions',[[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.prendaEdicion = JSON.parse( JSON.stringify( _vm.prenda ) )}}},on),[_vm._v(\"Editar\")])]}}],null,false,3280553550),model:{value:(_vm.editarPrenda),callback:function ($$v) {_vm.editarPrenda=$$v},expression:\"editarPrenda\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_c('span',{staticClass:\"headline\"},[_vm._v(\"Prenda\")])]),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Nombre\",\"required\":\"\"},model:{value:(_vm.prendaEdicion.nombre),callback:function ($$v) {_vm.$set(_vm.prendaEdicion, \"nombre\", $$v)},expression:\"prendaEdicion.nombre\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Marca\",\"required\":\"\"},model:{value:(_vm.prendaEdicion.marca),callback:function ($$v) {_vm.$set(_vm.prendaEdicion, \"marca\", $$v)},expression:\"prendaEdicion.marca\"}})],1),_c('v-col',[_c('v-select',{attrs:{\"items\":_vm.categorias,\"item-text\":\"nombre\",\"item-value\":\"id\",\"label\":\"Categoria\"},model:{value:(_vm.categoriaSeleccionada),callback:function ($$v) {_vm.categoriaSeleccionada=$$v},expression:\"categoriaSeleccionada\"}})],1),(_vm.categoriaSeleccionada != null)?_c('v-col',[_c('v-select',{attrs:{\"items\":_vm.categoria.tallas,\"label\":\"Tallas\",\"multiple\":\"\",\"chips\":\"\"},model:{value:(_vm.prendaEdicion.tallas),callback:function ($$v) {_vm.$set(_vm.prendaEdicion, \"tallas\", $$v)},expression:\"prendaEdicion.tallas\"}})],1):_vm._e(),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"Descripcion\",\"required\":\"\"},model:{value:(_vm.prendaEdicion.descripcion),callback:function ($$v) {_vm.$set(_vm.prendaEdicion, \"descripcion\", $$v)},expression:\"prendaEdicion.descripcion\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[(_vm.vista == 1)?_c('file-pond',{attrs:{\"label-idle\":\"Selecciona una imagen\",\"accepted-file-types\":\"image/jpeg, image/png, image/jpg\",\"labelFileTypeNotAllowed\":\"SOlo imagenes jpeg o png\",\"instant-upload\":\"false\"},on:{\"addfile\":_vm.cargarImagen}}):_vm._e(),(_vm.vista == 2)?_c('img',{ref:\"vistaPrevia\",attrs:{\"src\":\"\",\"alt\":\"\",\"width\":\"100%\"}}):_vm._e()],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.editarPrenda = false, _vm.prendaEdicion = ''}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.guardarPrenda}},[_vm._v(\" Guardar \")])],1)],1)],1)],_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"}},[_vm._v(\" Eliminar \")])],2)],2):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style lang=\"\">\n    \n</style>\n\n<template>\n    <v-layout>\n        <v-container grid-list-xs>\n            <v-row>\n                <v-col>\n                    <v-img\n                        class=\"white--text align-end\"\n                        width=\"100%\"\n                        :src=\"prenda.foto\"\n                        >\n                        </v-img>\n                </v-col>\n                <v-col>\n                   <v-card v-if=\"prenda.length != 0\"\n                        class=\"mx-auto\"\n                        max-width=\"400\"\n                    >\n                        <v-card-title>{{ prenda.nombre }}</v-card-title>\n                        <v-divider></v-divider>\n                        <v-chip\n                            v-for=\"(item, index) in prenda.tallas\" :key=\"index\"\n                            class=\"ma-2\"\n                            color=\"primary\"\n                        >\n                            {{ item }}\n                        </v-chip>\n\n                        <v-card-text class=\"text--primary\">\n                        <div>{{ prenda.descripcion }}</div>\n                        </v-card-text>\n\n                        <v-card-actions>\n                        <template>\n                            <v-dialog v-model=\"editarPrenda\" persistent max-width=\"600px\">\n                                <template v-slot:activator=\"{ on }\">\n                                    <v-btn color=\"primary\" text v-on=\"on\" @click=\"prendaEdicion = JSON.parse( JSON.stringify( prenda ) )\">Editar</v-btn>\n                                </template>\n                                <v-card>\n                                    <v-card-title class=\"headline grey lighten-2\" primary-title>\n                                        <span class=\"headline\">Prenda</span>\n                                    </v-card-title>\n\n                                    <v-card-text>\n                                        <v-container>\n                                            <v-row>\n                                                <v-col cols=\"12\" md=\"12\">\n                                                    <v-text-field label=\"Nombre\" required v-model=\"prendaEdicion.nombre\"></v-text-field>\n                                                </v-col>\n                                                <v-col cols=\"12\" md=\"12\">\n                                                    <v-text-field label=\"Marca\" required v-model=\"prendaEdicion.marca\"></v-text-field>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-select\n                                                    :items=\"categorias\"\n                                                    item-text=\"nombre\"\n                                                    item-value=\"id\"\n                                                    label=\"Categoria\"\n                                                    v-model=\"categoriaSeleccionada\"\n                                                    ></v-select>\n                                                </v-col>\n                                                <v-col v-if=\"categoriaSeleccionada != null\">\n                                                    <v-select\n                                                        v-model=\"prendaEdicion.tallas\"\n                                                        :items=\"categoria.tallas\"\n                                                        label=\"Tallas\"\n                                                        multiple\n                                                        chips\n                                                    ></v-select>\n                                                </v-col>\n                                                <v-col cols=\"12\" md=\"12\">\n                                                    <v-textarea label=\"Descripcion\" required v-model=\"prendaEdicion.descripcion\"></v-textarea>\n                                                </v-col>\n                                                <v-col cols=\"12\" md=\"12\">\n                                                    <file-pond v-if=\"vista == 1\"\n                                                        label-idle=\"Selecciona una imagen\" \n                                                        accepted-file-types=\"image/jpeg, image/png, image/jpg\"\n                                                        labelFileTypeNotAllowed=\"SOlo imagenes jpeg o png\"\n                                                        instant-upload=\"false\"\n                                                        @addfile=\"cargarImagen\"\n                                                        >\n                                                    </file-pond>\n                                                    <img v-if=\"vista == 2\" ref=\"vistaPrevia\" src=\"\" alt=\"\" width=\"100%\">\n                                                </v-col>\n                                            </v-row>\n                                        </v-container>\n                                    </v-card-text>\n                                    <v-card-actions>\n                                        <v-spacer></v-spacer>\n                                        <v-btn color=\"primary\" text @click=\"editarPrenda = false, prendaEdicion = ''\">\n                                            Cancel\n                                        </v-btn>\n                                        <v-btn color=\"primary\" text @click=\"guardarPrenda\">\n                                            Guardar\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                        </template>\n\n                        <v-btn\n                            color=\"red\"\n                            text\n                        >\n                            Eliminar\n                        </v-btn>\n                        </v-card-actions>\n                    </v-card>              \n                </v-col>\n            </v-row>\n        </v-container>\n    </v-layout>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { db, storage } from '@/firebase'\n\nimport vueFilePond from 'vue-filepond'\nimport FilePondPluginValidateType from 'filepond-plugin-file-validate-type'\nimport 'filepond/dist/filepond.min.css'\n\nimport Cropper from 'cropperjs/dist/cropper'\nimport 'cropperjs/dist/cropper.css'\n\nimport uuidv4 from 'uuid/v4'\n\nconst FilePond = vueFilePond(FilePondPluginValidateType)\n\nexport default {\n    data(){\n        return{\n            prenda: '',\n            editarPrenda: false,\n            prendaEdicion: '',\n\n            vista: 1,\n\n            categoriaSeleccionada: null,\n            categoria: '',\n            categorias: [],\n\n            tallas: [],\n\n            boutique: '',\n        }\n    },\n    async mounted() {\n        let id = this.$route.params.id\n\n        await db.collection('prendas').doc(this.sesion.usuario.boutique).collection('ropa').doc(id).onSnapshot(response => {\n            this.prenda = response.data()\n            this.prendaEdicion = JSON.parse( JSON.stringify( this.prenda ) )\n\n        })\n\n        await db.collection('boutiques').doc(this.sesion.usuario.boutique).onSnapshot(response => {\n            this.boutique = response.data()\n        })\n\n        await db.collection('categorias').onSnapshot(response => {\n            this.categorias = [];\n            response.forEach(doc => {\n                this.categorias.push(doc.data())\n            })\n        })\n        \n    },\n    computed: {\n        ...mapState(['sesion'])\n    },\n    watch:{\n        categoriaSeleccionada(){\n            this.categoria = this.categorias.find(element => element.id == this.categoriaSeleccionada)\n        }\n    },\n    methods: {\n        async guardarPrenda(){\n            let idPrenda = this.$route.params.id\n            try {\n                let response = await db.collection('prendas').doc(this.sesion.usuario.boutique).collection('ropa').doc(idPrenda).set(this.prendaEdicion, {merge: true})\n                \n                if(this.cropper){\n                    let canvas = this.cropper.getCroppedCanvas()\n                    let imagen = canvas.toDataURL('image/png')\n                    let fotoId = uuidv4()\n\n                    try {\n                        let ref = storage.ref()\n                        let resultado = await ref.child('boutiques/' + this.boutique.nombre + '/prendas/' + fotoId + '.png')\n                                                .putString(imagen, 'data_url')\n                        \n                        let URL = await resultado.ref.getDownloadURL()\n\n                        await db.collection('prendas').doc(this.sesion.usuario.boutique).collection('ropa').doc(idPrenda).update({ foto: URL })\n                    } catch (e) {\n                        console.log(e)\n                    }\n                }\n                \n                this.prendaEdicion = ''\n                this.editarPrenda = false\n            } catch (e) {\n                console.log(e)\n            }\n        },\n\n        cargarImagen(error, imagen){\n            if(error){\n                console.log(error)\n                return\n            }\n            console.log(imagen.file)\n            this.vista = 2\n\n            let reader = new FileReader()\n\n            let vm = this\n\n            reader.onloadend= () => {\n                vm.$refs.vistaPrevia.src = reader.result\n                vm.recortarImagen()\n            }\n\n            if(imagen){\n                if(imagen.file){\n                    reader.readAsDataURL(imagen.file)\n                }\n            }\n        },\n\n        recortarImagen(){\n            this.cropper = new Cropper(this.$refs.vistaPrevia, {\n                preview: this.$refs.vistaPrevia,\n                //aspectRatio: 1,\n                modal: false,\n                guides: true,\n                sized: false,\n                zoomable: false,\n                highlight: true,\n                background: false,\n                autoCrop: true,\n            })\n        },\n    },\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prendas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prendas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Prendas.vue?vue&type=template&id=6e726c9e&\"\nimport script from \"./Prendas.vue?vue&type=script&lang=js&\"\nexport * from \"./Prendas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VChip,VCol,VContainer,VDialog,VDivider,VImg,VLayout,VRow,VSelect,VSpacer,VTextField,VTextarea})\n","import './VGrid.sass'\n\nimport Vue, { VNode, PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst breakpointProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst offsetProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['offset' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst orderProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['order' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps),\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: boolean | string | number) {\n  let className = type\n  if (val == null || val === false) {\n    return undefined\n  }\n  if (prop) {\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n  if (type === 'col' && (val === '' || val === true)) {\n    // .col-md\n    return className.toLowerCase()\n  }\n  // .order-md-6\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-col',\n  functional: true,\n  props: {\n    cols: {\n      type: [Boolean, String, Number],\n      default: false,\n    },\n    ...breakpointProps,\n    offset: {\n      type: [String, Number],\n      default: null,\n    },\n    ...offsetProps,\n    order: {\n      type: [String, Number],\n      default: null,\n    },\n    ...orderProps,\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: (str: any) => ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str),\n    },\n    justifySelf: {\n      type: String,\n      default: null,\n      validator: (str: any) => ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str),\n    },\n    tag: {\n      type: String,\n      default: 'div',\n    },\n  },\n  render (h, { props, data, children, parent }): VNode {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `col`, `offset`, `order` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string | number | boolean = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      const hasColClasses = classList.some(className => className.startsWith('col-'))\n\n      classList.push({\n        // Default to .col if no other col-{bp}-* classes generated nor `cols` specified.\n        col: !hasColClasses || !props.cols,\n        [`col-${props.cols}`]: props.cols,\n        [`offset-${props.offset}`]: props.offset,\n        [`order-${props.order}`]: props.order,\n        [`align-self-${props.alignSelf}`]: props.alignSelf,\n        [`justify-self-${props.justifySelf}`]: props.justifySelf,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(props.tag, mergeData(data, { class: classList }), children)\n  },\n})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","/*!\n * Cropper.js v1.5.6\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2019-10-04T04:33:48.372Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Cropper = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: 200,\n    minContainerHeight: 100,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link http://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n\n      default:\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),\n        height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      canvasData.left = (containerData.width - canvasWidth) / 2;\n      canvasData.top = (containerData.height - canvasHeight) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      this.initialImageData = assign({}, imageData);\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var minContainerWidth = Number(options.minContainerWidth) || MIN_CONTAINER_WIDTH;\n      var minContainerHeight = Number(options.minContainerHeight) || MIN_CONTAINER_HEIGHT;\n\n      if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {\n        return;\n      }\n\n      var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n      if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n\n          default:\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n\n        default:\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"http://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n","/*!\n * FilePond 4.9.2\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? factory(exports)\n    : typeof define === 'function' && define.amd\n    ? define(['exports'], factory)\n    : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n  'use strict';\n\n  var isNode = function isNode(value) {\n    return value instanceof HTMLElement;\n  };\n\n  var createStore = function createStore(initialState) {\n    var queries =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var actions =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    // internal state\n    var state = Object.assign({}, initialState);\n\n    // contains all actions for next frame, is clear when actions are requested\n    var actionQueue = [];\n    var dispatchQueue = [];\n\n    // returns a duplicate of the current state\n    var getState = function getState() {\n      return Object.assign({}, state);\n    };\n\n    // returns a duplicate of the actions array and clears the actions array\n    var processActionQueue = function processActionQueue() {\n      // create copy of actions queue\n      var queue = [].concat(actionQueue);\n\n      // clear actions queue (we don't want no double actions)\n      actionQueue.length = 0;\n\n      return queue;\n    };\n\n    // processes actions that might block the main UI thread\n    var processDispatchQueue = function processDispatchQueue() {\n      // create copy of actions queue\n      var queue = [].concat(dispatchQueue);\n\n      // clear actions queue (we don't want no double actions)\n      dispatchQueue.length = 0;\n\n      // now dispatch these actions\n      queue.forEach(function(_ref) {\n        var type = _ref.type,\n          data = _ref.data;\n        dispatch(type, data);\n      });\n    };\n\n    // adds a new action, calls its handler and\n    var dispatch = function dispatch(type, data, isBlocking) {\n      // is blocking action\n      if (isBlocking) {\n        dispatchQueue.push({\n          type: type,\n          data: data\n        });\n\n        return;\n      }\n\n      // if this action has a handler, handle the action\n      if (actionHandlers[type]) {\n        actionHandlers[type](data);\n      }\n\n      // now add action\n      actionQueue.push({\n        type: type,\n        data: data\n      });\n    };\n\n    var query = function query(str) {\n      var _queryHandles;\n      for (\n        var _len = arguments.length,\n          args = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        args[_key - 1] = arguments[_key];\n      }\n      return queryHandles[str]\n        ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n        : null;\n    };\n\n    var api = {\n      getState: getState,\n      processActionQueue: processActionQueue,\n      processDispatchQueue: processDispatchQueue,\n      dispatch: dispatch,\n      query: query\n    };\n\n    var queryHandles = {};\n    queries.forEach(function(query) {\n      queryHandles = Object.assign({}, query(state), {}, queryHandles);\n    });\n\n    var actionHandlers = {};\n    actions.forEach(function(action) {\n      actionHandlers = Object.assign(\n        {},\n        action(dispatch, query, state),\n        {},\n        actionHandlers\n      );\n    });\n\n    return api;\n  };\n\n  var defineProperty = function defineProperty(obj, property, definition) {\n    if (typeof definition === 'function') {\n      obj[property] = definition;\n      return;\n    }\n    Object.defineProperty(obj, property, Object.assign({}, definition));\n  };\n\n  var forin = function forin(obj, cb) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) {\n        continue;\n      }\n\n      cb(key, obj[key]);\n    }\n  };\n\n  var createObject = function createObject(definition) {\n    var obj = {};\n    forin(definition, function(property) {\n      defineProperty(obj, property, definition[property]);\n    });\n    return obj;\n  };\n\n  var attr = function attr(node, name) {\n    var value =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    if (value === null) {\n      return node.getAttribute(name) || node.hasAttribute(name);\n    }\n    node.setAttribute(name, value);\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svgElements = ['svg', 'path']; // only svg elements used\n\n  var isSVGElement = function isSVGElement(tag) {\n    return svgElements.includes(tag);\n  };\n\n  var createElement = function createElement(tag, className) {\n    var attributes =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (typeof className === 'object') {\n      attributes = className;\n      className = null;\n    }\n    var element = isSVGElement(tag)\n      ? document.createElementNS(ns, tag)\n      : document.createElement(tag);\n    if (className) {\n      if (isSVGElement(tag)) {\n        attr(element, 'class', className);\n      } else {\n        element.className = className;\n      }\n    }\n    forin(attributes, function(name, value) {\n      attr(element, name, value);\n    });\n    return element;\n  };\n\n  var appendChild = function appendChild(parent) {\n    return function(child, index) {\n      if (typeof index !== 'undefined' && parent.children[index]) {\n        parent.insertBefore(child, parent.children[index]);\n      } else {\n        parent.appendChild(child);\n      }\n    };\n  };\n\n  var appendChildView = function appendChildView(parent, childViews) {\n    return function(view, index) {\n      if (typeof index !== 'undefined') {\n        childViews.splice(index, 0, view);\n      } else {\n        childViews.push(view);\n      }\n\n      return view;\n    };\n  };\n\n  var removeChildView = function removeChildView(parent, childViews) {\n    return function(view) {\n      // remove from child views\n      childViews.splice(childViews.indexOf(view), 1);\n\n      // remove the element\n      if (view.element.parentNode) {\n        parent.removeChild(view.element);\n      }\n\n      return view;\n    };\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  var testElement = isBrowser() ? createElement('svg') : {};\n  var getChildCount =\n    'children' in testElement\n      ? function(el) {\n          return el.children.length;\n        }\n      : function(el) {\n          return el.childNodes.length;\n        };\n\n  var getViewRect = function getViewRect(\n    elementRect,\n    childViews,\n    offset,\n    scale\n  ) {\n    var left = offset[0] || elementRect.left;\n    var top = offset[1] || elementRect.top;\n    var right = left + elementRect.width;\n    var bottom = top + elementRect.height * (scale[1] || 1);\n\n    var rect = {\n      // the rectangle of the element itself\n      element: Object.assign({}, elementRect),\n\n      // the rectangle of the element expanded to contain its children, does not include any margins\n      inner: {\n        left: elementRect.left,\n        top: elementRect.top,\n        right: elementRect.right,\n        bottom: elementRect.bottom\n      },\n\n      // the rectangle of the element expanded to contain its children including own margin and child margins\n      // margins will be added after we've recalculated the size\n      outer: {\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      }\n    };\n\n    // expand rect to fit all child rectangles\n    childViews\n      .filter(function(childView) {\n        return !childView.isRectIgnored();\n      })\n      .map(function(childView) {\n        return childView.rect;\n      })\n      .forEach(function(childViewRect) {\n        expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n        expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n      });\n\n    // calculate inner width and height\n    calculateRectSize(rect.inner);\n\n    // append additional margin (top and left margins are included in top and left automatically)\n    rect.outer.bottom += rect.element.marginBottom;\n    rect.outer.right += rect.element.marginRight;\n\n    // calculate outer width and height\n    calculateRectSize(rect.outer);\n\n    return rect;\n  };\n\n  var expandRect = function expandRect(parent, child) {\n    // adjust for parent offset\n    child.top += parent.top;\n    child.right += parent.left;\n    child.bottom += parent.top;\n    child.left += parent.left;\n\n    if (child.bottom > parent.bottom) {\n      parent.bottom = child.bottom;\n    }\n\n    if (child.right > parent.right) {\n      parent.right = child.right;\n    }\n  };\n\n  var calculateRectSize = function calculateRectSize(rect) {\n    rect.width = rect.right - rect.left;\n    rect.height = rect.bottom - rect.top;\n  };\n\n  var isNumber = function isNumber(value) {\n    return typeof value === 'number';\n  };\n\n  /**\n   * Determines if position is at destination\n   * @param position\n   * @param destination\n   * @param velocity\n   * @param errorMargin\n   * @returns {boolean}\n   */\n  var thereYet = function thereYet(position, destination, velocity) {\n    var errorMargin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n    return (\n      Math.abs(position - destination) < errorMargin &&\n      Math.abs(velocity) < errorMargin\n    );\n  };\n\n  /**\n   * Spring animation\n   */\n  var spring =\n    // default options\n    function spring() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$stiffness = _ref.stiffness,\n        stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n        _ref$damping = _ref.damping,\n        damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n        _ref$mass = _ref.mass,\n        mass = _ref$mass === void 0 ? 10 : _ref$mass;\n      var target = null;\n      var position = null;\n      var velocity = 0;\n      var resting = false;\n\n      // updates spring state\n      var interpolate = function interpolate() {\n        // in rest, don't animate\n        if (resting) {\n          return;\n        }\n\n        // need at least a target or position to do springy things\n        if (!(isNumber(target) && isNumber(position))) {\n          resting = true;\n          velocity = 0;\n          return;\n        }\n\n        // calculate spring force\n        var f = -(position - target) * stiffness;\n\n        // update velocity by adding force based on mass\n        velocity += f / mass;\n\n        // update position by adding velocity\n        position += velocity;\n\n        // slow down based on amount of damping\n        velocity *= damping;\n\n        // we've arrived if we're near target and our velocity is near zero\n        if (thereYet(position, target, velocity)) {\n          position = target;\n          velocity = 0;\n          resting = true;\n\n          // we done\n          api.onupdate(position);\n          api.oncomplete(position);\n        } else {\n          // progress update\n          api.onupdate(position);\n        }\n      };\n\n      /**\n       * Set new target value\n       * @param value\n       */\n      var setTarget = function setTarget(value) {\n        // if currently has no position, set target and position to this value\n        if (isNumber(value) && !isNumber(position)) {\n          position = value;\n        }\n\n        // next target value will not be animated to\n        if (target === null) {\n          target = value;\n          position = value;\n        }\n\n        // let start moving to target\n        target = value;\n\n        // already at target\n        if (position === target || typeof target === 'undefined') {\n          // now resting as target is current position, stop moving\n          resting = true;\n          velocity = 0;\n\n          // done!\n          api.onupdate(position);\n          api.oncomplete(position);\n\n          return;\n        }\n\n        resting = false;\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          set: setTarget,\n          get: function get() {\n            return target;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var easeLinear = function easeLinear(t) {\n    return t;\n  };\n  var easeInOutQuad = function easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  };\n\n  var tween =\n    // default values\n    function tween() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$duration = _ref.duration,\n        duration = _ref$duration === void 0 ? 500 : _ref$duration,\n        _ref$easing = _ref.easing,\n        easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n        _ref$delay = _ref.delay,\n        delay = _ref$delay === void 0 ? 0 : _ref$delay;\n      var start = null;\n      var t;\n      var p;\n      var resting = true;\n      var reverse = false;\n      var target = null;\n\n      var interpolate = function interpolate(ts) {\n        if (resting || target === null) {\n          return;\n        }\n\n        if (start === null) {\n          start = ts;\n        }\n\n        if (ts - start < delay) {\n          return;\n        }\n\n        t = ts - start - delay;\n\n        if (t < duration) {\n          p = t / duration;\n          api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n        } else {\n          t = 1;\n          p = reverse ? 0 : 1;\n          api.onupdate(p * target);\n          api.oncomplete(p * target);\n          resting = true;\n        }\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          get: function get() {\n            return reverse ? 0 : target;\n          },\n          set: function set(value) {\n            // is initial value\n            if (target === null) {\n              target = value;\n              api.onupdate(value);\n              api.oncomplete(value);\n              return;\n            }\n\n            // want to tween to a smaller value and have a current value\n            if (value < target) {\n              target = 1;\n              reverse = true;\n            } else {\n              // not tweening to a smaller value\n              reverse = false;\n              target = value;\n            }\n\n            // let's go!\n            resting = false;\n            start = null;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var animator = {\n    spring: spring,\n    tween: tween\n  };\n\n  /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n  var createAnimator = function createAnimator(definition, category, property) {\n    // default is single definition\n    // we check if transform is set, if so, we check if property is set\n    var def =\n      definition[category] && typeof definition[category][property] === 'object'\n        ? definition[category][property]\n        : definition[category] || definition;\n\n    var type = typeof def === 'string' ? def : def.type;\n    var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n    return animator[type] ? animator[type](props) : null;\n  };\n\n  var addGetSet = function addGetSet(keys, obj, props) {\n    var overwrite =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    obj = Array.isArray(obj) ? obj : [obj];\n    obj.forEach(function(o) {\n      keys.forEach(function(key) {\n        var name = key;\n        var getter = function getter() {\n          return props[key];\n        };\n        var setter = function setter(value) {\n          return (props[key] = value);\n        };\n\n        if (typeof key === 'object') {\n          name = key.key;\n          getter = key.getter || getter;\n          setter = key.setter || setter;\n        }\n\n        if (o[name] && !overwrite) {\n          return;\n        }\n\n        o[name] = {\n          get: getter,\n          set: setter\n        };\n      });\n    });\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // setup animators\n\n  var animations = function animations(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      viewState = _ref.viewState;\n    // initial properties\n    var initialProps = Object.assign({}, viewProps);\n\n    // list of all active animations\n    var animations = [];\n\n    // setup animators\n    forin(mixinConfig, function(property, animation) {\n      var animator = createAnimator(animation);\n      if (!animator) {\n        return;\n      }\n\n      // when the animator updates, update the view state value\n      animator.onupdate = function(value) {\n        viewProps[property] = value;\n      };\n\n      // set animator target\n      animator.target = initialProps[property];\n\n      // when value is set, set the animator target value\n      var prop = {\n        key: property,\n        setter: function setter(value) {\n          // if already at target, we done!\n          if (animator.target === value) {\n            return;\n          }\n\n          animator.target = value;\n        },\n        getter: function getter() {\n          return viewProps[property];\n        }\n      };\n\n      // add getters and setters\n      addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n      // add it to the list for easy updating from the _write method\n      animations.push(animator);\n    });\n\n    // expose internal write api\n    return {\n      write: function write(ts) {\n        var resting = true;\n        animations.forEach(function(animation) {\n          if (!animation.resting) {\n            resting = false;\n          }\n          animation.interpolate(ts);\n        });\n        return resting;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var addEvent = function addEvent(element) {\n    return function(type, fn) {\n      element.addEventListener(type, fn);\n    };\n  };\n\n  var removeEvent = function removeEvent(element) {\n    return function(type, fn) {\n      element.removeEventListener(type, fn);\n    };\n  };\n\n  // mixin\n  var listeners = function listeners(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      viewState = _ref.viewState,\n      view = _ref.view;\n    var events = [];\n\n    var add = addEvent(view.element);\n    var remove = removeEvent(view.element);\n\n    viewExternalAPI.on = function(type, fn) {\n      events.push({\n        type: type,\n        fn: fn\n      });\n\n      add(type, fn);\n    };\n\n    viewExternalAPI.off = function(type, fn) {\n      events.splice(\n        events.findIndex(function(event) {\n          return event.type === type && event.fn === fn;\n        }),\n        1\n      );\n\n      remove(type, fn);\n    };\n\n    return {\n      write: function write() {\n        // not busy\n        return true;\n      },\n      destroy: function destroy() {\n        events.forEach(function(event) {\n          remove(event.type, event.fn);\n        });\n      }\n    };\n  };\n\n  // add to external api and link to props\n\n  var apis = function apis(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewExternalAPI = _ref.viewExternalAPI;\n    addGetSet(mixinConfig, viewExternalAPI, viewProps);\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // set initial state based on props in viewProps\n  // apply as transforms each frame\n\n  var defaults = {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    translateX: 0,\n    translateY: 0,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    originX: 0,\n    originY: 0\n  };\n\n  var styles = function styles(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      view = _ref.view;\n    // initial props\n    var initialProps = Object.assign({}, viewProps);\n\n    // current props\n    var currentProps = {};\n\n    // we will add those properties to the external API and link them to the viewState\n    addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n    // override rect on internal and external rect getter so it takes in account transforms\n    var getOffset = function getOffset() {\n      return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n    };\n\n    var getScale = function getScale() {\n      return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n    };\n    var getRect = function getRect() {\n      return view.rect\n        ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n        : null;\n    };\n    viewInternalAPI.rect = { get: getRect };\n    viewExternalAPI.rect = { get: getRect };\n\n    // apply view props\n    mixinConfig.forEach(function(key) {\n      viewProps[key] =\n        typeof initialProps[key] === 'undefined'\n          ? defaults[key]\n          : initialProps[key];\n    });\n\n    // expose api\n    return {\n      write: function write() {\n        // see if props have changed\n        if (!propsHaveChanged(currentProps, viewProps)) {\n          return;\n        }\n\n        // moves element to correct position on screen\n        applyStyles(view.element, viewProps);\n\n        // store new transforms\n        Object.assign(currentProps, Object.assign({}, viewProps));\n\n        // no longer busy\n        return true;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n    // different amount of keys\n    if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n      return true;\n    }\n\n    // lets analyze the individual props\n    for (var prop in newProps) {\n      if (newProps[prop] !== currentProps[prop]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var applyStyles = function applyStyles(element, _ref2) {\n    var opacity = _ref2.opacity,\n      perspective = _ref2.perspective,\n      translateX = _ref2.translateX,\n      translateY = _ref2.translateY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      rotateX = _ref2.rotateX,\n      rotateY = _ref2.rotateY,\n      rotateZ = _ref2.rotateZ,\n      originX = _ref2.originX,\n      originY = _ref2.originY,\n      width = _ref2.width,\n      height = _ref2.height;\n\n    var transforms = '';\n    var styles = '';\n\n    // handle transform origin\n    if (isDefined(originX) || isDefined(originY)) {\n      styles +=\n        'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n    }\n\n    // transform order is relevant\n    // 0. perspective\n    if (isDefined(perspective)) {\n      transforms += 'perspective(' + perspective + 'px) ';\n    }\n\n    // 1. translate\n    if (isDefined(translateX) || isDefined(translateY)) {\n      transforms +=\n        'translate3d(' +\n        (translateX || 0) +\n        'px, ' +\n        (translateY || 0) +\n        'px, 0) ';\n    }\n\n    // 2. scale\n    if (isDefined(scaleX) || isDefined(scaleY)) {\n      transforms +=\n        'scale3d(' +\n        (isDefined(scaleX) ? scaleX : 1) +\n        ', ' +\n        (isDefined(scaleY) ? scaleY : 1) +\n        ', 1) ';\n    }\n\n    // 3. rotate\n    if (isDefined(rotateZ)) {\n      transforms += 'rotateZ(' + rotateZ + 'rad) ';\n    }\n\n    if (isDefined(rotateX)) {\n      transforms += 'rotateX(' + rotateX + 'rad) ';\n    }\n\n    if (isDefined(rotateY)) {\n      transforms += 'rotateY(' + rotateY + 'rad) ';\n    }\n\n    // add transforms\n    if (transforms.length) {\n      styles += 'transform:' + transforms + ';';\n    }\n\n    // add opacity\n    if (isDefined(opacity)) {\n      styles += 'opacity:' + opacity + ';';\n\n      // if we reach zero, we make the element inaccessible\n      if (opacity === 0) {\n        styles += 'visibility:hidden;';\n      }\n\n      // if we're below 100% opacity this element can't be clicked\n      if (opacity < 1) {\n        styles += 'pointer-events:none;';\n      }\n    }\n\n    // add height\n    if (isDefined(height)) {\n      styles += 'height:' + height + 'px;';\n    }\n\n    // add width\n    if (isDefined(width)) {\n      styles += 'width:' + width + 'px;';\n    }\n\n    // apply styles\n    var elementCurrentStyle = element.elementCurrentStyle || '';\n\n    // if new styles does not match current styles, lets update!\n    if (\n      styles.length !== elementCurrentStyle.length ||\n      styles !== elementCurrentStyle\n    ) {\n      element.style.cssText = styles;\n      // store current styles so we can compare them to new styles later on\n      // _not_ getting the style value is faster\n      element.elementCurrentStyle = styles;\n    }\n  };\n\n  var Mixins = {\n    styles: styles,\n    listeners: listeners,\n    animations: animations,\n    apis: apis\n  };\n\n  var updateRect = function updateRect() {\n    var rect =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var element =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var style =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!element.layoutCalculated) {\n      rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n      rect.marginTop = parseInt(style.marginTop, 10) || 0;\n      rect.marginRight = parseInt(style.marginRight, 10) || 0;\n      rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n      rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n      element.layoutCalculated = true;\n    }\n\n    rect.left = element.offsetLeft || 0;\n    rect.top = element.offsetTop || 0;\n    rect.width = element.offsetWidth || 0;\n    rect.height = element.offsetHeight || 0;\n\n    rect.right = rect.left + rect.width;\n    rect.bottom = rect.top + rect.height;\n\n    rect.scrollTop = element.scrollTop;\n\n    rect.hidden = element.offsetParent === null;\n\n    return rect;\n  };\n\n  var createView =\n    // default view definition\n    function createView() {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$tag = _ref.tag,\n        tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? null : _ref$name,\n        _ref$attributes = _ref.attributes,\n        attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n        _ref$read = _ref.read,\n        read = _ref$read === void 0 ? function() {} : _ref$read,\n        _ref$write = _ref.write,\n        write = _ref$write === void 0 ? function() {} : _ref$write,\n        _ref$create = _ref.create,\n        create = _ref$create === void 0 ? function() {} : _ref$create,\n        _ref$destroy = _ref.destroy,\n        destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n        _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n        filterFrameActionsForChild =\n          _ref$filterFrameActio === void 0\n            ? function(child, actions) {\n                return actions;\n              }\n            : _ref$filterFrameActio,\n        _ref$didCreateView = _ref.didCreateView,\n        didCreateView =\n          _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n        _ref$didWriteView = _ref.didWriteView,\n        didWriteView =\n          _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n        _ref$ignoreRect = _ref.ignoreRect,\n        ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n        _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n        ignoreRectUpdate =\n          _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n        _ref$mixins = _ref.mixins,\n        mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n      return function(\n        // each view requires reference to store\n        store\n      ) {\n        var props =\n          arguments.length > 1 && arguments[1] !== undefined\n            ? arguments[1]\n            : {};\n        // root element should not be changed\n        var element = createElement(tag, 'filepond--' + name, attributes);\n\n        // style reference should also not be changed\n        var style = window.getComputedStyle(element, null);\n\n        // element rectangle\n        var rect = updateRect();\n        var frameRect = null;\n\n        // rest state\n        var isResting = false;\n\n        // pretty self explanatory\n        var childViews = [];\n\n        // loaded mixins\n        var activeMixins = [];\n\n        // references to created children\n        var ref = {};\n\n        // state used for each instance\n        var state = {};\n\n        // list of writers that will be called to update this view\n        var writers = [\n          write // default writer\n        ];\n\n        var readers = [\n          read // default reader\n        ];\n\n        var destroyers = [\n          destroy // default destroy\n        ];\n\n        // core view methods\n        var getElement = function getElement() {\n          return element;\n        };\n        var getChildViews = function getChildViews() {\n          return childViews.concat();\n        };\n        var getReference = function getReference() {\n          return ref;\n        };\n        var createChildView = function createChildView(store) {\n          return function(view, props) {\n            return view(store, props);\n          };\n        };\n        var getRect = function getRect() {\n          if (frameRect) {\n            return frameRect;\n          }\n          frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n          return frameRect;\n        };\n        var getStyle = function getStyle() {\n          return style;\n        };\n\n        /**\n         * Read data from DOM\n         * @private\n         */\n        var _read = function _read() {\n          frameRect = null;\n\n          // read child views\n          childViews.forEach(function(child) {\n            return child._read();\n          });\n\n          var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n          if (shouldUpdate) {\n            updateRect(rect, element, style);\n          }\n\n          // readers\n          var api = { root: internalAPI, props: props, rect: rect };\n          readers.forEach(function(reader) {\n            return reader(api);\n          });\n        };\n\n        /**\n         * Write data to DOM\n         * @private\n         */\n        var _write = function _write(ts, frameActions, shouldOptimize) {\n          // if no actions, we assume that the view is resting\n          var resting = frameActions.length === 0;\n\n          // writers\n          writers.forEach(function(writer) {\n            var writerResting = writer({\n              props: props,\n              root: internalAPI,\n              actions: frameActions,\n              timestamp: ts,\n              shouldOptimize: shouldOptimize\n            });\n\n            if (writerResting === false) {\n              resting = false;\n            }\n          });\n\n          // run mixins\n          activeMixins.forEach(function(mixin) {\n            // if one of the mixins is still busy after write operation, we are not resting\n            var mixinResting = mixin.write(ts);\n            if (mixinResting === false) {\n              resting = false;\n            }\n          });\n\n          // updates child views that are currently attached to the DOM\n          childViews\n            .filter(function(child) {\n              return !!child.element.parentNode;\n            })\n            .forEach(function(child) {\n              // if a child view is not resting, we are not resting\n              var childResting = child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              if (!childResting) {\n                resting = false;\n              }\n            });\n\n          // append new elements to DOM and update those\n          childViews\n            //.filter(child => !child.element.parentNode)\n            .forEach(function(child, index) {\n              // skip\n              if (child.element.parentNode) {\n                return;\n              }\n\n              // append to DOM\n              internalAPI.appendChild(child.element, index);\n\n              // call read (need to know the size of these elements)\n              child._read();\n\n              // re-call write\n              child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              // we just added somthing to the dom, no rest\n              resting = false;\n            });\n\n          // update resting state\n          isResting = resting;\n\n          didWriteView({\n            props: props,\n            root: internalAPI,\n            actions: frameActions,\n            timestamp: ts\n          });\n\n          // let parent know if we are resting\n          return resting;\n        };\n\n        var _destroy = function _destroy() {\n          activeMixins.forEach(function(mixin) {\n            return mixin.destroy();\n          });\n          destroyers.forEach(function(destroyer) {\n            destroyer({ root: internalAPI, props: props });\n          });\n          childViews.forEach(function(child) {\n            return child._destroy();\n          });\n        };\n\n        // sharedAPI\n        var sharedAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          style: {\n            get: getStyle\n          },\n\n          childViews: {\n            get: getChildViews\n          }\n        };\n\n        // private API definition\n        var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: getRect\n          },\n\n          // access to custom children references\n          ref: {\n            get: getReference\n          },\n\n          // dom modifiers\n          is: function is(needle) {\n            return name === needle;\n          },\n          appendChild: appendChild(element),\n          createChildView: createChildView(store),\n          linkView: function linkView(view) {\n            childViews.push(view);\n            return view;\n          },\n          unlinkView: function unlinkView(view) {\n            childViews.splice(childViews.indexOf(view), 1);\n          },\n          appendChildView: appendChildView(element, childViews),\n          removeChildView: removeChildView(element, childViews),\n          registerWriter: function registerWriter(writer) {\n            return writers.push(writer);\n          },\n          registerReader: function registerReader(reader) {\n            return readers.push(reader);\n          },\n          registerDestroyer: function registerDestroyer(destroyer) {\n            return destroyers.push(destroyer);\n          },\n          invalidateLayout: function invalidateLayout() {\n            return (element.layoutCalculated = false);\n          },\n\n          // access to data store\n          dispatch: store.dispatch,\n          query: store.query\n        });\n\n        // public view API methods\n        var externalAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          childViews: {\n            get: getChildViews\n          },\n\n          rect: {\n            get: getRect\n          },\n\n          resting: {\n            get: function get() {\n              return isResting;\n            }\n          },\n\n          isRectIgnored: function isRectIgnored() {\n            return ignoreRect;\n          },\n          _read: _read,\n          _write: _write,\n          _destroy: _destroy\n        };\n\n        // mixin API methods\n        var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: function get() {\n              return rect;\n            }\n          }\n        });\n\n        // add mixin functionality\n        Object.keys(mixins)\n          .sort(function(a, b) {\n            // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n            if (a === 'styles') {\n              return 1;\n            } else if (b === 'styles') {\n              return -1;\n            }\n            return 0;\n          })\n          .forEach(function(key) {\n            var mixinAPI = Mixins[key]({\n              mixinConfig: mixins[key],\n              viewProps: props,\n              viewState: state,\n              viewInternalAPI: internalAPIDefinition,\n              viewExternalAPI: externalAPIDefinition,\n              view: createObject(mixinAPIDefinition)\n            });\n\n            if (mixinAPI) {\n              activeMixins.push(mixinAPI);\n            }\n          });\n\n        // construct private api\n        var internalAPI = createObject(internalAPIDefinition);\n\n        // create the view\n        create({\n          root: internalAPI,\n          props: props\n        });\n\n        // append created child views to root node\n        var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n        childViews.forEach(function(child, index) {\n          internalAPI.appendChild(child.element, childCount + index);\n        });\n\n        // call did create\n        didCreateView(internalAPI);\n\n        // expose public api\n        return createObject(externalAPIDefinition);\n      };\n    };\n\n  var createPainter = function createPainter(read, write) {\n    var fps =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n    var name = '__framePainter';\n\n    // set global painter\n    if (window[name]) {\n      window[name].readers.push(read);\n      window[name].writers.push(write);\n      return;\n    }\n\n    window[name] = {\n      readers: [read],\n      writers: [write]\n    };\n\n    var painter = window[name];\n\n    var interval = 1000 / fps;\n    var last = null;\n    var id = null;\n    var requestTick = null;\n    var cancelTick = null;\n\n    var setTimerType = function setTimerType() {\n      if (document.hidden) {\n        requestTick = function requestTick() {\n          return window.setTimeout(function() {\n            return tick(performance.now());\n          }, interval);\n        };\n        cancelTick = function cancelTick() {\n          return window.clearTimeout(id);\n        };\n      } else {\n        requestTick = function requestTick() {\n          return window.requestAnimationFrame(tick);\n        };\n        cancelTick = function cancelTick() {\n          return window.cancelAnimationFrame(id);\n        };\n      }\n    };\n\n    document.addEventListener('visibilitychange', function() {\n      if (cancelTick) cancelTick();\n      setTimerType();\n      tick(performance.now());\n    });\n\n    var tick = function tick(ts) {\n      // queue next tick\n      id = requestTick(tick);\n\n      // limit fps\n      if (!last) {\n        last = ts;\n      }\n\n      var delta = ts - last;\n\n      if (delta <= interval) {\n        // skip frame\n        return;\n      }\n\n      // align next frame\n      last = ts - (delta % interval);\n\n      // update view\n      painter.readers.forEach(function(read) {\n        return read();\n      });\n      painter.writers.forEach(function(write) {\n        return write(ts);\n      });\n    };\n\n    setTimerType();\n    tick(performance.now());\n\n    return {\n      pause: function pause() {\n        cancelTick(id);\n      }\n    };\n  };\n\n  var createRoute = function createRoute(routes, fn) {\n    return function(_ref) {\n      var root = _ref.root,\n        props = _ref.props,\n        _ref$actions = _ref.actions,\n        actions = _ref$actions === void 0 ? [] : _ref$actions,\n        timestamp = _ref.timestamp,\n        shouldOptimize = _ref.shouldOptimize;\n      actions\n        .filter(function(action) {\n          return routes[action.type];\n        })\n        .forEach(function(action) {\n          return routes[action.type]({\n            root: root,\n            props: props,\n            action: action.data,\n            timestamp: timestamp,\n            shouldOptimize: shouldOptimize\n          });\n        });\n\n      if (fn) {\n        fn({\n          root: root,\n          props: props,\n          actions: actions,\n          timestamp: timestamp,\n          shouldOptimize: shouldOptimize\n        });\n      }\n    };\n  };\n\n  var insertBefore = function insertBefore(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  var insertAfter = function insertAfter(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(\n      newNode,\n      referenceNode.nextSibling\n    );\n  };\n\n  var isArray = function isArray(value) {\n    return Array.isArray(value);\n  };\n\n  var isEmpty = function isEmpty(value) {\n    return value == null;\n  };\n\n  var trim = function trim(str) {\n    return str.trim();\n  };\n\n  var toString = function toString(value) {\n    return '' + value;\n  };\n\n  var toArray = function toArray(value) {\n    var splitter =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n    if (isEmpty(value)) {\n      return [];\n    }\n    if (isArray(value)) {\n      return value;\n    }\n    return toString(value)\n      .split(splitter)\n      .map(trim)\n      .filter(function(str) {\n        return str.length;\n      });\n  };\n\n  var isBoolean = function isBoolean(value) {\n    return typeof value === 'boolean';\n  };\n\n  var toBoolean = function toBoolean(value) {\n    return isBoolean(value) ? value : value === 'true';\n  };\n\n  var isString = function isString(value) {\n    return typeof value === 'string';\n  };\n\n  var toNumber = function toNumber(value) {\n    return isNumber(value)\n      ? value\n      : isString(value)\n      ? toString(value).replace(/[a-z]+/gi, '')\n      : 0;\n  };\n\n  var toInt = function toInt(value) {\n    return parseInt(toNumber(value), 10);\n  };\n\n  var toFloat = function toFloat(value) {\n    return parseFloat(toNumber(value));\n  };\n\n  var isInt = function isInt(value) {\n    return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n  };\n\n  var toBytes = function toBytes(value) {\n    // is in bytes\n    if (isInt(value)) {\n      return value;\n    }\n\n    // is natural file size\n    var naturalFileSize = toString(value).trim();\n\n    // if is value in megabytes\n    if (/MB$/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n      return toInt(naturalFileSize) * 1000 * 1000;\n    }\n\n    // if is value in kilobytes\n    if (/KB/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n      return toInt(naturalFileSize) * 1000;\n    }\n\n    return toInt(naturalFileSize);\n  };\n\n  var isFunction = function isFunction(value) {\n    return typeof value === 'function';\n  };\n\n  var toFunctionReference = function toFunctionReference(string) {\n    var ref = self;\n    var levels = string.split('.');\n    var level = null;\n    while ((level = levels.shift())) {\n      ref = ref[level];\n      if (!ref) {\n        return null;\n      }\n    }\n    return ref;\n  };\n\n  var methods = {\n    process: 'POST',\n    patch: 'PATCH',\n    revert: 'DELETE',\n    fetch: 'GET',\n    restore: 'GET',\n    load: 'GET'\n  };\n\n  var createServerAPI = function createServerAPI(outline) {\n    var api = {};\n\n    api.url = isString(outline) ? outline : outline.url || '';\n    api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n    api.headers = outline.headers ? outline.headers : {};\n\n    forin(methods, function(key) {\n      api[key] = createAction(\n        key,\n        outline[key],\n        methods[key],\n        api.timeout,\n        api.headers\n      );\n    });\n\n    // special treatment for remove\n    api.remove = outline.remove || null;\n\n    // remove generic headers from api object\n    delete api.headers;\n\n    return api;\n  };\n\n  var createAction = function createAction(\n    name,\n    outline,\n    method,\n    timeout,\n    headers\n  ) {\n    // is explicitely set to null so disable\n    if (outline === null) {\n      return null;\n    }\n\n    // if is custom function, done! Dev handles everything.\n    if (typeof outline === 'function') {\n      return outline;\n    }\n\n    // build action object\n    var action = {\n      url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n      method: method,\n      headers: headers,\n      withCredentials: false,\n      timeout: timeout,\n      onload: null,\n      ondata: null,\n      onerror: null\n    };\n\n    // is a single url\n    if (isString(outline)) {\n      action.url = outline;\n      return action;\n    }\n\n    // overwrite\n    Object.assign(action, outline);\n\n    // see if should reformat headers;\n    if (isString(action.headers)) {\n      var parts = action.headers.split(/:(.+)/);\n      action.headers = {\n        header: parts[0],\n        value: parts[1]\n      };\n    }\n\n    // if is bool withCredentials\n    action.withCredentials = toBoolean(action.withCredentials);\n\n    return action;\n  };\n\n  var toServerAPI = function toServerAPI(value) {\n    return createServerAPI(value);\n  };\n\n  var isNull = function isNull(value) {\n    return value === null;\n  };\n\n  var isObject = function isObject(value) {\n    return typeof value === 'object' && value !== null;\n  };\n\n  var isAPI = function isAPI(value) {\n    return (\n      isObject(value) &&\n      isString(value.url) &&\n      isObject(value.process) &&\n      isObject(value.revert) &&\n      isObject(value.restore) &&\n      isObject(value.fetch)\n    );\n  };\n\n  var getType = function getType(value) {\n    if (isArray(value)) {\n      return 'array';\n    }\n\n    if (isNull(value)) {\n      return 'null';\n    }\n\n    if (isInt(value)) {\n      return 'int';\n    }\n\n    if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n      return 'bytes';\n    }\n\n    if (isAPI(value)) {\n      return 'api';\n    }\n\n    return typeof value;\n  };\n\n  var replaceSingleQuotes = function replaceSingleQuotes(str) {\n    return str\n      .replace(/{\\s*'/g, '{\"')\n      .replace(/'\\s*}/g, '\"}')\n      .replace(/'\\s*:/g, '\":')\n      .replace(/:\\s*'/g, ':\"')\n      .replace(/,\\s*'/g, ',\"')\n      .replace(/'\\s*,/g, '\",');\n  };\n\n  var conversionTable = {\n    array: toArray,\n    boolean: toBoolean,\n    int: function int(value) {\n      return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n    },\n    number: toFloat,\n    float: toFloat,\n    bytes: toBytes,\n    string: function string(value) {\n      return isFunction(value) ? value : toString(value);\n    },\n    function: function _function(value) {\n      return toFunctionReference(value);\n    },\n    serverapi: toServerAPI,\n    object: function object(value) {\n      try {\n        return JSON.parse(replaceSingleQuotes(value));\n      } catch (e) {\n        return null;\n      }\n    }\n  };\n\n  var convertTo = function convertTo(value, type) {\n    return conversionTable[type](value);\n  };\n\n  var getValueByType = function getValueByType(\n    newValue,\n    defaultValue,\n    valueType\n  ) {\n    // can always assign default value\n    if (newValue === defaultValue) {\n      return newValue;\n    }\n\n    // get the type of the new value\n    var newValueType = getType(newValue);\n\n    // is valid type?\n    if (newValueType !== valueType) {\n      // is string input, let's attempt to convert\n      var convertedValue = convertTo(newValue, valueType);\n\n      // what is the type now\n      newValueType = getType(convertedValue);\n\n      // no valid conversions found\n      if (convertedValue === null) {\n        throw 'Trying to assign value with incorrect type to \"' +\n          option +\n          '\", allowed type: \"' +\n          valueType +\n          '\"';\n      } else {\n        newValue = convertedValue;\n      }\n    }\n\n    // assign new value\n    return newValue;\n  };\n\n  var createOption = function createOption(defaultValue, valueType) {\n    var currentValue = defaultValue;\n    return {\n      enumerable: true,\n      get: function get() {\n        return currentValue;\n      },\n      set: function set(newValue) {\n        currentValue = getValueByType(newValue, defaultValue, valueType);\n      }\n    };\n  };\n\n  var createOptions = function createOptions(options) {\n    var obj = {};\n    forin(options, function(prop) {\n      var optionDefinition = options[prop];\n      obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n    });\n    return createObject(obj);\n  };\n\n  var createInitialState = function createInitialState(options) {\n    return {\n      // model\n      items: [],\n\n      // timeout used for calling update items\n      listUpdateTimeout: null,\n\n      // timeout used for stacking metadata updates\n      itemUpdateTimeout: null,\n\n      // queue of items waiting to be processed\n      processingQueue: [],\n\n      // options\n      options: createOptions(options)\n    };\n  };\n\n  var fromCamels = function fromCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string\n      .split(/(?=[A-Z])/)\n      .map(function(part) {\n        return part.toLowerCase();\n      })\n      .join(separator);\n  };\n\n  var createOptionAPI = function createOptionAPI(store, options) {\n    var obj = {};\n    forin(options, function(key) {\n      obj[key] = {\n        get: function get() {\n          return store.getState().options[key];\n        },\n        set: function set(value) {\n          store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        }\n      };\n    });\n    return obj;\n  };\n\n  var createOptionActions = function createOptionActions(options) {\n    return function(dispatch, query, state) {\n      var obj = {};\n      forin(options, function(key) {\n        var name = fromCamels(key, '_').toUpperCase();\n\n        obj['SET_' + name] = function(action) {\n          try {\n            state.options[key] = action.value;\n          } catch (e) {} // nope, failed\n\n          // we successfully set the value of this option\n          dispatch('DID_SET_' + name, { value: state.options[key] });\n        };\n      });\n      return obj;\n    };\n  };\n\n  var createOptionQueries = function createOptionQueries(options) {\n    return function(state) {\n      var obj = {};\n      forin(options, function(key) {\n        obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n          return state.options[key];\n        };\n      });\n      return obj;\n    };\n  };\n\n  var InteractionMethod = {\n    API: 1,\n    DROP: 2,\n    BROWSE: 3,\n    PASTE: 4,\n    NONE: 5\n  };\n\n  var getUniqueId = function getUniqueId() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  };\n\n  var arrayRemove = function arrayRemove(arr, index) {\n    return arr.splice(index, 1);\n  };\n\n  var on = function on() {\n    var listeners = [];\n    var off = function off(event, cb) {\n      arrayRemove(\n        listeners,\n        listeners.findIndex(function(listener) {\n          return listener.event === event && (listener.cb === cb || !cb);\n        })\n      );\n    };\n    return {\n      fire: function fire(event) {\n        for (\n          var _len = arguments.length,\n            args = new Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n        listeners\n          .filter(function(listener) {\n            return listener.event === event;\n          })\n          .map(function(listener) {\n            return listener.cb;\n          })\n          .forEach(function(cb) {\n            setTimeout(function() {\n              cb.apply(void 0, args);\n            }, 0);\n          });\n      },\n      on: function on(event, cb) {\n        listeners.push({ event: event, cb: cb });\n      },\n      onOnce: function onOnce(event, _cb) {\n        listeners.push({\n          event: event,\n          cb: function cb() {\n            off(event, _cb);\n            _cb.apply(void 0, arguments);\n          }\n        });\n      },\n      off: off\n    };\n  };\n\n  var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n    src,\n    target,\n    excluded\n  ) {\n    Object.getOwnPropertyNames(src)\n      .filter(function(property) {\n        return !excluded.includes(property);\n      })\n      .forEach(function(key) {\n        return Object.defineProperty(\n          target,\n          key,\n          Object.getOwnPropertyDescriptor(src, key)\n        );\n      });\n  };\n\n  var PRIVATE = [\n    'fire',\n    'process',\n    'revert',\n    'load',\n    'on',\n    'off',\n    'onOnce',\n    'retryLoad',\n    'extend',\n    'archive',\n    'archived',\n    'release',\n    'released',\n    'requestProcessing',\n    'freeze'\n  ];\n\n  var createItemAPI = function createItemAPI(item) {\n    var api = {};\n    copyObjectPropertiesToObject(item, api, PRIVATE);\n    return api;\n  };\n\n  var removeReleasedItems = function removeReleasedItems(items) {\n    items.forEach(function(item, index) {\n      if (item.released) {\n        arrayRemove(items, index);\n      }\n    });\n  };\n\n  var ItemStatus = {\n    INIT: 1,\n    IDLE: 2,\n    PROCESSING_QUEUED: 9,\n    PROCESSING: 3,\n    PROCESSING_COMPLETE: 5,\n    PROCESSING_ERROR: 6,\n    PROCESSING_REVERT_ERROR: 10,\n    LOADING: 7,\n    LOAD_ERROR: 8\n  };\n\n  var FileOrigin = {\n    INPUT: 1,\n    LIMBO: 2,\n    LOCAL: 3\n  };\n\n  var getNonNumeric = function getNonNumeric(str) {\n    return /[^0-9]+/.exec(str);\n  };\n\n  var getDecimalSeparator = function getDecimalSeparator() {\n    return getNonNumeric((1.1).toLocaleString())[0];\n  };\n\n  var getThousandsSeparator = function getThousandsSeparator() {\n    // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n    // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n    var decimalSeparator = getDecimalSeparator();\n    var thousandsStringWithSeparator = (1000.0).toLocaleString();\n    var thousandsStringWithoutSeparator = (1000.0).toString();\n    if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n      return getNonNumeric(thousandsStringWithSeparator)[0];\n    }\n    return decimalSeparator === '.' ? ',' : '.';\n  };\n\n  var Type = {\n    BOOLEAN: 'boolean',\n    INT: 'int',\n    NUMBER: 'number',\n    STRING: 'string',\n    ARRAY: 'array',\n    OBJECT: 'object',\n    FUNCTION: 'function',\n    ACTION: 'action',\n    SERVER_API: 'serverapi',\n    REGEX: 'regex'\n  };\n\n  // all registered filters\n  var filters = [];\n\n  // loops over matching filters and passes options to each filter, returning the mapped results\n  var applyFilterChain = function applyFilterChain(key, value, utils) {\n    return new Promise(function(resolve, reject) {\n      // find matching filters for this key\n      var matchingFilters = filters\n        .filter(function(f) {\n          return f.key === key;\n        })\n        .map(function(f) {\n          return f.cb;\n        });\n\n      // resolve now\n      if (matchingFilters.length === 0) {\n        resolve(value);\n        return;\n      }\n\n      // first filter to kick things of\n      var initialFilter = matchingFilters.shift();\n\n      // chain filters\n      matchingFilters\n        .reduce(\n          // loop over promises passing value to next promise\n          function(current, next) {\n            return current.then(function(value) {\n              return next(value, utils);\n            });\n          },\n\n          // call initial filter, will return a promise\n          initialFilter(value, utils)\n\n          // all executed\n        )\n        .then(function(value) {\n          return resolve(value);\n        })\n        .catch(function(error) {\n          return reject(error);\n        });\n    });\n  };\n\n  var applyFilters = function applyFilters(key, value, utils) {\n    return filters\n      .filter(function(f) {\n        return f.key === key;\n      })\n      .map(function(f) {\n        return f.cb(value, utils);\n      });\n  };\n\n  // adds a new filter to the list\n  var addFilter = function addFilter(key, cb) {\n    return filters.push({ key: key, cb: cb });\n  };\n\n  var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n    return Object.assign(defaultOptions, additionalOptions);\n  };\n\n  var getOptions = function getOptions() {\n    return Object.assign({}, defaultOptions);\n  };\n\n  var setOptions = function setOptions(opts) {\n    forin(opts, function(key, value) {\n      // key does not exist, so this option cannot be set\n      if (!defaultOptions[key]) {\n        return;\n      }\n      defaultOptions[key][0] = getValueByType(\n        value,\n        defaultOptions[key][0],\n        defaultOptions[key][1]\n      );\n    });\n  };\n\n  // default options on app\n  var defaultOptions = {\n    // the id to add to the root element\n    id: [null, Type.STRING],\n\n    // input field name to use\n    name: ['filepond', Type.STRING],\n\n    // disable the field\n    disabled: [false, Type.BOOLEAN],\n\n    // classname to put on wrapper\n    className: [null, Type.STRING],\n\n    // is the field required\n    required: [false, Type.BOOLEAN],\n\n    // Allow media capture when value is set\n    captureMethod: [null, Type.STRING],\n    // - \"camera\", \"microphone\" or \"camcorder\",\n    // - Does not work with multiple on apple devices\n    // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n    // Feature toggles\n    allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n    allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n    allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n    allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n    allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n    allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n    allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n\n    // Revert mode\n    forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n    // Input requirements\n    maxFiles: [null, Type.INT], // Max number of files\n    checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n    // Where to put file\n    itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n    itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n    itemInsertInterval: [75, Type.INT],\n\n    // Drag 'n Drop related\n    dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n    dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n    dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n    ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n    // Upload related\n    instantUpload: [true, Type.BOOLEAN], // Should upload files immidiately on drop\n    maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n\n    // Chunks\n    chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n    chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n    chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n    chunkRetryDelays: [[500, 1000, 3000], Type.Array], // Amount of times to retry upload of a chunk when it fails\n\n    // The server api end points to use for uploading (see docs)\n    server: [null, Type.SERVER_API],\n\n    // Labels and status messages\n    labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n    labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n    labelIdle: [\n      'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n      Type.STRING\n    ],\n    labelInvalidField: ['Field contains invalid files', Type.STRING],\n    labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n    labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n    labelFileCountSingular: ['file in list', Type.STRING],\n    labelFileCountPlural: ['files in list', Type.STRING],\n    labelFileLoading: ['Loading', Type.STRING],\n    labelFileAdded: ['Added', Type.STRING], // assistive only\n    labelFileLoadError: ['Error during load', Type.STRING],\n    labelFileRemoved: ['Removed', Type.STRING], // assistive only\n    labelFileRemoveError: ['Error during remove', Type.STRING],\n    labelFileProcessing: ['Uploading', Type.STRING],\n    labelFileProcessingComplete: ['Upload complete', Type.STRING],\n    labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n    labelFileProcessingError: ['Error during upload', Type.STRING],\n    labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n    labelTapToCancel: ['tap to cancel', Type.STRING],\n    labelTapToRetry: ['tap to retry', Type.STRING],\n    labelTapToUndo: ['tap to undo', Type.STRING],\n\n    labelButtonRemoveItem: ['Remove', Type.STRING],\n    labelButtonAbortItemLoad: ['Abort', Type.STRING],\n    labelButtonRetryItemLoad: ['Retry', Type.STRING],\n    labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n    labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n    labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n    labelButtonProcessItem: ['Upload', Type.STRING],\n\n    // make sure width and height plus viewpox are even numbers so icons are nicely centered\n    iconRemove: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconProcess: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n      Type.STRING\n    ],\n\n    iconRetry: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconUndo: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconDone: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    // event handlers\n    oninit: [null, Type.FUNCTION],\n    onwarning: [null, Type.FUNCTION],\n    onerror: [null, Type.FUNCTION],\n    onactivatefile: [null, Type.FUNCTION],\n    onaddfilestart: [null, Type.FUNCTION],\n    onaddfileprogress: [null, Type.FUNCTION],\n    onaddfile: [null, Type.FUNCTION],\n    onprocessfilestart: [null, Type.FUNCTION],\n    onprocessfileprogress: [null, Type.FUNCTION],\n    onprocessfileabort: [null, Type.FUNCTION],\n    onprocessfilerevert: [null, Type.FUNCTION],\n    onprocessfile: [null, Type.FUNCTION],\n    onprocessfiles: [null, Type.FUNCTION],\n    onremovefile: [null, Type.FUNCTION],\n    onpreparefile: [null, Type.FUNCTION],\n    onupdatefiles: [null, Type.FUNCTION],\n\n    // hooks\n    beforeDropFile: [null, Type.FUNCTION],\n    beforeAddFile: [null, Type.FUNCTION],\n    beforeRemoveFile: [null, Type.FUNCTION],\n\n    // styles\n    stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n    stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n    styleItemPanelAspectRatio: [null, Type.STRING],\n    styleButtonRemoveItemPosition: ['left', Type.STRING],\n    styleButtonProcessItemPosition: ['right', Type.STRING],\n    styleLoadIndicatorPosition: ['right', Type.STRING],\n    styleProgressIndicatorPosition: ['right', Type.STRING],\n\n    // custom initial files array\n    files: [[], Type.ARRAY]\n  };\n\n  var getItemByQuery = function getItemByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return items[0] || null;\n    }\n\n    // query is index\n    if (isInt(query)) {\n      return items[query] || null;\n    }\n\n    // if query is item, get the id\n    if (typeof query === 'object') {\n      query = query.id;\n    }\n\n    // assume query is a string and return item by id\n    return (\n      items.find(function(item) {\n        return item.id === query;\n      }) || null\n    );\n  };\n\n  var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(\n    aspectRatio\n  ) {\n    if (isEmpty(aspectRatio)) {\n      return aspectRatio;\n    }\n    if (/:/.test(aspectRatio)) {\n      var parts = aspectRatio.split(':');\n      return parts[1] / parts[0];\n    }\n    return parseFloat(aspectRatio);\n  };\n\n  var getActiveItems = function getActiveItems(items) {\n    return items.filter(function(item) {\n      return !item.archived;\n    });\n  };\n\n  var Status = {\n    EMPTY: 0,\n    IDLE: 1, // waiting\n    ERROR: 2, // a file is in error state\n    BUSY: 3, // busy processing or loading\n    READY: 4 // all files uploaded\n  };\n\n  var ITEM_ERROR = [\n    ItemStatus.LOAD_ERROR,\n    ItemStatus.PROCESSING_ERROR,\n    ItemStatus.PROCESSING_REVERT_ERROR\n  ];\n  var ITEM_BUSY = [\n    ItemStatus.LOADING,\n    ItemStatus.PROCESSING,\n    ItemStatus.PROCESSING_QUEUED,\n    ItemStatus.INIT\n  ];\n  var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n  var isItemInErrorState = function isItemInErrorState(item) {\n    return ITEM_ERROR.includes(item.status);\n  };\n  var isItemInBusyState = function isItemInBusyState(item) {\n    return ITEM_BUSY.includes(item.status);\n  };\n  var isItemInReadyState = function isItemInReadyState(item) {\n    return ITEM_READY.includes(item.status);\n  };\n\n  var queries = function queries(state) {\n    return {\n      GET_STATUS: function GET_STATUS() {\n        var items = getActiveItems(state.items);\n        var EMPTY = Status.EMPTY,\n          ERROR = Status.ERROR,\n          BUSY = Status.BUSY,\n          IDLE = Status.IDLE,\n          READY = Status.READY;\n\n        if (items.length === 0) return EMPTY;\n\n        if (items.some(isItemInErrorState)) return ERROR;\n\n        if (items.some(isItemInBusyState)) return BUSY;\n\n        if (items.some(isItemInReadyState)) return READY;\n\n        return IDLE;\n      },\n\n      GET_ITEM: function GET_ITEM(query) {\n        return getItemByQuery(state.items, query);\n      },\n\n      GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n        return getItemByQuery(getActiveItems(state.items), query);\n      },\n\n      GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n        return getActiveItems(state.items);\n      },\n\n      GET_ITEMS: function GET_ITEMS() {\n        return state.items;\n      },\n\n      GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.filename : null;\n      },\n\n      GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.fileSize : null;\n      },\n\n      GET_STYLES: function GET_STYLES() {\n        return Object.keys(state.options)\n          .filter(function(key) {\n            return /^style/.test(key);\n          })\n          .map(function(option) {\n            return {\n              name: option,\n              value: state.options[option]\n            };\n          });\n      },\n\n      GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n        var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n        var aspectRatio = isShapeCircle\n          ? 1\n          : getNumericAspectRatioFromString(\n              state.options.stylePanelAspectRatio\n            );\n        return aspectRatio;\n      },\n\n      GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n        return state.options.styleItemPanelAspectRatio;\n      },\n\n      GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n        return getActiveItems(state.items).filter(function(item) {\n          return item.status === status;\n        });\n      },\n\n      GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n        return getActiveItems(state.items).length;\n      },\n\n      IS_ASYNC: function IS_ASYNC() {\n        return (\n          isObject(state.options.server) &&\n          (isObject(state.options.server.process) ||\n            isFunction(state.options.server.process))\n        );\n      }\n    };\n  };\n\n  var hasRoomForItem = function hasRoomForItem(state) {\n    var count = getActiveItems(state.items).length;\n\n    // if cannot have multiple items, to add one item it should currently not contain items\n    if (!state.options.allowMultiple) {\n      return count === 0;\n    }\n\n    // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n    var maxFileCount = state.options.maxFiles;\n    if (maxFileCount === null) {\n      return true;\n    }\n\n    // we check if the current count is smaller than the max count, if so, another file can still be added\n    if (count < maxFileCount) {\n      return true;\n    }\n\n    // no more room for another file\n    return false;\n  };\n\n  var limit = function limit(value, min, max) {\n    return Math.max(Math.min(max, value), min);\n  };\n\n  var arrayInsert = function arrayInsert(arr, index, item) {\n    return arr.splice(index, 0, item);\n  };\n\n  var insertItem = function insertItem(items, item, index) {\n    if (isEmpty(item)) {\n      return null;\n    }\n\n    // if index is undefined, append\n    if (typeof index === 'undefined') {\n      items.push(item);\n      return item;\n    }\n\n    // limit the index to the size of the items array\n    index = limit(index, 0, items.length);\n\n    // add item to array\n    arrayInsert(items, index, item);\n\n    // expose\n    return item;\n  };\n\n  var isBase64DataURI = function isBase64DataURI(str) {\n    return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n      str\n    );\n  };\n\n  var getFilenameFromURL = function getFilenameFromURL(url) {\n    return url\n      .split('/')\n      .pop()\n      .split('?')\n      .shift();\n  };\n\n  var getExtensionFromFilename = function getExtensionFromFilename(name) {\n    return name.split('.').pop();\n  };\n\n  var guesstimateExtension = function guesstimateExtension(type) {\n    // if no extension supplied, exit here\n    if (typeof type !== 'string') {\n      return '';\n    }\n\n    // get subtype\n    var subtype = type.split('/').pop();\n\n    // is svg subtype\n    if (/svg/.test(subtype)) {\n      return 'svg';\n    }\n\n    if (/zip|compressed/.test(subtype)) {\n      return 'zip';\n    }\n\n    if (/plain/.test(subtype)) {\n      return 'txt';\n    }\n\n    if (/msword/.test(subtype)) {\n      return 'doc';\n    }\n\n    // if is valid subtype\n    if (/[a-z]+/.test(subtype)) {\n      // always use jpg extension\n      if (subtype === 'jpeg') {\n        return 'jpg';\n      }\n\n      // return subtype\n      return subtype;\n    }\n\n    return '';\n  };\n\n  var leftPad = function leftPad(value) {\n    var padding =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return (padding + value).slice(-padding.length);\n  };\n\n  var getDateString = function getDateString() {\n    var date =\n      arguments.length > 0 && arguments[0] !== undefined\n        ? arguments[0]\n        : new Date();\n    return (\n      date.getFullYear() +\n      '-' +\n      leftPad(date.getMonth() + 1, '00') +\n      '-' +\n      leftPad(date.getDate(), '00') +\n      '_' +\n      leftPad(date.getHours(), '00') +\n      '-' +\n      leftPad(date.getMinutes(), '00') +\n      '-' +\n      leftPad(date.getSeconds(), '00')\n    );\n  };\n\n  var getFileFromBlob = function getFileFromBlob(blob, filename) {\n    var type =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var extension =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var file =\n      typeof type === 'string'\n        ? blob.slice(0, blob.size, type)\n        : blob.slice(0, blob.size, blob.type);\n    file.lastModifiedDate = new Date();\n\n    // if blob has name property, use as filename if no filename supplied\n    if (!isString(filename)) {\n      filename = getDateString();\n    }\n\n    // if filename supplied but no extension and filename has extension\n    if (filename && extension === null && getExtensionFromFilename(filename)) {\n      file.name = filename;\n    } else {\n      extension = extension || guesstimateExtension(file.type);\n      file.name = filename + (extension ? '.' + extension : '');\n    }\n\n    return file;\n  };\n\n  var getBlobBuilder = function getBlobBuilder() {\n    return (window.BlobBuilder =\n      window.BlobBuilder ||\n      window.WebKitBlobBuilder ||\n      window.MozBlobBuilder ||\n      window.MSBlobBuilder);\n  };\n\n  var createBlob = function createBlob(arrayBuffer, mimeType) {\n    var BB = getBlobBuilder();\n\n    if (BB) {\n      var bb = new BB();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n      type: mimeType\n    });\n  };\n\n  var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n    byteString,\n    mimeType\n  ) {\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    return createBlob(ab, mimeType);\n  };\n\n  var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(\n    dataURI\n  ) {\n    return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n  };\n\n  var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(\n    dataURI\n  ) {\n    // get data part of string (remove data:image/jpeg...,)\n    var data = dataURI.split(',')[1];\n\n    // remove any whitespace as that causes InvalidCharacterError in IE\n    return data.replace(/\\s/g, '');\n  };\n\n  var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(\n    dataURI\n  ) {\n    return atob(getBase64DataFromBase64DataURI(dataURI));\n  };\n\n  var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n    var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n    var byteString = getByteStringFromBase64DataURI(dataURI);\n\n    return getBlobFromByteStringWithMimeType(byteString, mimeType);\n  };\n\n  var getFileFromBase64DataURI = function getFileFromBase64DataURI(\n    dataURI,\n    filename,\n    extension\n  ) {\n    return getFileFromBlob(\n      getBlobFromBase64DataURI(dataURI),\n      filename,\n      null,\n      extension\n    );\n  };\n\n  var getFileNameFromHeader = function getFileNameFromHeader(header) {\n    // test if is content disposition header, if not exit\n    if (!/^content-disposition:/i.test(header)) return null;\n\n    // get filename parts\n    var matches = header\n      .split(/filename=|filename\\*=.+''/)\n      .splice(1)\n      .map(function(name) {\n        return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n      })\n      .filter(function(name) {\n        return name.length;\n      });\n\n    return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n  };\n\n  var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n    if (/content-length:/i.test(header)) {\n      var size = header.match(/[0-9]+/)[0];\n      return size ? parseInt(size, 10) : null;\n    }\n    return null;\n  };\n\n  var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n    if (/x-content-transfer-id:/i.test(header)) {\n      var id = (header.split(':')[1] || '').trim();\n      return id || null;\n    }\n    return null;\n  };\n\n  var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n    var info = {\n      source: null,\n      name: null,\n      size: null\n    };\n\n    var rows = headers.split('\\n');\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n    try {\n      for (\n        var _iterator = rows[Symbol.iterator](), _step;\n        !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n        _iteratorNormalCompletion = true\n      ) {\n        var header = _step.value;\n\n        var name = getFileNameFromHeader(header);\n        if (name) {\n          info.name = name;\n          continue;\n        }\n\n        var size = getFileSizeFromHeader(header);\n        if (size) {\n          info.size = size;\n          continue;\n        }\n\n        var source = getTranfserIdFromHeader(header);\n        if (source) {\n          info.source = source;\n          continue;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return info;\n  };\n\n  var createFileLoader = function createFileLoader(fetchFn) {\n    var state = {\n      source: null,\n      complete: false,\n      progress: 0,\n      size: null,\n      timestamp: null,\n      duration: 0,\n      request: null\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress;\n    };\n    var abort = function abort() {\n      if (state.request && state.request.abort) {\n        state.request.abort();\n      }\n    };\n\n    // load source\n    var load = function load() {\n      // get quick reference\n      var source = state.source;\n\n      api.fire('init', source);\n\n      // Load Files\n      if (source instanceof File) {\n        api.fire('load', source);\n      } else if (source instanceof Blob) {\n        // Load blobs, set default name to current date\n        api.fire('load', getFileFromBlob(source, source.name));\n      } else if (isBase64DataURI(source)) {\n        // Load base 64, set default name to current date\n        api.fire('load', getFileFromBase64DataURI(source));\n      } else {\n        // Deal as if is external URL, let's load it!\n        loadURL(source);\n      }\n    };\n\n    // loads a url\n    var loadURL = function loadURL(url) {\n      // is remote url and no fetch method supplied\n      if (!fetchFn) {\n        api.fire('error', {\n          type: 'error',\n          body: \"Can't load URL\",\n          code: 400\n        });\n\n        return;\n      }\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // load file\n      state.request = fetchFn(\n        url,\n        function(response) {\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // done!\n          state.complete = true;\n\n          // turn blob response into a file\n          if (response instanceof Blob) {\n            response = getFileFromBlob(\n              response,\n              response.name || getFilenameFromURL(url)\n            );\n          }\n\n          api.fire('load', response instanceof Blob ? response : response.body);\n        },\n        function(error) {\n          api.fire(\n            'error',\n            typeof error === 'string'\n              ? {\n                  type: 'error',\n                  code: 0,\n                  body: error\n                }\n              : error\n          );\n        },\n        function(computable, current, total) {\n          // collected some meta data already\n          if (total) {\n            state.size = total;\n          }\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // if we can't compute progress, we're not going to fire progress events\n          if (!computable) {\n            state.progress = null;\n            return;\n          }\n\n          // update progress percentage\n          state.progress = current / total;\n\n          // expose\n          api.fire('progress', state.progress);\n        },\n        function() {\n          api.fire('abort');\n        },\n        function(response) {\n          var fileinfo = getFileInfoFromHeaders(\n            typeof response === 'string' ? response : response.headers\n          );\n          api.fire('meta', {\n            size: state.size || fileinfo.size,\n            filename: fileinfo.name,\n            source: fileinfo.source\n          });\n        }\n      );\n    };\n\n    var api = Object.assign({}, on(), {\n      setSource: function setSource(source) {\n        return (state.source = source);\n      },\n      getProgress: getProgress, // file load progress\n      abort: abort, // abort file load\n      load: load // start load\n    });\n\n    return api;\n  };\n\n  var isGet = function isGet(method) {\n    return /GET|HEAD/.test(method);\n  };\n\n  var sendRequest = function sendRequest(data, url, options) {\n    var api = {\n      onheaders: function onheaders() {},\n      onprogress: function onprogress() {},\n      onload: function onload() {},\n      ontimeout: function ontimeout() {},\n      onerror: function onerror() {},\n      onabort: function onabort() {},\n      abort: function abort() {\n        aborted = true;\n        xhr.abort();\n      }\n    };\n\n    // timeout identifier, only used when timeout is defined\n    var aborted = false;\n    var headersReceived = false;\n\n    // set default options\n    options = Object.assign(\n      {\n        method: 'POST',\n        headers: {},\n        withCredentials: false\n      },\n      options\n    );\n\n    // encode url\n    url = encodeURI(url);\n\n    // if method is GET, add any received data to url\n\n    if (isGet(options.method) && data) {\n      url =\n        '' +\n        url +\n        encodeURIComponent(\n          typeof data === 'string' ? data : JSON.stringify(data)\n        );\n    }\n\n    // create request\n    var xhr = new XMLHttpRequest();\n\n    // progress of load\n    var process = isGet(options.method) ? xhr : xhr.upload;\n    process.onprogress = function(e) {\n      // no progress event when aborted ( onprogress is called once after abort() )\n      if (aborted) {\n        return;\n      }\n\n      api.onprogress(e.lengthComputable, e.loaded, e.total);\n    };\n\n    // tries to get header info to the app as fast as possible\n    xhr.onreadystatechange = function() {\n      // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n      if (xhr.readyState < 2) {\n        return;\n      }\n\n      // no server response\n      if (xhr.readyState === 4 && xhr.status === 0) {\n        return;\n      }\n\n      if (headersReceived) {\n        return;\n      }\n\n      headersReceived = true;\n\n      // we've probably received some useful data in response headers\n      api.onheaders(xhr);\n    };\n\n    // load successful\n    xhr.onload = function() {\n      // is classified as valid response\n      if (xhr.status >= 200 && xhr.status < 300) {\n        api.onload(xhr);\n      } else {\n        api.onerror(xhr);\n      }\n    };\n\n    // error during load\n    xhr.onerror = function() {\n      return api.onerror(xhr);\n    };\n\n    // request aborted\n    xhr.onabort = function() {\n      aborted = true;\n      api.onabort();\n    };\n\n    // request timeout\n    xhr.ontimeout = function() {\n      return api.ontimeout(xhr);\n    };\n\n    // open up open up!\n    xhr.open(options.method, url, true);\n\n    // set timeout if defined (do it after open so IE11 plays ball)\n    if (isInt(options.timeout)) {\n      xhr.timeout = options.timeout;\n    }\n\n    // add headers\n    Object.keys(options.headers).forEach(function(key) {\n      var value = unescape(encodeURIComponent(options.headers[key]));\n      xhr.setRequestHeader(key, value);\n    });\n\n    // set type of response\n    if (options.responseType) {\n      xhr.responseType = options.responseType;\n    }\n\n    // set credentials\n    if (options.withCredentials) {\n      xhr.withCredentials = true;\n    }\n\n    // let's send our data\n    xhr.send(data);\n\n    return api;\n  };\n\n  var createResponse = function createResponse(type, code, body, headers) {\n    return {\n      type: type,\n      code: code,\n      body: body,\n      headers: headers\n    };\n  };\n\n  var createTimeoutResponse = function createTimeoutResponse(cb) {\n    return function(xhr) {\n      cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n    };\n  };\n\n  var createFetchFunction = function createFetchFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied\n    if (!action || !isString(action.url)) {\n      return null;\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal handler\n    return function(url, load, error, progress, abort, headers) {\n      // do local or remote request based on if the url is external\n      var request = sendRequest(\n        url,\n        apiUrl + action.url,\n        Object.assign({}, action, {\n          responseType: 'blob'\n        })\n      );\n\n      request.onload = function(xhr) {\n        // get headers\n        var headers = xhr.getAllResponseHeaders();\n\n        // get filename\n        var filename =\n          getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n        // create response\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            getFileFromBlob(onload(xhr.response), filename),\n            headers\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onheaders = function(xhr) {\n        headers(\n          createResponse(\n            'headers',\n            xhr.status,\n            null,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol['for'] &&\n          Symbol['for']('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol !== 'undefined') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly)\n        symbols = symbols.filter(function(sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function(key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(\n          target,\n          Object.getOwnPropertyDescriptors(source)\n        );\n      } else {\n        ownKeys(source).forEach(function(key) {\n          Object.defineProperty(\n            target,\n            key,\n            Object.getOwnPropertyDescriptor(source, key)\n          );\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return !!right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classPrivateFieldDestructureSet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      if (!('__destrObj' in descriptor)) {\n        descriptor.__destrObj = {\n          set value(v) {\n            descriptor.set.call(receiver, v);\n          }\n        };\n      }\n\n      return descriptor.__destrObj;\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      return descriptor;\n    }\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var ChunkStatus = {\n    QUEUED: 0,\n    COMPLETE: 1,\n    PROCESSING: 2,\n    ERROR: 3,\n    WAITING: 4\n  };\n\n  /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n  // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n  var processFileChunked = function processFileChunked(\n    apiUrl,\n    action,\n    name,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n  ) {\n    // all chunks\n    var chunks = [];\n    var chunkTransferId = options.chunkTransferId,\n      chunkServer = options.chunkServer,\n      chunkSize = options.chunkSize,\n      chunkRetryDelays = options.chunkRetryDelays;\n\n    // default state\n    var state = {\n      serverId: chunkTransferId,\n      aborted: false\n    };\n\n    // set onload handlers\n    var ondata =\n      action.ondata ||\n      function(fd) {\n        return fd;\n      };\n    var onload =\n      action.onload ||\n      function(xhr, method) {\n        return method === 'HEAD'\n          ? xhr.getResponseHeader('Upload-Offset')\n          : xhr.response;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // create server hook\n    var requestTransferId = function requestTransferId(cb) {\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(file, metadata)\n          : Object.assign({}, action.headers, {\n              'Upload-Length': file.size\n            });\n\n      var requestParams = Object.assign({}, action, {\n        headers: headers\n      });\n\n      // send request object\n      var request = sendRequest(\n        ondata(formData),\n        apiUrl + action.url,\n        requestParams\n      );\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    var requestTransferOffset = function requestTransferOffset(cb) {\n      var requestUrl = apiUrl + chunkServer.url + state.serverId;\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(state.serverId)\n          : Object.assign({}, action.headers);\n\n      var requestParams = {\n        headers: headers,\n        method: 'HEAD'\n      };\n\n      var request = sendRequest(null, requestUrl, requestParams);\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    // create chunks\n    var lastChunkIndex = Math.floor(file.size / chunkSize);\n    for (var i = 0; i <= lastChunkIndex; i++) {\n      var offset = i * chunkSize;\n      var data = file.slice(\n        offset,\n        offset + chunkSize,\n        'application/offset+octet-stream'\n      );\n      chunks[i] = {\n        index: i,\n        size: data.size,\n        offset: offset,\n        data: data,\n        file: file,\n        progress: 0,\n        retries: _toConsumableArray(chunkRetryDelays),\n        status: ChunkStatus.QUEUED,\n        error: null,\n        request: null,\n        timeout: null\n      };\n    }\n\n    var completeProcessingChunks = function completeProcessingChunks() {\n      return load(state.serverId);\n    };\n\n    var canProcessChunk = function canProcessChunk(chunk) {\n      return (\n        chunk.status === ChunkStatus.QUEUED ||\n        chunk.status === ChunkStatus.ERROR\n      );\n    };\n\n    var processChunk = function processChunk(chunk) {\n      // processing is paused, wait here\n      if (state.aborted) return;\n\n      // get next chunk to process\n      chunk = chunk || chunks.find(canProcessChunk);\n\n      // no more chunks to process\n      if (!chunk) {\n        // all done?\n        if (\n          chunks.every(function(chunk) {\n            return chunk.status === ChunkStatus.COMPLETE;\n          })\n        ) {\n          completeProcessingChunks();\n        }\n\n        // no chunk to handle\n        return;\n      }\n\n      // now processing this chunk\n      chunk.status = ChunkStatus.PROCESSING;\n      chunk.progress = null;\n\n      // allow parsing of formdata\n      var ondata =\n        chunkServer.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onerror =\n        chunkServer.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // send request object\n      var requestUrl = apiUrl + chunkServer.url + state.serverId;\n\n      var headers =\n        typeof chunkServer.headers === 'function'\n          ? chunkServer.headers(chunk)\n          : Object.assign({}, chunkServer.headers, {\n              'Content-Type': 'application/offset+octet-stream',\n              'Upload-Offset': chunk.offset,\n              'Upload-Length': file.size,\n              'Upload-Name': file.name\n            });\n\n      var request = (chunk.request = sendRequest(\n        ondata(chunk.data),\n        requestUrl,\n        Object.assign({}, chunkServer, {\n          headers: headers\n        })\n      ));\n\n      request.onload = function() {\n        // done!\n        chunk.status = ChunkStatus.COMPLETE;\n\n        // remove request reference\n        chunk.request = null;\n\n        // start processing more chunks\n        processChunks();\n      };\n\n      request.onprogress = function(lengthComputable, loaded, total) {\n        chunk.progress = lengthComputable ? loaded : null;\n        updateTotalProgress();\n      };\n\n      request.onerror = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        chunk.error = onerror(xhr.response) || xhr.statusText;\n        if (!retryProcessChunk(chunk)) {\n          error(\n            createResponse(\n              'error',\n              xhr.status,\n              onerror(xhr.response) || xhr.statusText,\n              xhr.getAllResponseHeaders()\n            )\n          );\n        }\n      };\n\n      request.ontimeout = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        if (!retryProcessChunk(chunk)) {\n          createTimeoutResponse(error)(xhr);\n        }\n      };\n\n      request.onabort = function() {\n        chunk.status = ChunkStatus.QUEUED;\n        chunk.request = null;\n        abort();\n      };\n    };\n\n    var retryProcessChunk = function retryProcessChunk(chunk) {\n      // no more retries left\n      if (chunk.retries.length === 0) return false;\n\n      // new retry\n      chunk.status = ChunkStatus.WAITING;\n      clearTimeout(chunk.timeout);\n      chunk.timeout = setTimeout(function() {\n        processChunk(chunk);\n      }, chunk.retries.shift());\n\n      // we're going to retry\n      return true;\n    };\n\n    var updateTotalProgress = function updateTotalProgress() {\n      // calculate total progress fraction\n      var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n        if (p === null || chunk.progress === null) return null;\n        return p + chunk.progress;\n      }, 0);\n\n      // can't compute progress\n      if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n      // calculate progress values\n      var totalSize = chunks.reduce(function(total, chunk) {\n        return total + chunk.size;\n      }, 0);\n\n      // can update progress indicator\n      progress(true, totalBytesTransfered, totalSize);\n    };\n\n    // process new chunks\n    var processChunks = function processChunks() {\n      var totalProcessing = chunks.filter(function(chunk) {\n        return chunk.status === ChunkStatus.PROCESSING;\n      }).length;\n      if (totalProcessing >= 1) return;\n      processChunk();\n    };\n\n    var abortChunks = function abortChunks() {\n      chunks.forEach(function(chunk) {\n        clearTimeout(chunk.timeout);\n        if (chunk.request) {\n          chunk.request.abort();\n        }\n      });\n    };\n\n    // let's go!\n    if (!state.serverId) {\n      requestTransferId(function(serverId) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // pass back to item so we can use it if something goes wrong\n        transfer(serverId);\n\n        // store internally\n        state.serverId = serverId;\n        processChunks();\n      });\n    } else {\n      requestTransferOffset(function(offset) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // mark chunks with lower offset as complete\n        chunks\n          .filter(function(chunk) {\n            return chunk.offset < offset;\n          })\n          .forEach(function(chunk) {\n            chunk.status = ChunkStatus.COMPLETE;\n            chunk.progress = chunk.size;\n          });\n\n        // continue processing\n        processChunks();\n      });\n    }\n\n    return {\n      abort: function abort() {\n        state.aborted = true;\n        abortChunks();\n      }\n    };\n  };\n\n  /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n  var createFileProcessorFunction = function createFileProcessorFunction(\n    apiUrl,\n    action,\n    name,\n    options\n  ) {\n    return function(file, metadata, load, error, progress, abort, transfer) {\n      // no file received\n      if (!file) return;\n\n      // if was passed a file, and we can chunk it, exit here\n      var canChunkUpload = options.chunkUploads;\n      var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n      var willChunkUpload =\n        canChunkUpload && (shouldChunkUpload || options.chunkForce);\n      if (file instanceof Blob && willChunkUpload)\n        return processFileChunked(\n          apiUrl,\n          action,\n          name,\n          file,\n          metadata,\n          load,\n          error,\n          progress,\n          abort,\n          transfer,\n          options\n        );\n\n      // set handlers\n      var ondata =\n        action.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onload =\n        action.onload ||\n        function(res) {\n          return res;\n        };\n      var onerror =\n        action.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // create formdata object\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) {\n        formData.append(name, JSON.stringify(metadata));\n      }\n\n      // Turn into an array of objects so no matter what the input, we can handle it the same way\n      (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(\n        function(item) {\n          formData.append(\n            name,\n            item.file,\n            item.name === null\n              ? item.file.name\n              : '' + item.name + item.file.name\n          );\n        }\n      );\n\n      // send request object\n      var request = sendRequest(ondata(formData), apiUrl + action.url, action);\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  var createProcessorFunction = function createProcessorFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var name = arguments.length > 2 ? arguments[2] : undefined;\n    var options = arguments.length > 3 ? arguments[3] : undefined;\n\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function')\n      return function() {\n        for (\n          var _len = arguments.length, params = new Array(_len), _key = 0;\n          _key < _len;\n          _key++\n        ) {\n          params[_key] = arguments[_key];\n        }\n        return action.apply(void 0, [name].concat(params, [options]));\n      };\n\n    // no action supplied\n    if (!action || !isString(action.url)) return null;\n\n    // internal handler\n    return createFileProcessorFunction(apiUrl, action, name, options);\n  };\n\n  /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n  var createRevertFunction = function createRevertFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // is custom implementation\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied, return stub function, interface will work, but file won't be removed\n    if (!action || !isString(action.url)) {\n      return function(uniqueFileId, load) {\n        return load();\n      };\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal implementation\n    return function(uniqueFileId, load, error) {\n      var request = sendRequest(\n        uniqueFileId,\n        apiUrl + action.url,\n        action // contains method, headers and withCredentials properties\n      );\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n\n      return request;\n    };\n  };\n\n  var getRandomNumber = function getRandomNumber() {\n    var min =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var max =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return min + Math.random() * (max - min);\n  };\n\n  var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(\n    cb\n  ) {\n    var duration =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    var offset =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var tickMin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n    var tickMax =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n    var timeout = null;\n    var start = Date.now();\n\n    var tick = function tick() {\n      var runtime = Date.now() - start;\n      var delay = getRandomNumber(tickMin, tickMax);\n\n      if (runtime + delay > duration) {\n        delay = runtime + delay - duration;\n      }\n\n      var progress = runtime / duration;\n      if (progress >= 1) {\n        cb(1);\n        return;\n      }\n\n      cb(progress);\n\n      timeout = setTimeout(tick, delay);\n    };\n\n    tick();\n\n    return {\n      clear: function clear() {\n        clearTimeout(timeout);\n      }\n    };\n  };\n\n  var createFileProcessor = function createFileProcessor(processFn) {\n    var state = {\n      complete: false,\n      perceivedProgress: 0,\n      perceivedPerformanceUpdater: null,\n      progress: null,\n      timestamp: null,\n      perceivedDuration: 0,\n      duration: 0,\n      request: null,\n      response: null\n    };\n\n    var process = function process(file, metadata) {\n      var progressFn = function progressFn() {\n        // we've not yet started the real download, stop here\n        // the request might not go through, for instance, there might be some server trouble\n        // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n        if (state.duration === 0 || state.progress === null) {\n          return;\n        }\n\n        // as we're now processing, fire the progress event\n        api.fire('progress', api.getProgress());\n      };\n\n      var completeFn = function completeFn() {\n        state.complete = true;\n        api.fire('load-perceived', state.response.body);\n      };\n\n      // let's start processing\n      api.fire('start');\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // create perceived performance progress indicator\n      state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n        function(progress) {\n          state.perceivedProgress = progress;\n          state.perceivedDuration = Date.now() - state.timestamp;\n\n          progressFn();\n\n          // if fake progress is done, and a response has been received,\n          // and we've not yet called the complete method\n          if (\n            state.response &&\n            state.perceivedProgress === 1 &&\n            !state.complete\n          ) {\n            // we done!\n            completeFn();\n          }\n        },\n        // random delay as in a list of files you start noticing\n        // files uploading at the exact same speed\n        getRandomNumber(750, 1500)\n      );\n\n      // remember request so we can abort it later\n      state.request = processFn(\n        // the file to process\n        file,\n\n        // the metadata to send along\n        metadata,\n\n        // callbacks (load, error, progress, abort, transfer)\n        // load expects the body to be a server id if\n        // you want to make use of revert\n        function(response) {\n          // we put the response in state so we can access\n          // it outside of this method\n          state.response = isObject(response)\n            ? response\n            : {\n                type: 'load',\n                code: 200,\n                body: '' + response,\n                headers: {}\n              };\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // force progress to 1 as we're now done\n          state.progress = 1;\n\n          // actual load is done let's share results\n          api.fire('load', state.response.body);\n\n          // we are really done\n          // if perceived progress is 1 ( wait for perceived progress to complete )\n          // or if server does not support progress ( null )\n          if (state.perceivedProgress === 1) {\n            completeFn();\n          }\n        },\n\n        // error is expected to be an object with type, code, body\n        function(error) {\n          // cancel updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // update others about this error\n          api.fire(\n            'error',\n            isObject(error)\n              ? error\n              : {\n                  type: 'error',\n                  code: 0,\n                  body: '' + error\n                }\n          );\n        },\n\n        // actual processing progress\n        function(computable, current, total) {\n          // update actual duration\n          state.duration = Date.now() - state.timestamp;\n\n          // update actual progress\n          state.progress = computable ? current / total : null;\n\n          progressFn();\n        },\n\n        // abort does not expect a value\n        function() {\n          // stop updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // fire the abort event so we can switch visuals\n          api.fire('abort', state.response ? state.response.body : null);\n        },\n\n        // register the id for this transfer\n        function(transferId) {\n          api.fire('transfer', transferId);\n        }\n      );\n    };\n\n    var abort = function abort() {\n      // no request running, can't abort\n      if (!state.request) return;\n\n      // stop updater\n      state.perceivedPerformanceUpdater.clear();\n\n      // abort actual request\n      state.request.abort();\n\n      // if has response object, we've completed the request\n      state.complete = true;\n    };\n\n    var reset = function reset() {\n      abort();\n      state.complete = false;\n      state.perceivedProgress = 0;\n      state.progress = 0;\n      state.timestamp = null;\n      state.perceivedDuration = 0;\n      state.duration = 0;\n      state.request = null;\n      state.response = null;\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress\n        ? Math.min(state.progress, state.perceivedProgress)\n        : null;\n    };\n    var getDuration = function getDuration() {\n      return Math.min(state.duration, state.perceivedDuration);\n    };\n\n    var api = Object.assign({}, on(), {\n      process: process, // start processing file\n      abort: abort, // abort active process request\n      getProgress: getProgress,\n      getDuration: getDuration,\n      reset: reset\n    });\n\n    return api;\n  };\n\n  var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n    return name.substr(0, name.lastIndexOf('.')) || name;\n  };\n\n  var createFileStub = function createFileStub(source) {\n    var data = [source.name, source.size, source.type];\n\n    // is blob or base64, then we need to set the name\n    if (source instanceof Blob || isBase64DataURI(source)) {\n      data[0] = source.name || getDateString();\n    } else if (isBase64DataURI(source)) {\n      // if is base64 data uri we need to determine the average size and type\n      data[1] = source.length;\n      data[2] = getMimeTypeFromBase64DataURI(source);\n    } else if (isString(source)) {\n      // url\n      data[0] = getFilenameFromURL(source);\n      data[1] = 0;\n      data[2] = 'application/octet-stream';\n    }\n\n    return {\n      name: data[0],\n      size: data[1],\n      type: data[2]\n    };\n  };\n\n  var isFile = function isFile(value) {\n    return !!(value instanceof File || (value instanceof Blob && value.name));\n  };\n\n  var deepCloneObject = function deepCloneObject(src) {\n    if (!isObject(src)) return src;\n    var target = isArray(src) ? [] : {};\n    for (var key in src) {\n      if (!src.hasOwnProperty(key)) continue;\n      var v = src[key];\n      target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n    }\n    return target;\n  };\n\n  var createItem = function createItem() {\n    var origin =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var serverFileReference =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var file =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    // unique id for this item, is used to identify the item across views\n    var id = getUniqueId();\n\n    /**\n     * Internal item state\n     */\n    var state = {\n      // is archived\n      archived: false,\n\n      // if is frozen, no longer fires events\n      frozen: false,\n\n      // removed from view\n      released: false,\n\n      // original source\n      source: null,\n\n      // file model reference\n      file: file,\n\n      // id of file on server\n      serverFileReference: serverFileReference,\n\n      // id of file transfer on server\n      transferId: null,\n\n      // is aborted\n      processingAborted: false,\n\n      // current item status\n      status: serverFileReference\n        ? ItemStatus.PROCESSING_COMPLETE\n        : ItemStatus.INIT,\n\n      // active processes\n      activeLoader: null,\n      activeProcessor: null\n    };\n\n    // callback used when abort processing is called to link back to the resolve method\n    var abortProcessingRequestComplete = null;\n\n    /**\n     * Externally added item metadata\n     */\n    var metadata = {};\n\n    // item data\n    var setStatus = function setStatus(status) {\n      return (state.status = status);\n    };\n\n    // fire event unless the item has been archived\n    var fire = function fire(event) {\n      if (state.released || state.frozen) return;\n      for (\n        var _len = arguments.length,\n          params = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        params[_key - 1] = arguments[_key];\n      }\n      api.fire.apply(api, [event].concat(params));\n    };\n\n    // file data\n    var getFileExtension = function getFileExtension() {\n      return getExtensionFromFilename(state.file.name);\n    };\n    var getFileType = function getFileType() {\n      return state.file.type;\n    };\n    var getFileSize = function getFileSize() {\n      return state.file.size;\n    };\n    var getFile = function getFile() {\n      return state.file;\n    };\n\n    //\n    // logic to load a file\n    //\n    var load = function load(source, loader, onload) {\n      // remember the original item source\n      state.source = source;\n\n      // file stub is already there\n      if (state.file) {\n        fire('load-skip');\n        return;\n      }\n\n      // set a stub file object while loading the actual data\n      state.file = createFileStub(source);\n\n      // starts loading\n      loader.on('init', function() {\n        fire('load-init');\n      });\n\n      // we'eve received a size indication, let's update the stub\n      loader.on('meta', function(meta) {\n        // set size of file stub\n        state.file.size = meta.size;\n\n        // set name of file stub\n        state.file.filename = meta.filename;\n\n        // if has received source, we done\n        if (meta.source) {\n          origin = FileOrigin.LIMBO;\n          state.serverFileReference = meta.source;\n          state.status = ItemStatus.PROCESSING_COMPLETE;\n        }\n\n        // size has been updated\n        fire('load-meta');\n      });\n\n      // the file is now loading we need to update the progress indicators\n      loader.on('progress', function(progress) {\n        setStatus(ItemStatus.LOADING);\n\n        fire('load-progress', progress);\n      });\n\n      // an error was thrown while loading the file, we need to switch to error state\n      loader.on('error', function(error) {\n        setStatus(ItemStatus.LOAD_ERROR);\n\n        fire('load-request-error', error);\n      });\n\n      // user or another process aborted the file load (cannot retry)\n      loader.on('abort', function() {\n        setStatus(ItemStatus.INIT);\n        fire('load-abort');\n      });\n\n      // done loading\n      loader.on('load', function(file) {\n        // as we've now loaded the file the loader is no longer required\n        state.activeLoader = null;\n\n        // called when file has loaded succesfully\n        var success = function success(result) {\n          // set (possibly) transformed file\n          state.file = isFile(result) ? result : state.file;\n\n          // file received\n          if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n            setStatus(ItemStatus.PROCESSING_COMPLETE);\n          } else {\n            setStatus(ItemStatus.IDLE);\n          }\n\n          fire('load');\n        };\n\n        var error = function error(result) {\n          // set original file\n          state.file = file;\n          fire('load-meta');\n\n          setStatus(ItemStatus.LOAD_ERROR);\n          fire('load-file-error', result);\n        };\n\n        // if we already have a server file reference, we don't need to call the onload method\n        if (state.serverFileReference) {\n          success(file);\n          return;\n        }\n\n        // no server id, let's give this file the full treatment\n        onload(file, success, error);\n      });\n\n      // set loader source data\n      loader.setSource(source);\n\n      // set as active loader\n      state.activeLoader = loader;\n\n      // load the source data\n      loader.load();\n    };\n\n    var retryLoad = function retryLoad() {\n      if (!state.activeLoader) {\n        return;\n      }\n      state.activeLoader.load();\n    };\n\n    var abortLoad = function abortLoad() {\n      if (state.activeLoader) {\n        state.activeLoader.abort();\n        return;\n      }\n      setStatus(ItemStatus.INIT);\n      fire('load-abort');\n    };\n\n    //\n    // logic to process a file\n    //\n    var process = function process(processor, onprocess) {\n      // processing was aborted\n      if (state.processingAborted) {\n        state.processingAborted = false;\n        return;\n      }\n\n      // now processing\n      setStatus(ItemStatus.PROCESSING);\n\n      // reset abort callback\n      abortProcessingRequestComplete = null;\n\n      // if no file loaded we'll wait for the load event\n      if (!(state.file instanceof Blob)) {\n        api.on('load', function() {\n          process(processor, onprocess);\n        });\n        return;\n      }\n\n      // setup processor\n      processor.on('load', function(serverFileReference) {\n        // need this id to be able to revert the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n      });\n\n      // register transfer id\n      processor.on('transfer', function(transferId) {\n        // need this id to be able to revert the upload\n        state.transferId = transferId;\n      });\n\n      processor.on('load-perceived', function(serverFileReference) {\n        // no longer required\n        state.activeProcessor = null;\n\n        // need this id to be able to rever the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.PROCESSING_COMPLETE);\n        fire('process-complete', serverFileReference);\n      });\n\n      processor.on('start', function() {\n        fire('process-start');\n      });\n\n      processor.on('error', function(error) {\n        state.activeProcessor = null;\n        setStatus(ItemStatus.PROCESSING_ERROR);\n        fire('process-error', error);\n      });\n\n      processor.on('abort', function(serverFileReference) {\n        state.activeProcessor = null;\n\n        // if file was uploaded but processing was cancelled during perceived processor time store file reference\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.IDLE);\n        fire('process-abort');\n\n        // has timeout so doesn't interfere with remove action\n        if (abortProcessingRequestComplete) {\n          abortProcessingRequestComplete();\n        }\n      });\n\n      processor.on('progress', function(progress) {\n        fire('process-progress', progress);\n      });\n\n      // when successfully transformed\n      var success = function success(file) {\n        // if was archived in the mean time, don't process\n        if (state.archived) return;\n\n        // process file!\n        processor.process(file, Object.assign({}, metadata));\n      };\n\n      // something went wrong during transform phase\n      var error = console.error;\n\n      // start processing the file\n      onprocess(state.file, success, error);\n\n      // set as active processor\n      state.activeProcessor = processor;\n    };\n\n    var requestProcessing = function requestProcessing() {\n      state.processingAborted = false;\n      setStatus(ItemStatus.PROCESSING_QUEUED);\n    };\n\n    var abortProcessing = function abortProcessing() {\n      return new Promise(function(resolve) {\n        if (!state.activeProcessor) {\n          state.processingAborted = true;\n\n          setStatus(ItemStatus.IDLE);\n          fire('process-abort');\n\n          resolve();\n          return;\n        }\n\n        abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n          resolve();\n        };\n\n        state.activeProcessor.abort();\n      });\n    };\n\n    //\n    // logic to revert a processed file\n    //\n    var revert = function revert(revertFileUpload, forceRevert) {\n      return new Promise(function(resolve, reject) {\n        // cannot revert without a server id for this process\n        if (state.serverFileReference === null) {\n          resolve();\n          return;\n        }\n\n        // revert the upload (fire and forget)\n        revertFileUpload(\n          state.serverFileReference,\n          function() {\n            // reset file server id as now it's no available on the server\n            state.serverFileReference = null;\n            resolve();\n          },\n          function(error) {\n            // don't set error state when reverting is optional, it will always resolve\n            if (!forceRevert) {\n              resolve();\n              return;\n            }\n\n            // oh no errors\n            setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n            fire('process-revert-error');\n            reject(error);\n          }\n        );\n\n        // fire event\n        setStatus(ItemStatus.IDLE);\n        fire('process-revert');\n      });\n    };\n\n    // exposed methods\n    var _setMetadata = function setMetadata(key, value, silent) {\n      var keys = key.split('.');\n      var root = keys[0];\n      var last = keys.pop();\n      var data = metadata;\n      keys.forEach(function(key) {\n        return (data = data[key]);\n      });\n\n      // compare old value against new value, if they're the same, we're not updating\n      if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n      // update value\n      data[last] = value;\n\n      // don't fire update\n      if (silent) return;\n\n      // fire update\n      fire('metadata-update', {\n        key: root,\n        value: metadata[root]\n      });\n    };\n\n    var getMetadata = function getMetadata(key) {\n      return deepCloneObject(key ? metadata[key] : metadata);\n    };\n\n    var api = Object.assign(\n      {\n        id: {\n          get: function get() {\n            return id;\n          }\n        },\n        origin: {\n          get: function get() {\n            return origin;\n          }\n        },\n        serverId: {\n          get: function get() {\n            return state.serverFileReference;\n          }\n        },\n        transferId: {\n          get: function get() {\n            return state.transferId;\n          }\n        },\n        status: {\n          get: function get() {\n            return state.status;\n          }\n        },\n        filename: {\n          get: function get() {\n            return state.file.name;\n          }\n        },\n        filenameWithoutExtension: {\n          get: function get() {\n            return getFilenameWithoutExtension(state.file.name);\n          }\n        },\n        fileExtension: { get: getFileExtension },\n        fileType: { get: getFileType },\n        fileSize: { get: getFileSize },\n        file: { get: getFile },\n\n        source: {\n          get: function get() {\n            return state.source;\n          }\n        },\n\n        getMetadata: getMetadata,\n        setMetadata: function setMetadata(key, value, silent) {\n          if (isObject(key)) {\n            var data = key;\n            Object.keys(data).forEach(function(key) {\n              _setMetadata(key, data[key], value);\n            });\n            return key;\n          }\n          _setMetadata(key, value, silent);\n          return value;\n        },\n\n        extend: function extend(name, handler) {\n          return (itemAPI[name] = handler);\n        },\n\n        abortLoad: abortLoad,\n        retryLoad: retryLoad,\n        requestProcessing: requestProcessing,\n        abortProcessing: abortProcessing,\n\n        load: load,\n        process: process,\n        revert: revert\n      },\n\n      on(),\n      {\n        freeze: function freeze() {\n          return (state.frozen = true);\n        },\n\n        release: function release() {\n          return (state.released = true);\n        },\n        released: {\n          get: function get() {\n            return state.released;\n          }\n        },\n\n        archive: function archive() {\n          return (state.archived = true);\n        },\n        archived: {\n          get: function get() {\n            return state.archived;\n          }\n        }\n      }\n    );\n\n    // create it here instead of returning it instantly so we can extend it later\n    var itemAPI = createObject(api);\n\n    return itemAPI;\n  };\n\n  var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return 0;\n    }\n\n    // invalid queries\n    if (!isString(query)) {\n      return -1;\n    }\n\n    // return item by id (or -1 if not found)\n    return items.findIndex(function(item) {\n      return item.id === query;\n    });\n  };\n\n  var getItemById = function getItemById(items, itemId) {\n    var index = getItemIndexByQuery(items, itemId);\n    if (index < 0) {\n      return;\n    }\n    return items[index] || null;\n  };\n\n  var fetchLocal = function fetchLocal(\n    url,\n    load,\n    error,\n    progress,\n    abort,\n    headers\n  ) {\n    var request = sendRequest(null, url, {\n      method: 'GET',\n      responseType: 'blob'\n    });\n\n    request.onload = function(xhr) {\n      // get headers\n      var headers = xhr.getAllResponseHeaders();\n\n      // get filename\n      var filename =\n        getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n      // create response\n      load(\n        createResponse(\n          'load',\n          xhr.status,\n          getFileFromBlob(xhr.response, filename),\n          headers\n        )\n      );\n    };\n\n    request.onerror = function(xhr) {\n      error(\n        createResponse(\n          'error',\n          xhr.status,\n          xhr.statusText,\n          xhr.getAllResponseHeaders()\n        )\n      );\n    };\n\n    request.onheaders = function(xhr) {\n      headers(\n        createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders())\n      );\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n  };\n\n  var getDomainFromURL = function getDomainFromURL(url) {\n    if (url.indexOf('//') === 0) {\n      url = location.protocol + url;\n    }\n    return url\n      .toLowerCase()\n      .replace('blob:', '')\n      .replace(/([a-z])?:\\/\\//, '$1')\n      .split('/')[0];\n  };\n\n  var isExternalURL = function isExternalURL(url) {\n    return (\n      (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n      getDomainFromURL(location.href) !== getDomainFromURL(url)\n    );\n  };\n\n  var dynamicLabel = function dynamicLabel(label) {\n    return function() {\n      return isFunction(label) ? label.apply(void 0, arguments) : label;\n    };\n  };\n\n  var isMockItem = function isMockItem(item) {\n    return !isFile(item.file);\n  };\n\n  var listUpdated = function listUpdated(dispatch, state) {\n    clearTimeout(state.listUpdateTimeout);\n    state.listUpdateTimeout = setTimeout(function() {\n      dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n    }, 0);\n  };\n\n  var optionalPromise = function optionalPromise(fn) {\n    for (\n      var _len = arguments.length,\n        params = new Array(_len > 1 ? _len - 1 : 0),\n        _key = 1;\n      _key < _len;\n      _key++\n    ) {\n      params[_key - 1] = arguments[_key];\n    }\n    return new Promise(function(resolve) {\n      if (!fn) {\n        return resolve(true);\n      }\n\n      var result = fn.apply(void 0, params);\n\n      if (result == null) {\n        return resolve(true);\n      }\n\n      if (typeof result === 'boolean') {\n        return resolve(result);\n      }\n\n      if (typeof result.then === 'function') {\n        result.then(resolve);\n      }\n    });\n  };\n\n  var sortItems = function sortItems(state, compare) {\n    state.items.sort(function(a, b) {\n      return compare(createItemAPI(a), createItemAPI(b));\n    });\n  };\n\n  // returns item based on state\n  var getItemByQueryFromState = function getItemByQueryFromState(\n    state,\n    itemHandler\n  ) {\n    return function() {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        query = _ref.query,\n        _ref$success = _ref.success,\n        success = _ref$success === void 0 ? function() {} : _ref$success,\n        _ref$failure = _ref.failure,\n        failure = _ref$failure === void 0 ? function() {} : _ref$failure;\n      var item = getItemByQuery(state.items, query);\n      if (!item) {\n        failure({\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        });\n\n        return;\n      }\n      itemHandler(item, success, failure);\n    };\n  };\n\n  var actions = function actions(dispatch, query, state) {\n    return {\n      /**\n       * Aborts all ongoing processes\n       */\n      ABORT_ALL: function ABORT_ALL() {\n        getActiveItems(state.items).forEach(function(item) {\n          item.freeze();\n          item.abortLoad();\n          item.abortProcessing();\n        });\n      },\n\n      /**\n       * Sets initial files\n       */\n      DID_SET_FILES: function DID_SET_FILES(_ref2) {\n        var _ref2$value = _ref2.value,\n          value = _ref2$value === void 0 ? [] : _ref2$value;\n\n        // map values to file objects\n        var files = value.map(function(file) {\n          return {\n            source: file.source ? file.source : file,\n            options: file.options\n          };\n        });\n\n        // loop over files, if file is in list, leave it be, if not, remove\n        // test if items should be moved\n        var activeItems = getActiveItems(state.items);\n\n        activeItems.forEach(function(item) {\n          // if item not is in new value, remove\n          if (\n            !files.find(function(file) {\n              return file.source === item.source || file.source === item.file;\n            })\n          ) {\n            dispatch('REMOVE_ITEM', { query: item });\n          }\n        });\n\n        // add new files\n        activeItems = getActiveItems(state.items);\n        files.forEach(function(file, index) {\n          // if file is already in list\n          if (\n            activeItems.find(function(item) {\n              return item.source === file.source || item.file === file.source;\n            })\n          )\n            return;\n\n          // not in list, add\n          dispatch(\n            'ADD_ITEM',\n            Object.assign({}, file, {\n              interactionMethod: InteractionMethod.NONE,\n              index: index\n            })\n          );\n        });\n      },\n\n      DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n        var id = _ref3.id;\n\n        // if is called multiple times in close succession we combined all calls together to save resources\n        clearTimeout(state.itemUpdateTimeout);\n        state.itemUpdateTimeout = setTimeout(function() {\n          var item = getItemById(state.items, id);\n\n          // only revert and attempt to upload when we're uploading to a server\n          if (!query('IS_ASYNC')) {\n            // should we update the output data\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              if (!shouldPrepareOutput) {\n                return;\n              }\n              dispatch(\n                'REQUEST_PREPARE_OUTPUT',\n                {\n                  query: id,\n                  item: item,\n                  success: function success(file) {\n                    dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                  }\n                },\n                true\n              );\n            });\n\n            return;\n          }\n\n          // for async scenarios\n          var upload = function upload() {\n            // we push this forward a bit so the interface is updated correctly\n            setTimeout(function() {\n              dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n            }, 32);\n          };\n\n          var revert = function revert(doUpload) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(doUpload ? upload : function() {})\n              .catch(function() {});\n          };\n\n          var abort = function abort(doUpload) {\n            item.abortProcessing().then(doUpload ? upload : function() {});\n          };\n\n          // if we should re-upload the file immidiately\n          if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n            return revert(state.options.instantUpload);\n          }\n\n          // if currently uploading, cancel upload\n          if (item.status === ItemStatus.PROCESSING) {\n            return abort(state.options.instantUpload);\n          }\n\n          if (state.options.instantUpload) {\n            upload();\n          }\n        }, 0);\n      },\n\n      MOVE_ITEM: function MOVE_ITEM(_ref4) {\n        var query = _ref4.query,\n          index = _ref4.index;\n        var item = getItemByQuery(state.items, query);\n        if (!item) return;\n        var currentIndex = state.items.indexOf(item);\n        index = limit(index, 0, state.items.length - 1);\n        if (currentIndex === index) return;\n        state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n      },\n\n      SORT: function SORT(_ref5) {\n        var compare = _ref5.compare;\n        sortItems(state, compare);\n      },\n\n      ADD_ITEMS: function ADD_ITEMS(_ref6) {\n        var items = _ref6.items,\n          index = _ref6.index,\n          interactionMethod = _ref6.interactionMethod,\n          _ref6$success = _ref6.success,\n          success = _ref6$success === void 0 ? function() {} : _ref6$success,\n          _ref6$failure = _ref6.failure,\n          failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n\n        var currentIndex = index;\n\n        if (index === -1 || typeof index === 'undefined') {\n          var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n          var totalItems = query('GET_TOTAL_ITEMS');\n          currentIndex = insertLocation === 'before' ? 0 : totalItems;\n        }\n\n        var ignoredFiles = query('GET_IGNORED_FILES');\n        var isValidFile = function isValidFile(source) {\n          return isFile(source)\n            ? !ignoredFiles.includes(source.name.toLowerCase())\n            : !isEmpty(source);\n        };\n        var validItems = items.filter(isValidFile);\n\n        var promises = validItems.map(function(source) {\n          return new Promise(function(resolve, reject) {\n            dispatch('ADD_ITEM', {\n              interactionMethod: interactionMethod,\n              source: source.source || source,\n              success: resolve,\n              failure: reject,\n              index: currentIndex++,\n              options: source.options || {}\n            });\n          });\n        });\n\n        Promise.all(promises)\n          .then(success)\n          .catch(failure);\n      },\n\n      /**\n       * @param source\n       * @param index\n       * @param interactionMethod\n       */\n      ADD_ITEM: function ADD_ITEM(_ref7) {\n        var source = _ref7.source,\n          _ref7$index = _ref7.index,\n          index = _ref7$index === void 0 ? -1 : _ref7$index,\n          interactionMethod = _ref7.interactionMethod,\n          _ref7$success = _ref7.success,\n          success = _ref7$success === void 0 ? function() {} : _ref7$success,\n          _ref7$failure = _ref7.failure,\n          failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n          _ref7$options = _ref7.options,\n          options = _ref7$options === void 0 ? {} : _ref7$options;\n\n        // if no source supplied\n        if (isEmpty(source)) {\n          failure({\n            error: createResponse('error', 0, 'No source'),\n\n            file: null\n          });\n\n          return;\n        }\n\n        // filter out invalid file items, used to filter dropped directory contents\n        if (\n          isFile(source) &&\n          state.options.ignoredFiles.includes(source.name.toLowerCase())\n        ) {\n          // fail silently\n          return;\n        }\n\n        // test if there's still room in the list of files\n        if (!hasRoomForItem(state)) {\n          // if multiple allowed, we can't replace\n          // or if only a single item is allowed but we're not allowed to replace it we exit\n          if (\n            state.options.allowMultiple ||\n            (!state.options.allowMultiple && !state.options.allowReplace)\n          ) {\n            var error = createResponse('warning', 0, 'Max files');\n\n            dispatch('DID_THROW_MAX_FILES', {\n              source: source,\n              error: error\n            });\n\n            failure({ error: error, file: null });\n\n            return;\n          }\n\n          // let's replace the item\n          // id of first item we're about to remove\n          var _item = getActiveItems(state.items)[0];\n\n          // if has been processed remove it from the server as well\n          if (\n            _item.status === ItemStatus.PROCESSING_COMPLETE ||\n            _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            var forceRevert = query('GET_FORCE_REVERT');\n            _item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                forceRevert\n              )\n              .then(function() {\n                if (!forceRevert) return;\n\n                // try to add now\n                dispatch('ADD_ITEM', {\n                  source: source,\n                  index: index,\n                  interactionMethod: interactionMethod,\n                  success: success,\n                  failure: failure,\n                  options: options\n                });\n              })\n              .catch(function() {}); // no need to handle this catch state for now\n\n            if (forceRevert) return;\n          }\n\n          // remove first item as it will be replaced by this item\n          dispatch('REMOVE_ITEM', { query: _item.id });\n        }\n\n        // where did the file originate\n        var origin =\n          options.type === 'local'\n            ? FileOrigin.LOCAL\n            : options.type === 'limbo'\n            ? FileOrigin.LIMBO\n            : FileOrigin.INPUT;\n\n        // create a new blank item\n        var item = createItem(\n          // where did this file come from\n          origin,\n\n          // an input file never has a server file reference\n          origin === FileOrigin.INPUT ? null : source,\n\n          // file mock data, if defined\n          options.file\n        );\n\n        // set initial meta data\n        Object.keys(options.metadata || {}).forEach(function(key) {\n          item.setMetadata(key, options.metadata[key]);\n        });\n\n        // created the item, let plugins add methods\n        applyFilters('DID_CREATE_ITEM', item, {\n          query: query,\n          dispatch: dispatch\n        });\n\n        // where to insert new items\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n        // adjust index if is not allowed to pick location\n        if (!state.options.itemInsertLocationFreedom) {\n          index = itemInsertLocation === 'before' ? -1 : state.items.length;\n        }\n\n        // add item to list\n        insertItem(state.items, item, index);\n\n        // sort items in list\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // get a quick reference to the item id\n        var id = item.id;\n\n        // observe item events\n        item.on('load-init', function() {\n          dispatch('DID_START_ITEM_LOAD', { id: id });\n        });\n\n        item.on('load-meta', function() {\n          dispatch('DID_UPDATE_ITEM_META', { id: id });\n        });\n\n        item.on('load-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('load-request-error', function(error) {\n          var mainStatus = dynamicLabel(state.options.labelFileLoadError)(\n            error\n          );\n\n          // is client error, no way to recover\n          if (error.code >= 400 && error.code < 500) {\n            dispatch('DID_THROW_ITEM_INVALID', {\n              id: id,\n              error: error,\n              status: {\n                main: mainStatus,\n                sub: error.code + ' (' + error.body + ')'\n              }\n            });\n\n            // reject the file so can be dealt with through API\n            failure({ error: error, file: createItemAPI(item) });\n            return;\n          }\n\n          // is possible server error, so might be possible to retry\n          dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: mainStatus,\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('load-file-error', function(error) {\n          dispatch('DID_THROW_ITEM_INVALID', {\n            id: id,\n            error: error.status,\n            status: error.status\n          });\n\n          failure({ error: error.status, file: createItemAPI(item) });\n        });\n\n        item.on('load-abort', function() {\n          dispatch('REMOVE_ITEM', { query: id });\n        });\n\n        item.on('load-skip', function() {\n          dispatch('COMPLETE_LOAD_ITEM', {\n            query: id,\n            item: item,\n            data: {\n              source: source,\n              success: success\n            }\n          });\n        });\n\n        item.on('load', function() {\n          var handleAdd = function handleAdd(shouldAdd) {\n            // no should not add this file\n            if (!shouldAdd) {\n              dispatch('REMOVE_ITEM', {\n                query: id\n              });\n\n              return;\n            }\n\n            // now interested in metadata updates\n            item.on('metadata-update', function(change) {\n              dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n            });\n\n            // let plugins decide if the output data should be prepared at this point\n            // means we'll do this and wait for idle state\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              var loadComplete = function loadComplete() {\n                dispatch('COMPLETE_LOAD_ITEM', {\n                  query: id,\n                  item: item,\n                  data: {\n                    source: source,\n                    success: success\n                  }\n                });\n\n                listUpdated(dispatch, state);\n              };\n\n              // exit\n              if (shouldPrepareOutput) {\n                // wait for idle state and then run PREPARE_OUTPUT\n                dispatch(\n                  'REQUEST_PREPARE_OUTPUT',\n                  {\n                    query: id,\n                    item: item,\n                    success: function success(file) {\n                      dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                      loadComplete();\n                    }\n                  },\n                  true\n                );\n\n                return;\n              }\n\n              loadComplete();\n            });\n          };\n\n          // item loaded, allow plugins to\n          // - read data (quickly)\n          // - add metadata\n          applyFilterChain('DID_LOAD_ITEM', item, {\n            query: query,\n            dispatch: dispatch\n          })\n            .then(function() {\n              optionalPromise(\n                query('GET_BEFORE_ADD_FILE'),\n                createItemAPI(item)\n              ).then(handleAdd);\n            })\n            .catch(function() {\n              handleAdd(false);\n            });\n        });\n\n        item.on('process-start', function() {\n          dispatch('DID_START_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('process-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingError)(error),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-revert-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingRevertError)(\n                error\n              ),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-complete', function(serverFileReference) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: id,\n            error: null,\n            serverFileReference: serverFileReference\n          });\n        });\n\n        item.on('process-abort', function() {\n          dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-revert', function() {\n          dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n        });\n\n        // let view know the item has been inserted\n        dispatch('DID_ADD_ITEM', {\n          id: id,\n          index: index,\n          interactionMethod: interactionMethod\n        });\n\n        listUpdated(dispatch, state);\n\n        // start loading the source\n        var _ref8 = state.options.server || {},\n          url = _ref8.url,\n          load = _ref8.load,\n          restore = _ref8.restore,\n          fetch = _ref8.fetch;\n\n        item.load(\n          source,\n\n          // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n          createFileLoader(\n            origin === FileOrigin.INPUT\n              ? // input\n                isString(source) && isExternalURL(source)\n                ? createFetchFunction(url, fetch) // remote url\n                : fetchLocal // local url\n              : // limbo or local\n              origin === FileOrigin.LIMBO\n              ? createFetchFunction(url, restore) // limbo\n              : createFetchFunction(url, load) // local\n          ),\n\n          // called when the file is loaded so it can be piped through the filters\n          function(file, success, error) {\n            // let's process the file\n            applyFilterChain('LOAD_FILE', file, { query: query })\n              .then(success)\n              .catch(error);\n          }\n        );\n      },\n\n      REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n        var item = _ref9.item,\n          success = _ref9.success,\n          _ref9$failure = _ref9.failure,\n          failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n\n        // error response if item archived\n        var err = {\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        };\n\n        // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n        if (item.archived) return failure(err);\n\n        // allow plugins to alter the file data\n        applyFilterChain('PREPARE_OUTPUT', item.file, {\n          query: query,\n          item: item\n        }).then(function(result) {\n          applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n            query: query,\n            item: item\n          }).then(function(result) {\n            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n            if (item.archived) return failure(err);\n\n            // we done!\n            success(result);\n          });\n        });\n      },\n\n      COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n        var item = _ref10.item,\n          data = _ref10.data;\n        var success = data.success,\n          source = data.source;\n\n        // sort items in list\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // let interface know the item has loaded\n        dispatch('DID_LOAD_ITEM', {\n          id: item.id,\n          error: null,\n          serverFileReference: item.origin === FileOrigin.INPUT ? null : source\n        });\n\n        // item has been successfully loaded and added to the\n        // list of items so can now be safely returned for use\n        success(createItemAPI(item));\n\n        // if this is a local server file we need to show a different state\n        if (item.origin === FileOrigin.LOCAL) {\n          dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n          return;\n        }\n\n        // if is a temp server file we prevent async upload call here (as the file is already on the server)\n        if (item.origin === FileOrigin.LIMBO) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: item.id,\n            error: null,\n            serverFileReference: source\n          });\n\n          return;\n        }\n\n        // id we are allowed to upload the file immidiately, lets do it\n        if (query('IS_ASYNC') && state.options.instantUpload) {\n          dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n        }\n      },\n\n      RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        // try loading the source one more time\n        item.retryLoad();\n      }),\n\n      REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(\n        item,\n        _success,\n        failure\n      ) {\n        dispatch(\n          'REQUEST_PREPARE_OUTPUT',\n          {\n            query: item.id,\n            item: item,\n            success: function success(file) {\n              dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n              _success({\n                file: item,\n                output: file\n              });\n            },\n            failure: failure\n          },\n          true\n        );\n      }),\n\n      REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        // cannot be queued (or is already queued)\n        var itemCanBeQueuedForProcessing =\n          // waiting for something\n          item.status === ItemStatus.IDLE ||\n          // processing went wrong earlier\n          item.status === ItemStatus.PROCESSING_ERROR;\n\n        // not ready to be processed\n        if (!itemCanBeQueuedForProcessing) {\n          var process = function process() {\n            setTimeout(function() {\n              dispatch('REQUEST_ITEM_PROCESSING', {\n                query: item,\n                success: success,\n                failure: failure\n              });\n            }, 32);\n          };\n\n          // if already done processing or tried to revert but didn't work, try again\n          if (\n            item.status === ItemStatus.PROCESSING_COMPLETE ||\n            item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(process)\n              .catch(function() {}); // don't continue with processing if something went wrong\n          } else if (item.status === ItemStatus.PROCESSING) {\n            item.abortProcessing().then(process);\n          }\n\n          return;\n        }\n\n        // already queued for processing\n        if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n        item.requestProcessing();\n\n        dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n        dispatch(\n          'PROCESS_ITEM',\n          { query: item, success: success, failure: failure },\n          true\n        );\n      }),\n\n      PROCESS_ITEM: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n        var totalCurrentUploads = query(\n          'GET_ITEMS_BY_STATUS',\n          ItemStatus.PROCESSING\n        ).length;\n\n        // queue and wait till queue is freed up\n        if (totalCurrentUploads === maxParallelUploads) {\n          // queue for later processing\n          state.processingQueue.push({\n            id: item.id,\n            success: success,\n            failure: failure\n          });\n\n          // stop it!\n          return;\n        }\n\n        // if was not queued or is already processing exit here\n        if (item.status === ItemStatus.PROCESSING) return;\n\n        var processNext = function processNext() {\n          // process queueud items\n          var queueEntry = state.processingQueue.shift();\n\n          // no items left\n          if (!queueEntry) return;\n\n          // get item reference\n          var id = queueEntry.id,\n            success = queueEntry.success,\n            failure = queueEntry.failure;\n          var itemReference = getItemByQuery(state.items, id);\n\n          // if item was archived while in queue, jump to next\n          if (!itemReference || itemReference.archived) {\n            processNext();\n            return;\n          }\n\n          // process queued item\n          dispatch(\n            'PROCESS_ITEM',\n            { query: id, success: success, failure: failure },\n            true\n          );\n        };\n\n        // we done function\n        item.onOnce('process-complete', function() {\n          success(createItemAPI(item));\n          processNext();\n\n          // All items processed? No errors?\n          var allItemsProcessed =\n            query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE)\n              .length === state.items.length;\n          if (allItemsProcessed) {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n          }\n        });\n\n        // we error function\n        item.onOnce('process-error', function(error) {\n          failure({ error: error, file: createItemAPI(item) });\n          processNext();\n        });\n\n        // start file processing\n        var options = state.options;\n        item.process(\n          createFileProcessor(\n            createProcessorFunction(\n              options.server.url,\n              options.server.process,\n              options.name,\n              {\n                chunkTransferId: item.transferId,\n                chunkServer: options.server.patch,\n                chunkUploads: options.chunkUploads,\n                chunkForce: options.chunkForce,\n                chunkSize: options.chunkSize,\n                chunkRetryDelays: options.chunkRetryDelays\n              }\n            )\n          ),\n\n          // called when the file is about to be processed so it can be piped through the transform filters\n          function(file, success, error) {\n            // allow plugins to alter the file data\n            applyFilterChain('PREPARE_OUTPUT', file, {\n              query: query,\n              item: item\n            })\n              .then(function(file) {\n                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                success(file);\n              })\n              .catch(error);\n          }\n        );\n      }),\n\n      RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n      }),\n\n      REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n        optionalPromise(\n          query('GET_BEFORE_REMOVE_FILE'),\n          createItemAPI(item)\n        ).then(function(shouldRemove) {\n          if (!shouldRemove) {\n            return;\n          }\n          dispatch('REMOVE_ITEM', { query: item });\n        });\n      }),\n\n      RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n        item.release();\n      }),\n\n      REMOVE_ITEM: getItemByQueryFromState(state, function(item, success) {\n        var removeFromView = function removeFromView() {\n          // get id reference\n          var id = item.id;\n\n          // archive the item, this does not remove it from the list\n          getItemById(state.items, id).archive();\n\n          // tell the view the item has been removed\n          dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n          // now the list has been modified\n          listUpdated(dispatch, state);\n\n          // correctly removed\n          success(createItemAPI(item));\n        };\n\n        // if this is a local file and the server.remove function has been configured, send source there so dev can remove file from server\n        var server = state.options.server;\n        if (\n          item.origin === FileOrigin.LOCAL &&\n          server &&\n          isFunction(server.remove)\n        ) {\n          dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n          server.remove(\n            item.source,\n            function() {\n              return removeFromView();\n            },\n            function(status) {\n              dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                id: item.id,\n                error: createResponse('error', 0, status, null),\n                status: {\n                  main: dynamicLabel(state.options.labelFileRemoveError)(\n                    status\n                  ),\n                  sub: state.options.labelTapToRetry\n                }\n              });\n            }\n          );\n        } else {\n          removeFromView();\n        }\n      }),\n\n      ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        item.abortLoad();\n      }),\n\n      ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        // test if is already processed\n        if (item.serverId) {\n          dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n          return;\n        }\n\n        // abort\n        item.abortProcessing().then(function() {\n          var shouldRemove = state.options.instantUpload;\n          if (shouldRemove) {\n            dispatch('REMOVE_ITEM', { query: item.id });\n          }\n        });\n      }),\n\n      REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item\n      ) {\n        // not instant uploading, revert immidiately\n        if (!state.options.instantUpload) {\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n          return;\n        }\n\n        // if we're instant uploading the file will also be removed if we revert,\n        // so if a before remove file hook is defined we need to run it now\n        var handleRevert = function handleRevert(shouldRevert) {\n          if (!shouldRevert) return;\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n        };\n\n        var fn = query('GET_BEFORE_REMOVE_FILE');\n        if (!fn) {\n          return handleRevert(true);\n        }\n\n        var requestRemoveResult = fn(createItemAPI(item));\n        if (requestRemoveResult == null) {\n          // undefined or null\n          return handleRevert(true);\n        }\n\n        if (typeof requestRemoveResult === 'boolean') {\n          return handleRevert(requestRemoveResult);\n        }\n\n        if (typeof requestRemoveResult.then === 'function') {\n          requestRemoveResult.then(handleRevert);\n        }\n      }),\n\n      REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        item\n          .revert(\n            createRevertFunction(\n              state.options.server.url,\n              state.options.server.revert\n            ),\n            query('GET_FORCE_REVERT')\n          )\n          .then(function() {\n            var shouldRemove = state.options.instantUpload || isMockItem(item);\n            if (shouldRemove) {\n              dispatch('REMOVE_ITEM', { query: item.id });\n            }\n          })\n          .catch(function() {});\n      }),\n\n      SET_OPTIONS: function SET_OPTIONS(_ref11) {\n        var options = _ref11.options;\n        forin(options, function(key, value) {\n          dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        });\n      }\n    };\n  };\n\n  var formatFilename = function formatFilename(name) {\n    return name;\n  };\n\n  var createElement$1 = function createElement(tagName) {\n    return document.createElement(tagName);\n  };\n\n  var text = function text(node, value) {\n    var textNode = node.childNodes[0];\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else if (value !== textNode.nodeValue) {\n      textNode.nodeValue = value;\n    }\n  };\n\n  var polarToCartesian = function polarToCartesian(\n    centerX,\n    centerY,\n    radius,\n    angleInDegrees\n  ) {\n    var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n    return {\n      x: centerX + radius * Math.cos(angleInRadians),\n      y: centerY + radius * Math.sin(angleInRadians)\n    };\n  };\n\n  var describeArc = function describeArc(\n    x,\n    y,\n    radius,\n    startAngle,\n    endAngle,\n    arcSweep\n  ) {\n    var start = polarToCartesian(x, y, radius, endAngle);\n    var end = polarToCartesian(x, y, radius, startAngle);\n    return [\n      'M',\n      start.x,\n      start.y,\n      'A',\n      radius,\n      radius,\n      0,\n      arcSweep,\n      0,\n      end.x,\n      end.y\n    ].join(' ');\n  };\n\n  var percentageArc = function percentageArc(x, y, radius, from, to) {\n    var arcSweep = 1;\n    if (to > from && to - from <= 0.5) {\n      arcSweep = 0;\n    }\n    if (from > to && from - to >= 0.5) {\n      arcSweep = 0;\n    }\n    return describeArc(\n      x,\n      y,\n      radius,\n      Math.min(0.9999, from) * 360,\n      Math.min(0.9999, to) * 360,\n      arcSweep\n    );\n  };\n\n  var create = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // start at 0\n    props.spin = false;\n    props.progress = 0;\n    props.opacity = 0;\n\n    // svg\n    var svg = createElement('svg');\n    root.ref.path = createElement('path', {\n      'stroke-width': 2,\n      'stroke-linecap': 'round'\n    });\n\n    svg.appendChild(root.ref.path);\n\n    root.ref.svg = svg;\n\n    root.appendChild(svg);\n  };\n\n  var write = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    if (props.opacity === 0) {\n      return;\n    }\n\n    if (props.align) {\n      root.element.dataset.align = props.align;\n    }\n\n    // get width of stroke\n    var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n    // calculate size of ring\n    var size = root.rect.element.width * 0.5;\n\n    // ring state\n    var ringFrom = 0;\n    var ringTo = 0;\n\n    // now in busy mode\n    if (props.spin) {\n      ringFrom = 0;\n      ringTo = 0.5;\n    } else {\n      ringFrom = 0;\n      ringTo = props.progress;\n    }\n\n    // get arc path\n    var coordinates = percentageArc(\n      size,\n      size,\n      size - ringStrokeWidth,\n      ringFrom,\n      ringTo\n    );\n\n    // update progress bar\n    attr(root.ref.path, 'd', coordinates);\n\n    // hide while contains 0 value\n    attr(\n      root.ref.path,\n      'stroke-opacity',\n      props.spin || props.progress > 0 ? 1 : 0\n    );\n  };\n\n  var progressIndicator = createView({\n    tag: 'div',\n    name: 'progress-indicator',\n    ignoreRectUpdate: true,\n    ignoreRect: true,\n    create: create,\n    write: write,\n    mixins: {\n      apis: ['progress', 'spin', 'align'],\n      styles: ['opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 500 },\n        progress: {\n          type: 'spring',\n          stiffness: 0.95,\n          damping: 0.65,\n          mass: 10\n        }\n      }\n    }\n  });\n\n  var create$1 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.innerHTML =\n      (props.icon || '') + ('<span>' + props.label + '</span>');\n\n    props.isDisabled = false;\n  };\n\n  var write$1 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var isDisabled = props.isDisabled;\n    var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n    if (shouldDisable && !isDisabled) {\n      props.isDisabled = true;\n      attr(root.element, 'disabled', 'disabled');\n    } else if (!shouldDisable && isDisabled) {\n      props.isDisabled = false;\n      root.element.removeAttribute('disabled');\n    }\n  };\n\n  var fileActionButton = createView({\n    tag: 'button',\n    attributes: {\n      type: 'button'\n    },\n\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'file-action-button',\n    mixins: {\n      apis: ['label'],\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      },\n\n      listeners: true\n    },\n\n    create: create$1,\n    write: write$1\n  });\n\n  var toNaturalFileSize = function toNaturalFileSize(bytes) {\n    var decimalSeparator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n    // nope, no negative byte sizes\n    bytes = Math.round(Math.abs(bytes));\n\n    // just bytes\n    if (bytes < 1000) {\n      return bytes + ' bytes';\n    }\n\n    // kilobytes\n    if (bytes < MB) {\n      return Math.floor(bytes / KB) + ' KB';\n    }\n\n    // megabytes\n    if (bytes < GB) {\n      return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' MB';\n    }\n\n    // gigabytes\n    return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' GB';\n  };\n\n  var KB = 1000;\n  var MB = 1000000;\n  var GB = 1000000000;\n\n  var removeDecimalsWhenZero = function removeDecimalsWhenZero(\n    value,\n    decimalCount,\n    separator\n  ) {\n    return value\n      .toFixed(decimalCount)\n      .split('.')\n      .filter(function(part) {\n        return part !== '0';\n      })\n      .join(separator);\n  };\n\n  var create$2 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // filename\n    var fileName = createElement$1('span');\n    fileName.className = 'filepond--file-info-main';\n    // hide for screenreaders\n    // the file is contained in a fieldset with legend that contains the filename\n    // no need to read it twice\n    attr(fileName, 'aria-hidden', 'true');\n    root.appendChild(fileName);\n    root.ref.fileName = fileName;\n\n    // filesize\n    var fileSize = createElement$1('span');\n    fileSize.className = 'filepond--file-info-sub';\n    root.appendChild(fileSize);\n    root.ref.fileSize = fileSize;\n\n    // set initial values\n    text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n    text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n  };\n\n  var updateFile = function updateFile(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    text(\n      root.ref.fileSize,\n      toNaturalFileSize(root.query('GET_ITEM_SIZE', props.id))\n    );\n\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props;\n    // if size is available don't fallback to unknown size message\n    if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n      return;\n    }\n\n    text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n  };\n\n  var fileInfo = createView({\n    name: 'file-info',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: updateFile,\n      DID_UPDATE_ITEM_META: updateFile,\n      DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n      DID_THROW_ITEM_INVALID: updateFileSizeOnError\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$2,\n    mixins: {\n      styles: ['translateX', 'translateY'],\n      animations: {\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var toPercentage = function toPercentage(value) {\n    return Math.round(value * 100);\n  };\n\n  var create$3 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // main status\n    var main = createElement$1('span');\n    main.className = 'filepond--file-status-main';\n    root.appendChild(main);\n    root.ref.main = main;\n\n    // sub status\n    var sub = createElement$1('span');\n    sub.className = 'filepond--file-status-sub';\n    root.appendChild(sub);\n    root.ref.sub = sub;\n\n    didSetItemLoadProgress({ root: root, action: { progress: null } });\n  };\n\n  var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_LOADING')\n        : root.query('GET_LABEL_FILE_LOADING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_PROCESSING')\n        : root.query('GET_LABEL_FILE_PROCESSING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n    var root = _ref4.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n    var root = _ref5.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n  };\n\n  var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n    var root = _ref6.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n  };\n\n  var clear = function clear(_ref7) {\n    var root = _ref7.root;\n    text(root.ref.main, '');\n    text(root.ref.sub, '');\n  };\n\n  var error = function error(_ref8) {\n    var root = _ref8.root,\n      action = _ref8.action;\n    text(root.ref.main, action.status.main);\n    text(root.ref.sub, action.status.sub);\n  };\n\n  var fileStatus = createView({\n    name: 'file-status',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: clear,\n      DID_REVERT_ITEM_PROCESSING: clear,\n      DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n      DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n      DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n      DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n      DID_THROW_ITEM_LOAD_ERROR: error,\n      DID_THROW_ITEM_INVALID: error,\n      DID_THROW_ITEM_PROCESSING_ERROR: error,\n      DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n      DID_THROW_ITEM_REMOVE_ERROR: error\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$3,\n    mixins: {\n      styles: ['translateX', 'translateY', 'opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 250 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  /**\n   * Button definitions for the file view\n   */\n\n  var Buttons = {\n    AbortItemLoad: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n      action: 'ABORT_ITEM_LOAD',\n      className: 'filepond--action-abort-item-load',\n      align: 'LOAD_INDICATOR_POSITION' // right\n    },\n    RetryItemLoad: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n      action: 'RETRY_ITEM_LOAD',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-load',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RemoveItem: {\n      label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n      action: 'REQUEST_REMOVE_ITEM',\n      icon: 'GET_ICON_REMOVE',\n      className: 'filepond--action-remove-item',\n      align: 'BUTTON_REMOVE_ITEM_POSITION' // left\n    },\n    ProcessItem: {\n      label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n      action: 'REQUEST_ITEM_PROCESSING',\n      icon: 'GET_ICON_PROCESS',\n      className: 'filepond--action-process-item',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    AbortItemProcessing: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n      action: 'ABORT_ITEM_PROCESSING',\n      className: 'filepond--action-abort-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RetryItemProcessing: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n      action: 'RETRY_ITEM_PROCESSING',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RevertItemProcessing: {\n      label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n      action: 'REQUEST_REVERT_ITEM_PROCESSING',\n      icon: 'GET_ICON_UNDO',\n      className: 'filepond--action-revert-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    }\n  };\n\n  // make a list of buttons, we can then remove buttons from this list if they're disabled\n  var ButtonKeys = [];\n  forin(Buttons, function(key) {\n    ButtonKeys.push(key);\n  });\n\n  var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n    var buttonRect = root.ref.buttonRemoveItem.rect.element;\n    return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n  };\n\n  // Force on full pixels so text stays crips\n  var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n  };\n  var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n  };\n\n  var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n    return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n  };\n  var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(\n    root\n  ) {\n    return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n  };\n  var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n    return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n  };\n\n  var DefaultStyle = {\n    buttonAbortItemLoad: { opacity: 0 },\n    buttonRetryItemLoad: { opacity: 0 },\n    buttonRemoveItem: { opacity: 0 },\n    buttonProcessItem: { opacity: 0 },\n    buttonAbortItemProcessing: { opacity: 0 },\n    buttonRetryItemProcessing: { opacity: 0 },\n    buttonRevertItemProcessing: { opacity: 0 },\n    loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n    processProgressIndicator: {\n      opacity: 0,\n      align: getProcessIndicatorAlignment\n    },\n    processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n    info: { translateX: 0, translateY: 0, opacity: 0 },\n    status: { translateX: 0, translateY: 0, opacity: 0 }\n  };\n\n  var IdleStyle = {\n    buttonRemoveItem: { opacity: 1 },\n    buttonProcessItem: { opacity: 1 },\n    info: { translateX: calculateFileInfoOffset },\n    status: { translateX: calculateFileInfoOffset }\n  };\n\n  var ProcessingStyle = {\n    buttonAbortItemProcessing: { opacity: 1 },\n    processProgressIndicator: { opacity: 1 },\n    status: { opacity: 1 }\n  };\n\n  var StyleMap = {\n    DID_THROW_ITEM_INVALID: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset, opacity: 1 }\n    },\n\n    DID_START_ITEM_LOAD: {\n      buttonAbortItemLoad: { opacity: 1 },\n      loadProgressIndicator: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_LOAD_ERROR: {\n      buttonRetryItemLoad: { opacity: 1 },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_START_ITEM_REMOVE: {\n      processProgressIndicator: {\n        opacity: 1,\n        align: getRemoveIndicatorAligment\n      },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 0 }\n    },\n\n    DID_THROW_ITEM_REMOVE_ERROR: {\n      processProgressIndicator: {\n        opacity: 0,\n        align: getRemoveIndicatorAligment\n      },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1, translateX: calculateFileInfoOffset }\n    },\n\n    DID_LOAD_ITEM: IdleStyle,\n    DID_LOAD_LOCAL_ITEM: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_START_ITEM_PROCESSING: ProcessingStyle,\n    DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n    DID_COMPLETE_ITEM_PROCESSING: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      info: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_PROCESSING_ERROR: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonRetryItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { opacity: 1 }\n    },\n\n    DID_ABORT_ITEM_PROCESSING: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonProcessItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_REVERT_ITEM_PROCESSING: IdleStyle\n  };\n\n  // complete indicator view\n  var processingCompleteIndicatorView = createView({\n    create: function create(_ref) {\n      var root = _ref.root;\n      root.element.innerHTML = root.query('GET_ICON_DONE');\n    },\n    name: 'processing-complete-indicator',\n    ignoreRect: true,\n    mixins: {\n      styles: ['scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$4 = function create(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var id = props.id;\n\n    // allow reverting upload\n    var allowRevert = root.query('GET_ALLOW_REVERT');\n\n    // is instant uploading, need this to determine the icon of the undo button\n    var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n    // is async set up\n    var isAsync = root.query('IS_ASYNC');\n\n    // enabled buttons array\n    var enabledButtons = isAsync\n      ? ButtonKeys.concat()\n      : ButtonKeys.filter(function(key) {\n          return !/Process/.test(key);\n        });\n\n    // remove last button (revert) if not allowed\n    if (isAsync && !allowRevert) {\n      enabledButtons.splice(-1, 1);\n      var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n      map.info.translateX = calculateFileHorizontalCenterOffset;\n      map.info.translateY = calculateFileVerticalCenterOffset;\n      map.status.translateY = calculateFileVerticalCenterOffset;\n      map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // update icon and label for revert button when instant uploading\n    if (instantUpload && allowRevert) {\n      Buttons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n      Buttons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n    }\n\n    // create the button views\n    forin(Buttons, function(key, definition) {\n      // create button\n      var buttonView = root.createChildView(fileActionButton, {\n        label: root.query(definition.label),\n        icon: root.query(definition.icon),\n        opacity: 0\n      });\n\n      // should be appended?\n      if (enabledButtons.includes(key)) {\n        root.appendChildView(buttonView);\n      }\n\n      // add position attribute\n      buttonView.element.dataset.align = root.query(\n        'GET_STYLE_' + definition.align\n      );\n\n      // add class\n      buttonView.element.classList.add(definition.className);\n\n      // handle interactions\n      buttonView.on('click', function(e) {\n        e.stopPropagation();\n        root.dispatch(definition.action, { query: id });\n      });\n\n      // set reference\n      root.ref['button' + key] = buttonView;\n    });\n\n    // create file info view\n    root.ref.info = root.appendChildView(\n      root.createChildView(fileInfo, { id: id })\n    );\n\n    // create file status view\n    root.ref.status = root.appendChildView(\n      root.createChildView(fileStatus, { id: id })\n    );\n\n    // checkmark\n    root.ref.processingCompleteIndicator = root.appendChildView(\n      root.createChildView(processingCompleteIndicatorView)\n    );\n    root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n      'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n    );\n\n    // add progress indicators\n    var loadIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION')\n      })\n    );\n\n    loadIndicatorView.element.classList.add('filepond--load-indicator');\n    root.ref.loadProgressIndicator = loadIndicatorView;\n\n    var progressIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION')\n      })\n    );\n\n    progressIndicatorView.element.classList.add('filepond--process-indicator');\n    root.ref.processProgressIndicator = progressIndicatorView;\n\n    // current active styles\n    root.ref.activeStyles = [];\n  };\n\n  var write$2 = function write(_ref3) {\n    var root = _ref3.root,\n      actions = _ref3.actions,\n      props = _ref3.props;\n\n    // route actions\n    route({ root: root, actions: actions, props: props });\n\n    // select last state change action\n    var action = actions\n      .concat()\n      .filter(function(action) {\n        return /^DID_/.test(action.type);\n      })\n      .reverse()\n      .find(function(action) {\n        return StyleMap[action.type];\n      });\n\n    // a new action happened, let's get the matching styles\n    if (action) {\n      // define new active styles\n      root.ref.activeStyles = [];\n\n      var stylesToApply = StyleMap[action.type];\n      forin(DefaultStyle, function(name, defaultStyles) {\n        // get reference to control\n        var control = root.ref[name];\n\n        // loop over all styles for this control\n        forin(defaultStyles, function(key, defaultValue) {\n          var value =\n            stylesToApply[name] &&\n            typeof stylesToApply[name][key] !== 'undefined'\n              ? stylesToApply[name][key]\n              : defaultValue;\n          root.ref.activeStyles.push({\n            control: control,\n            key: key,\n            value: value\n          });\n        });\n      });\n    }\n\n    // apply active styles to element\n    root.ref.activeStyles.forEach(function(_ref4) {\n      var control = _ref4.control,\n        key = _ref4.key,\n        value = _ref4.value;\n\n      control[key] = typeof value === 'function' ? value(root) : value;\n    });\n  };\n\n  var route = createRoute({\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n      _ref5\n    ) {\n      var root = _ref5.root,\n        action = _ref5.action;\n      root.ref.buttonAbortItemProcessing.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(\n      _ref6\n    ) {\n      var root = _ref6.root,\n        action = _ref6.action;\n      root.ref.buttonAbortItemLoad.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n      _ref7\n    ) {\n      var root = _ref7.root,\n        action = _ref7.action;\n      root.ref.buttonAbortItemRemoval.label = action.value;\n    },\n    DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n      var root = _ref8.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n      var root = _ref9.root;\n      root.ref.loadProgressIndicator.spin = true;\n      root.ref.loadProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n      var root = _ref10.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(\n      _ref11\n    ) {\n      var root = _ref11.root,\n        action = _ref11.action;\n      root.ref.loadProgressIndicator.spin = false;\n      root.ref.loadProgressIndicator.progress = action.progress;\n    },\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(\n      _ref12\n    ) {\n      var root = _ref12.root,\n        action = _ref12.action;\n      root.ref.processProgressIndicator.spin = false;\n      root.ref.processProgressIndicator.progress = action.progress;\n    }\n  });\n\n  var file = createView({\n    create: create$4,\n    write: write$2,\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    name: 'file'\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$5 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // filename\n    root.ref.fileName = createElement$1('legend');\n    root.appendChild(root.ref.fileName);\n\n    // file appended\n    root.ref.file = root.appendChildView(\n      root.createChildView(file, { id: props.id })\n    );\n\n    // create data container\n    var dataContainer = createElement$1('input');\n    dataContainer.type = 'hidden';\n    dataContainer.name = root.query('GET_NAME');\n    dataContainer.disabled = root.query('GET_DISABLED');\n    root.ref.data = dataContainer;\n    root.appendChild(dataContainer);\n  };\n\n  var didSetDisabled = function didSetDisabled(_ref2) {\n    var root = _ref2.root;\n    root.ref.data.disabled = root.query('GET_DISABLED');\n  };\n\n  /**\n   * Data storage\n   */\n  var didLoadItem = function didLoadItem(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action,\n      props = _ref3.props;\n    root.ref.data.value = action.serverFileReference;\n\n    // updates the legend of the fieldset so screenreaders can better group buttons\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var didRemoveItem = function didRemoveItem(_ref4) {\n    var root = _ref4.root;\n    root.ref.data.removeAttribute('value');\n  };\n\n  var didCompleteItemProcessing$1 = function didCompleteItemProcessing(_ref5) {\n    var root = _ref5.root,\n      action = _ref5.action;\n    root.ref.data.value = action.serverFileReference;\n  };\n\n  var didRevertItemProcessing = function didRevertItemProcessing(_ref6) {\n    var root = _ref6.root;\n    root.ref.data.removeAttribute('value');\n  };\n\n  var fileWrapper = createView({\n    create: create$5,\n    ignoreRect: true,\n    write: createRoute({\n      DID_SET_DISABLED: didSetDisabled,\n      DID_LOAD_ITEM: didLoadItem,\n      DID_REMOVE_ITEM: didRemoveItem,\n      DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing$1,\n      DID_REVERT_ITEM_PROCESSING: didRevertItemProcessing\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    tag: 'fieldset',\n    name: 'file-wrapper'\n  });\n\n  var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n  var create$6 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    [\n      {\n        name: 'top'\n      },\n\n      {\n        name: 'center',\n        props: {\n          translateY: null,\n          scaleY: null\n        },\n\n        mixins: {\n          animations: {\n            scaleY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY', 'scaleY']\n        }\n      },\n\n      {\n        name: 'bottom',\n        props: {\n          translateY: null\n        },\n\n        mixins: {\n          animations: {\n            translateY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY']\n        }\n      }\n    ].forEach(function(section) {\n      createSection(root, section, props.name);\n    });\n\n    root.element.classList.add('filepond--' + props.name);\n\n    root.ref.scalable = null;\n  };\n\n  var createSection = function createSection(root, section, className) {\n    var viewConstructor = createView({\n      name: 'panel-' + section.name + ' filepond--' + className,\n      mixins: section.mixins,\n      ignoreRectUpdate: true\n    });\n\n    var view = root.createChildView(viewConstructor, section.props);\n\n    root.ref[section.name] = root.appendChildView(view);\n  };\n\n  var write$3 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    // update scalable state\n    if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n      root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n      root.element.dataset.scalable = root.ref.scalable;\n    }\n\n    // no height, can't set\n    if (!props.height) return;\n\n    // get child rects\n    var topRect = root.ref.top.rect.element;\n    var bottomRect = root.ref.bottom.rect.element;\n\n    // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n    var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n    // offset center part\n    root.ref.center.translateY = topRect.height;\n\n    // scale center part\n    // use math ceil to prevent transparent lines because of rounding errors\n    root.ref.center.scaleY =\n      (height - topRect.height - bottomRect.height) / 100;\n\n    // offset bottom part\n    root.ref.bottom.translateY = height - bottomRect.height;\n  };\n\n  var panel = createView({\n    name: 'panel',\n    write: write$3,\n    create: create$6,\n    ignoreRect: true,\n    mixins: {\n      apis: ['height', 'scalable']\n    }\n  });\n\n  var ITEM_TRANSLATE_SPRING = {\n    type: 'spring',\n    stiffness: 0.75,\n    damping: 0.45,\n    mass: 10\n  };\n\n  var ITEM_SCALE_SPRING = 'spring';\n\n  var StateMap = {\n    DID_START_ITEM_LOAD: 'busy',\n    DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n    DID_THROW_ITEM_INVALID: 'load-invalid',\n    DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n    DID_LOAD_ITEM: 'idle',\n    DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n    DID_START_ITEM_REMOVE: 'busy',\n    DID_START_ITEM_PROCESSING: 'busy',\n    DID_REQUEST_ITEM_PROCESSING: 'busy',\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n    DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n    DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n    DID_ABORT_ITEM_PROCESSING: 'cancelled',\n    DID_REVERT_ITEM_PROCESSING: 'idle'\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$7 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // select\n    root.ref.handleClick = function() {\n      return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n    };\n\n    // set id\n    root.element.id = 'filepond--item-' + props.id;\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // file view\n    root.ref.container = root.appendChildView(\n      root.createChildView(fileWrapper, { id: props.id })\n    );\n\n    // file panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'item-panel' })\n    );\n\n    // default start height\n    root.ref.panel.height = null;\n\n    // by default not marked for removal\n    props.markedForRemoval = false;\n\n    // if not allowed to reorder file items, exit here\n    if (!root.query('GET_ALLOW_REORDER')) return;\n\n    // set to idle so shows grab cursor\n    root.element.dataset.dragState = 'idle';\n\n    var grab = function grab(e) {\n      if (!e.isPrimary) return;\n\n      var origin = {\n        x: e.pageX,\n        y: e.pageY\n      };\n\n      props.dragOrigin = {\n        x: root.translateX,\n        y: root.translateY\n      };\n\n      props.dragCenter = {\n        x: e.offsetX,\n        y: e.offsetY\n      };\n\n      root.dispatch('DID_GRAB_ITEM', { id: props.id });\n\n      var drag = function drag(e) {\n        if (!e.isPrimary) return;\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        root.dispatch('DID_DRAG_ITEM', { id: props.id });\n      };\n\n      var drop = function drop(e) {\n        if (!e.isPrimary) return;\n\n        document.removeEventListener('pointermove', drag);\n        document.removeEventListener('pointerup', drop);\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        root.dispatch('DID_DROP_ITEM', { id: props.id });\n      };\n\n      document.addEventListener('pointermove', drag);\n      document.addEventListener('pointerup', drop);\n    };\n\n    // addEvent(root.element, 'pointerdown', grab);\n    root.element.addEventListener('pointerdown', grab);\n  };\n\n  var route$1 = createRoute({\n    DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n      var root = _ref2.root,\n        action = _ref2.action;\n      root.height = action.height;\n    }\n  });\n\n  var write$4 = createRoute(\n    {\n      DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        props.dragOrigin = {\n          x: root.translateX,\n          y: root.translateY\n        };\n      },\n      DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n        var root = _ref4.root;\n        root.element.dataset.dragState = 'drag';\n      },\n      DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n        props.dragOffset = null;\n        props.dragOrigin = null;\n        root.element.dataset.dragState = 'drop';\n      }\n    },\n    function(_ref6) {\n      var root = _ref6.root,\n        actions = _ref6.actions,\n        props = _ref6.props,\n        shouldOptimize = _ref6.shouldOptimize;\n\n      if (root.element.dataset.dragState === 'drop') {\n        if (root.scaleX <= 1) {\n          root.element.dataset.dragState = 'idle';\n        }\n      }\n\n      // select last state change action\n      var action = actions\n        .concat()\n        .filter(function(action) {\n          return /^DID_/.test(action.type);\n        })\n        .reverse()\n        .find(function(action) {\n          return StateMap[action.type];\n        });\n\n      // no need to set same state twice\n      if (action && action.type !== props.currentState) {\n        // set current state\n        props.currentState = action.type;\n\n        // set state\n        root.element.dataset.filepondItemState =\n          StateMap[props.currentState] || '';\n      }\n\n      // route actions\n      var aspectRatio =\n        root.query('GET_ITEM_PANEL_ASPECT_RATIO') ||\n        root.query('GET_PANEL_ASPECT_RATIO');\n      if (!aspectRatio) {\n        route$1({ root: root, actions: actions, props: props });\n        if (!root.height && root.ref.container.rect.element.height > 0) {\n          root.height = root.ref.container.rect.element.height;\n        }\n      } else if (!shouldOptimize) {\n        root.height = root.rect.element.width * aspectRatio;\n      }\n\n      // sync panel height with item height\n      if (shouldOptimize) {\n        root.ref.panel.height = null;\n      }\n\n      root.ref.panel.height = root.height;\n    }\n  );\n\n  var item = createView({\n    create: create$7,\n    write: write$4,\n    destroy: function destroy(_ref7) {\n      var root = _ref7.root,\n        props = _ref7.props;\n      root.element.removeEventListener('click', root.ref.handleClick);\n      root.dispatch('RELEASE_ITEM', { query: props.id });\n    },\n    tag: 'li',\n    name: 'item',\n    mixins: {\n      apis: [\n        'id',\n        'interactionMethod',\n        'markedForRemoval',\n        'spawnDate',\n        'dragCenter',\n        'dragOrigin',\n        'dragOffset'\n      ],\n      styles: [\n        'translateX',\n        'translateY',\n        'scaleX',\n        'scaleY',\n        'opacity',\n        'height'\n      ],\n\n      animations: {\n        scaleX: ITEM_SCALE_SPRING,\n        scaleY: ITEM_SCALE_SPRING,\n        translateX: ITEM_TRANSLATE_SPRING,\n        translateY: ITEM_TRANSLATE_SPRING,\n        opacity: { type: 'tween', duration: 150 }\n      }\n    }\n  });\n\n  var getItemIndexByPosition = function getItemIndexByPosition(\n    view,\n    children,\n    positionInView\n  ) {\n    if (!positionInView) return;\n\n    var horizontalSpace = view.rect.element.width;\n    // const children = view.childViews;\n    var l = children.length;\n    var last = null;\n\n    // -1, don't move items to accomodate (either add to top or bottom)\n    if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n    // let's get the item width\n    var item = children[0];\n    var itemRect = item.rect.element;\n    var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n    var itemWidth = itemRect.width + itemHorizontalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      for (var index = 0; index < l; index++) {\n        var child = children[index];\n        var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n        if (positionInView.top < childMid) {\n          return index;\n        }\n      }\n      return l;\n    }\n\n    // grid\n    var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n    var itemHeight = itemRect.height + itemVerticalMargin;\n    for (var _index = 0; _index < l; _index++) {\n      var indexX = _index % itemsPerRow;\n      var indexY = Math.floor(_index / itemsPerRow);\n\n      var offsetX = indexX * itemWidth;\n      var offsetY = indexY * itemHeight;\n\n      var itemTop = offsetY - itemRect.marginTop;\n      var itemRight = offsetX + itemWidth;\n      var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n      if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n        if (positionInView.left < itemRight) {\n          return _index;\n        } else if (_index !== l - 1) {\n          last = _index;\n        } else {\n          last = null;\n        }\n      }\n    }\n\n    if (last !== null) {\n      return last;\n    }\n\n    return l;\n  };\n\n  var create$8 = function create(_ref) {\n    var root = _ref.root;\n    // need to set role to list as otherwise it won't be read as a list by VoiceOver\n    attr(root.element, 'role', 'list');\n\n    root.ref.lastItemSpanwDate = Date.now();\n  };\n\n  /**\n   * Inserts a new item\n   * @param root\n   * @param action\n   */\n  var addItemView = function addItemView(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var id = action.id,\n      index = action.index,\n      interactionMethod = action.interactionMethod;\n\n    root.ref.addIndex = index;\n\n    var now = Date.now();\n    var spawnDate = now;\n    var opacity = 1;\n\n    if (interactionMethod !== InteractionMethod.NONE) {\n      opacity = 0;\n      var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n      var dist = now - root.ref.lastItemSpanwDate;\n      spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n    }\n\n    root.ref.lastItemSpanwDate = spawnDate;\n\n    root.appendChildView(\n      root.createChildView(\n        // view type\n        item,\n\n        // props\n        {\n          spawnDate: spawnDate,\n          id: id,\n          opacity: opacity,\n          interactionMethod: interactionMethod\n        }\n      ),\n\n      index\n    );\n  };\n\n  var moveItem = function moveItem(item, x, y) {\n    var vx =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var vy =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    // set to null to remove animation while dragging\n    if (item.dragOffset) {\n      item.translateX = null;\n      item.translateY = null;\n      item.translateX = item.dragOrigin.x + item.dragOffset.x;\n      item.translateY = item.dragOrigin.y + item.dragOffset.y;\n      item.scaleX = 1.025;\n      item.scaleY = 1.025;\n    } else {\n      item.translateX = x;\n      item.translateY = y;\n\n      if (Date.now() > item.spawnDate) {\n        // reveal element\n        if (item.opacity === 0) {\n          introItemView(item, x, y, vx, vy);\n        }\n\n        // make sure is default scale every frame\n        item.scaleX = 1;\n        item.scaleY = 1;\n        item.opacity = 1;\n      }\n    }\n  };\n\n  var introItemView = function introItemView(item, x, y, vx, vy) {\n    if (item.interactionMethod === InteractionMethod.NONE) {\n      item.translateX = null;\n      item.translateX = x;\n      item.translateY = null;\n      item.translateY = y;\n    } else if (item.interactionMethod === InteractionMethod.DROP) {\n      item.translateX = null;\n      item.translateX = x - vx * 20;\n\n      item.translateY = null;\n      item.translateY = y - vy * 10;\n\n      item.scaleX = 0.8;\n      item.scaleY = 0.8;\n    } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n      item.translateY = null;\n      item.translateY = y - 30;\n    } else if (item.interactionMethod === InteractionMethod.API) {\n      item.translateX = null;\n      item.translateX = x - 30;\n      item.translateY = null;\n    }\n  };\n\n  /**\n   * Removes an existing item\n   * @param root\n   * @param action\n   */\n  var removeItemView = function removeItemView(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var id = action.id;\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    // if no view found, exit\n    if (!view) {\n      return;\n    }\n\n    // animate view out of view\n    view.scaleX = 0.9;\n    view.scaleY = 0.9;\n    view.opacity = 0;\n\n    // mark for removal\n    view.markedForRemoval = true;\n  };\n\n  var getItemHeight = function getItemHeight(child) {\n    return (\n      child.rect.element.height +\n      child.rect.element.marginBottom * 0.5 +\n      child.rect.element.marginTop * 0.5\n    );\n  };\n\n  var dragItem = function dragItem(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action,\n      props = _ref4.props;\n    var id = action.id;\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    // if no view found, exit\n    if (!view) return;\n\n    var dragPosition = {\n      x: 0,\n      y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y\n\n      // find new index\n    };\n    var items = root.query('GET_ACTIVE_ITEMS');\n    var visibleChildren = root.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n    var children = items.map(function(item) {\n      return visibleChildren.find(function(childView) {\n        return childView.id === item.id;\n      });\n    });\n\n    var l = children.length;\n    var targetIndex = l;\n\n    var childHeight = 0;\n    var childBottom = 0;\n    var childTop = 0;\n\n    var currentIndex = children.findIndex(function(child) {\n      return child === view;\n    });\n    var dragHeight = getItemHeight(view);\n\n    for (var i = 0; i < l; i++) {\n      childHeight = getItemHeight(children[i]);\n      childTop = childBottom;\n      childBottom = childTop + childHeight;\n\n      if (dragPosition.y < childBottom) {\n        if (currentIndex > i) {\n          if (dragPosition.y < childTop + dragHeight) {\n            targetIndex = i;\n            break;\n          }\n          continue;\n        }\n        targetIndex = i;\n        break;\n      }\n    }\n\n    root.dispatch('MOVE_ITEM', { query: view, index: targetIndex });\n  };\n\n  /**\n   * Setup action routes\n   */\n  var route$2 = createRoute({\n    DID_ADD_ITEM: addItemView,\n    DID_REMOVE_ITEM: removeItemView,\n    DID_DRAG_ITEM: dragItem\n  });\n\n  /**\n   * Write to view\n   * @param root\n   * @param actions\n   * @param props\n   */\n  var write$5 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions,\n      shouldOptimize = _ref5.shouldOptimize;\n\n    // route actions\n    route$2({ root: root, props: props, actions: actions });\n    var dragCoordinates = props.dragCoordinates;\n\n    // available space on horizontal axis\n    var horizontalSpace = root.rect.element.width;\n\n    // only draw children that have dimensions\n    var visibleChildren = root.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n\n    // sort based on current active items\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // get index\n    var dragIndex = dragCoordinates\n      ? getItemIndexByPosition(root, children, dragCoordinates)\n      : null;\n\n    // add index is used to reserve the dropped/added item index till the actual item is rendered\n    var addIndex = root.ref.addIndex || null;\n\n    // add index no longer needed till possibly next draw\n    root.ref.addIndex = null;\n\n    var dragIndexOffset = 0;\n    var removeIndexOffset = 0;\n    var addIndexOffset = 0;\n\n    if (children.length === 0) return;\n\n    var childRect = children[0].rect.element;\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      var offsetY = 0;\n      var dragOffset = 0;\n\n      children.forEach(function(child, index) {\n        if (dragIndex) {\n          var dist = index - dragIndex;\n          if (dist === -2) {\n            dragOffset = -itemVerticalMargin * 0.25;\n          } else if (dist === -1) {\n            dragOffset = -itemVerticalMargin * 0.75;\n          } else if (dist === 0) {\n            dragOffset = itemVerticalMargin * 0.75;\n          } else if (dist === 1) {\n            dragOffset = itemVerticalMargin * 0.25;\n          } else {\n            dragOffset = 0;\n          }\n        }\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        if (!child.markedForRemoval) {\n          moveItem(child, 0, offsetY + dragOffset);\n        }\n\n        var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n        var visualHeight =\n          itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n        offsetY += visualHeight;\n      });\n    }\n    // grid\n    else {\n      var prevX = 0;\n      var prevY = 0;\n\n      children.forEach(function(child, index) {\n        if (index === dragIndex) {\n          dragIndexOffset = 1;\n        }\n\n        if (index === addIndex) {\n          addIndexOffset += 1;\n        }\n\n        if (child.markedForRemoval && child.opacity < 0.5) {\n          removeIndexOffset -= 1;\n        }\n\n        var visualIndex =\n          index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n        var indexX = visualIndex % itemsPerRow;\n        var indexY = Math.floor(visualIndex / itemsPerRow);\n\n        var offsetX = indexX * itemWidth;\n        var offsetY = indexY * itemHeight;\n\n        var vectorX = Math.sign(offsetX - prevX);\n        var vectorY = Math.sign(offsetY - prevY);\n\n        prevX = offsetX;\n        prevY = offsetY;\n\n        if (child.markedForRemoval) return;\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        moveItem(child, offsetX, offsetY, vectorX, vectorY);\n      });\n    }\n  };\n\n  /**\n   * Filters actions that are meant specifically for a certain child of the list\n   * @param child\n   * @param actions\n   */\n  var filterSetItemActions = function filterSetItemActions(child, actions) {\n    return actions.filter(function(action) {\n      // if action has an id, filter out actions that don't have this child id\n      if (action.data && action.data.id) {\n        return child.id === action.data.id;\n      }\n\n      // allow all other actions\n      return true;\n    });\n  };\n\n  var list = createView({\n    create: create$8,\n    write: write$5,\n    tag: 'ul',\n    name: 'list',\n    didWriteView: function didWriteView(_ref6) {\n      var root = _ref6.root;\n      root.childViews\n        .filter(function(view) {\n          return view.markedForRemoval && view.opacity === 0 && view.resting;\n        })\n        .forEach(function(view) {\n          view._destroy();\n          root.removeChildView(view);\n        });\n    },\n    filterFrameActionsForChild: filterSetItemActions,\n    mixins: {\n      apis: ['dragCoordinates']\n    }\n  });\n\n  var create$9 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.ref.list = root.appendChildView(root.createChildView(list));\n    props.dragCoordinates = null;\n    props.overflowing = false;\n  };\n\n  var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props,\n      action = _ref2.action;\n    if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n    props.dragCoordinates = {\n      left: action.position.scopeLeft - root.ref.list.rect.element.left,\n      top:\n        action.position.scopeTop -\n        (root.rect.outer.top +\n          root.rect.element.marginTop +\n          root.rect.element.scrollTop)\n    };\n  };\n\n  var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n    var props = _ref3.props;\n    props.dragCoordinates = null;\n  };\n\n  var route$3 = createRoute({\n    DID_DRAG: storeDragCoordinates,\n    DID_END_DRAG: clearDragCoordinates\n  });\n\n  var write$6 = function write(_ref4) {\n    var root = _ref4.root,\n      props = _ref4.props,\n      actions = _ref4.actions;\n\n    // route actions\n    route$3({ root: root, props: props, actions: actions });\n\n    // current drag position\n    root.ref.list.dragCoordinates = props.dragCoordinates;\n\n    // if currently overflowing but no longer received overflow\n    if (props.overflowing && !props.overflow) {\n      props.overflowing = false;\n\n      // reset overflow state\n      root.element.dataset.state = '';\n      root.height = null;\n    }\n\n    // if is not overflowing currently but does receive overflow value\n    if (props.overflow) {\n      var newHeight = Math.round(props.overflow);\n      if (newHeight !== root.height) {\n        props.overflowing = true;\n        root.element.dataset.state = 'overflow';\n        root.height = newHeight;\n      }\n    }\n  };\n\n  var listScroller = createView({\n    create: create$9,\n    write: write$6,\n    name: 'list-scroller',\n    mixins: {\n      apis: ['overflow', 'dragCoordinates'],\n      styles: ['height', 'translateY'],\n      animations: {\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var attrToggle = function attrToggle(element, name, state) {\n    var enabledValue =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    if (state) {\n      attr(element, name, enabledValue);\n    } else {\n      element.removeAttribute(name);\n    }\n  };\n\n  var resetFileInput = function resetFileInput(input) {\n    // no value, no need to reset\n    if (!input || input.value === '') {\n      return;\n    }\n\n    try {\n      // for modern browsers\n      input.value = '';\n    } catch (err) {}\n\n    // for IE10\n    if (input.value) {\n      // quickly append input to temp form and reset form\n      var form = createElement$1('form');\n      var parentNode = input.parentNode;\n      var ref = input.nextSibling;\n      form.appendChild(input);\n      form.reset();\n\n      // re-inject input where it originally was\n      if (ref) {\n        parentNode.insertBefore(input, ref);\n      } else {\n        parentNode.appendChild(input);\n      }\n    }\n  };\n\n  var create$a = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // set id so can be referenced from outside labels\n    root.element.id = 'filepond--browser-' + props.id;\n\n    // set name of element (is removed when a value is set)\n    attr(root.element, 'name', root.query('GET_NAME'));\n\n    // we have to link this element to the status element\n    attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n    // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n    attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n    // handle changes to the input field\n    root.ref.handleChange = function(e) {\n      if (!root.element.value) {\n        return;\n      }\n\n      // extract files\n      var files = Array.from(root.element.files);\n\n      // we add a little delay so the OS file select window can move out of the way before we add our file\n      setTimeout(function() {\n        // load files\n        props.onload(files);\n\n        // reset input, it's just for exposing a method to drop files, should not retain any state\n        resetFileInput(root.element);\n      }, 250);\n    };\n    root.element.addEventListener('change', root.ref.handleChange);\n  };\n\n  var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    attrToggle(\n      root.element,\n      'accept',\n      !!action.value,\n      action.value ? action.value.join(',') : ''\n    );\n  };\n\n  var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    attrToggle(root.element, 'multiple', action.value);\n  };\n\n  var toggleDisabled = function toggleDisabled(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    var isDisabled = root.query('GET_DISABLED');\n    var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n    var disableField = isDisabled || !doesAllowBrowse;\n    attrToggle(root.element, 'disabled', disableField);\n  };\n\n  var toggleRequired = function toggleRequired(_ref5) {\n    var root = _ref5.root,\n      action = _ref5.action;\n    // want to remove required, always possible\n    if (!action.value) {\n      attrToggle(root.element, 'required', false);\n    }\n    // if want to make required, only possible when zero items\n    else if (root.query('GET_TOTAL_ITEMS') === 0) {\n      attrToggle(root.element, 'required', true);\n    }\n  };\n\n  var setCaptureMethod = function setCaptureMethod(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    attrToggle(\n      root.element,\n      'capture',\n      !!action.value,\n      action.value === true ? '' : action.value\n    );\n  };\n\n  var updateRequiredStatus = function updateRequiredStatus(_ref7) {\n    var root = _ref7.root;\n    var element = root.element;\n    // always remove the required attribute when more than zero items\n    if (root.query('GET_TOTAL_ITEMS') > 0) {\n      attrToggle(element, 'required', false);\n      attrToggle(element, 'name', false);\n    } else {\n      // add name attribute\n      attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n      // remove any validation messages\n      var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n      if (shouldCheckValidity) {\n        element.setCustomValidity('');\n      }\n\n      // we only add required if the field has been deemed required\n      if (root.query('GET_REQUIRED')) {\n        attrToggle(element, 'required', true);\n      }\n    }\n  };\n\n  var updateFieldValidityStatus = function updateFieldValidityStatus(_ref8) {\n    var root = _ref8.root;\n    var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n    if (!shouldCheckValidity) return;\n    root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n  };\n\n  var browser = createView({\n    tag: 'input',\n    name: 'browser',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    attributes: {\n      type: 'file'\n    },\n\n    create: create$a,\n    destroy: function destroy(_ref9) {\n      var root = _ref9.root;\n      root.element.removeEventListener('change', root.ref.handleChange);\n    },\n    write: createRoute({\n      DID_LOAD_ITEM: updateRequiredStatus,\n      DID_REMOVE_ITEM: updateRequiredStatus,\n      DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n      DID_SET_DISABLED: toggleDisabled,\n      DID_SET_ALLOW_BROWSE: toggleDisabled,\n      DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n      DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n      DID_SET_CAPTURE_METHOD: setCaptureMethod,\n      DID_SET_REQUIRED: toggleRequired\n    })\n  });\n\n  var Key = {\n    ENTER: 13,\n    SPACE: 32\n  };\n\n  var create$b = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // create the label and link it to the file browser\n    var label = createElement$1('label');\n    attr(label, 'for', 'filepond--browser-' + props.id);\n\n    // use for labeling file input (aria-labelledby on file input)\n    attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n    // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n    attr(label, 'aria-hidden', 'true');\n\n    // handle keys\n    root.ref.handleKeyDown = function(e) {\n      var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n      if (!isActivationKey) return;\n      // stops from triggering the element a second time\n      e.preventDefault();\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    root.ref.handleClick = function(e) {\n      var isLabelClick = e.target === label || label.contains(e.target);\n\n      // don't want to click twice\n      if (isLabelClick) return;\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    // attach events\n    label.addEventListener('keydown', root.ref.handleKeyDown);\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // update\n    updateLabelValue(label, props.caption);\n\n    // add!\n    root.appendChild(label);\n    root.ref.label = label;\n  };\n\n  var updateLabelValue = function updateLabelValue(label, value) {\n    label.innerHTML = value;\n    var clickable = label.querySelector('.filepond--label-action');\n    if (clickable) {\n      attr(clickable, 'tabindex', '0');\n    }\n    return value;\n  };\n\n  var dropLabel = createView({\n    name: 'drop-label',\n    ignoreRect: true,\n    create: create$b,\n    destroy: function destroy(_ref2) {\n      var root = _ref2.root;\n      root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n      root.element.removeEventListener('click', root.ref.handleClick);\n    },\n    write: createRoute({\n      DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n        var root = _ref3.root,\n          action = _ref3.action;\n        updateLabelValue(root.ref.label, action.value);\n      }\n    }),\n\n    mixins: {\n      styles: ['opacity', 'translateX', 'translateY'],\n      animations: {\n        opacity: { type: 'tween', duration: 150 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var blob = createView({\n    name: 'drip-blob',\n    ignoreRect: true,\n    mixins: {\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  var addBlob = function addBlob(_ref) {\n    var root = _ref.root;\n    var centerX = root.rect.element.width * 0.5;\n    var centerY = root.rect.element.height * 0.5;\n\n    root.ref.blob = root.appendChildView(\n      root.createChildView(blob, {\n        opacity: 0,\n        scaleX: 2.5,\n        scaleY: 2.5,\n        translateX: centerX,\n        translateY: centerY\n      })\n    );\n  };\n\n  var moveBlob = function moveBlob(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!root.ref.blob) {\n      addBlob({ root: root });\n      return;\n    }\n\n    root.ref.blob.translateX = action.position.scopeLeft;\n    root.ref.blob.translateY = action.position.scopeTop;\n    root.ref.blob.scaleX = 1;\n    root.ref.blob.scaleY = 1;\n    root.ref.blob.opacity = 1;\n  };\n\n  var hideBlob = function hideBlob(_ref3) {\n    var root = _ref3.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.opacity = 0;\n  };\n\n  var explodeBlob = function explodeBlob(_ref4) {\n    var root = _ref4.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.scaleX = 2.5;\n    root.ref.blob.scaleY = 2.5;\n    root.ref.blob.opacity = 0;\n  };\n\n  var write$7 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions;\n    route$4({ root: root, props: props, actions: actions });\n    var blob = root.ref.blob;\n\n    if (actions.length === 0 && blob && blob.opacity === 0) {\n      root.removeChildView(blob);\n      root.ref.blob = null;\n    }\n  };\n\n  var route$4 = createRoute({\n    DID_DRAG: moveBlob,\n    DID_DROP: explodeBlob,\n    DID_END_DRAG: hideBlob\n  });\n\n  var drip = createView({\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'drip',\n    write: write$7\n  });\n\n  var getRootNode = function getRootNode(element) {\n    return 'getRootNode' in element ? element.getRootNode() : document;\n  };\n\n  var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n  var text$1 = ['css', 'csv', 'html', 'txt'];\n  var map = {\n    zip: 'zip|compressed',\n    epub: 'application/epub+zip'\n  };\n\n  var guesstimateMimeType = function guesstimateMimeType() {\n    var extension =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    extension = extension.toLowerCase();\n    if (images.includes(extension)) {\n      return (\n        'image/' +\n        (extension === 'jpg'\n          ? 'jpeg'\n          : extension === 'svg'\n          ? 'svg+xml'\n          : extension)\n      );\n    }\n    if (text$1.includes(extension)) {\n      return 'text/' + extension;\n    }\n    return map[extension] || null;\n  };\n\n  var requestDataTransferItems = function requestDataTransferItems(\n    dataTransfer\n  ) {\n    return new Promise(function(resolve, reject) {\n      // try to get links from transfer, if found we'll exit immidiately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n      var links = getLinks(dataTransfer);\n      if (links.length && !hasFiles(dataTransfer)) {\n        return resolve(links);\n      }\n      // try to get files from the transfer\n      getFiles(dataTransfer).then(resolve);\n    });\n  };\n\n  /**\n   * Test if datatransfer has files\n   */\n  var hasFiles = function hasFiles(dataTransfer) {\n    if (dataTransfer.files) return dataTransfer.files.length > 0;\n    return false;\n  };\n\n  /**\n   * Extracts files from a DataTransfer object\n   */\n  var getFiles = function getFiles(dataTransfer) {\n    return new Promise(function(resolve, reject) {\n      // get the transfer items as promises\n      var promisedFiles = (dataTransfer.items\n        ? Array.from(dataTransfer.items)\n        : []\n      )\n        // only keep file system items (files and directories)\n        .filter(function(item) {\n          return isFileSystemItem(item);\n        })\n\n        // map each item to promise\n        .map(function(item) {\n          return getFilesFromItem(item);\n        });\n\n      // if is empty, see if we can extract some info from the files property as a fallback\n      if (!promisedFiles.length) {\n        // TODO: test for directories (should not be allowed)\n        // Use FileReader, problem is that the files property gets lost in the process\n\n        resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n        return;\n      }\n\n      // done!\n      Promise.all(promisedFiles)\n        .then(function(returnedFileGroups) {\n          // flatten groups\n          var files = [];\n          returnedFileGroups.forEach(function(group) {\n            files.push.apply(files, group);\n          });\n\n          // done (filter out empty files)!\n          resolve(\n            files.filter(function(file) {\n              return file;\n            })\n          );\n        })\n        .catch(console.error);\n    });\n  };\n\n  var isFileSystemItem = function isFileSystemItem(item) {\n    if (isEntry(item)) {\n      var entry = getAsEntry(item);\n      if (entry) {\n        return entry.isFile || entry.isDirectory;\n      }\n    }\n    return item.kind === 'file';\n  };\n\n  var getFilesFromItem = function getFilesFromItem(item) {\n    return new Promise(function(resolve, reject) {\n      if (isDirectoryEntry(item)) {\n        getFilesInDirectory(getAsEntry(item))\n          .then(resolve)\n          .catch(reject);\n        return;\n      }\n\n      resolve([item.getAsFile()]);\n    });\n  };\n\n  var getFilesInDirectory = function getFilesInDirectory(entry) {\n    return new Promise(function(resolve, reject) {\n      var files = [];\n\n      // the total entries to read\n      var dirCounter = 0;\n      var fileCounter = 0;\n\n      var resolveIfDone = function resolveIfDone() {\n        if (fileCounter === 0 && dirCounter === 0) {\n          resolve(files);\n        }\n      };\n\n      // the recursive function\n      var readEntries = function readEntries(dirEntry) {\n        dirCounter++;\n\n        var directoryReader = dirEntry.createReader();\n\n        // directories are returned in batches, we need to process all batches before we're done\n        var readBatch = function readBatch() {\n          directoryReader.readEntries(function(entries) {\n            if (entries.length === 0) {\n              dirCounter--;\n              resolveIfDone();\n              return;\n            }\n\n            entries.forEach(function(entry) {\n              // recursively read more directories\n              if (entry.isDirectory) {\n                readEntries(entry);\n              } else {\n                // read as file\n                fileCounter++;\n\n                entry.file(function(file) {\n                  files.push(correctMissingFileType(file));\n                  fileCounter--;\n                  resolveIfDone();\n                });\n              }\n            });\n\n            // try to get next batch of files\n            readBatch();\n          }, reject);\n        };\n\n        // read first batch of files\n        readBatch();\n      };\n\n      // go!\n      readEntries(entry);\n    });\n  };\n\n  var correctMissingFileType = function correctMissingFileType(file) {\n    if (file.type.length) return file;\n    var date = file.lastModifiedDate;\n    var name = file.name;\n    file = file.slice(\n      0,\n      file.size,\n      guesstimateMimeType(getExtensionFromFilename(file.name))\n    );\n    file.name = name;\n    file.lastModifiedDate = date;\n    return file;\n  };\n\n  var isDirectoryEntry = function isDirectoryEntry(item) {\n    return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n  };\n\n  var isEntry = function isEntry(item) {\n    return 'webkitGetAsEntry' in item;\n  };\n\n  var getAsEntry = function getAsEntry(item) {\n    return item.webkitGetAsEntry();\n  };\n\n  /**\n   * Extracts links from a DataTransfer object\n   */\n  var getLinks = function getLinks(dataTransfer) {\n    var links = [];\n    try {\n      // look in meta data property\n      links = getLinksFromTransferMetaData(dataTransfer);\n      if (links.length) {\n        return links;\n      }\n      links = getLinksFromTransferURLData(dataTransfer);\n    } catch (e) {\n      // nope nope nope (probably IE trouble)\n    }\n    return links;\n  };\n\n  var getLinksFromTransferURLData = function getLinksFromTransferURLData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('url');\n    if (typeof data === 'string' && data.length) {\n      return [data];\n    }\n    return [];\n  };\n\n  var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('text/html');\n    if (typeof data === 'string' && data.length) {\n      var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n      if (matches) {\n        return [matches[1]];\n      }\n    }\n    return [];\n  };\n\n  var dragNDropObservers = [];\n\n  var eventPosition = function eventPosition(e) {\n    return {\n      pageLeft: e.pageX,\n      pageTop: e.pageY,\n      scopeLeft: e.offsetX || e.layerX,\n      scopeTop: e.offsetY || e.layerY\n    };\n  };\n\n  var createDragNDropClient = function createDragNDropClient(\n    element,\n    scopeToObserve,\n    filterElement\n  ) {\n    var observer = getDragNDropObserver(scopeToObserve);\n\n    var client = {\n      element: element,\n      filterElement: filterElement,\n      state: null,\n      ondrop: function ondrop() {},\n      onenter: function onenter() {},\n      ondrag: function ondrag() {},\n      onexit: function onexit() {},\n      onload: function onload() {},\n      allowdrop: function allowdrop() {}\n    };\n\n    client.destroy = observer.addListener(client);\n\n    return client;\n  };\n\n  var getDragNDropObserver = function getDragNDropObserver(element) {\n    // see if already exists, if so, return\n    var observer = dragNDropObservers.find(function(item) {\n      return item.element === element;\n    });\n    if (observer) {\n      return observer;\n    }\n\n    // create new observer, does not yet exist for this element\n    var newObserver = createDragNDropObserver(element);\n    dragNDropObservers.push(newObserver);\n    return newObserver;\n  };\n\n  var createDragNDropObserver = function createDragNDropObserver(element) {\n    var clients = [];\n\n    var routes = {\n      dragenter: dragenter,\n      dragover: dragover,\n      dragleave: dragleave,\n      drop: drop\n    };\n\n    var handlers = {};\n\n    forin(routes, function(event, createHandler) {\n      handlers[event] = createHandler(element, clients);\n      element.addEventListener(event, handlers[event], false);\n    });\n\n    var observer = {\n      element: element,\n      addListener: function addListener(client) {\n        // add as client\n        clients.push(client);\n\n        // return removeListener function\n        return function() {\n          // remove client\n          clients.splice(clients.indexOf(client), 1);\n\n          // if no more clients, clean up observer\n          if (clients.length === 0) {\n            dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n            forin(routes, function(event) {\n              element.removeEventListener(event, handlers[event], false);\n            });\n          }\n        };\n      }\n    };\n\n    return observer;\n  };\n\n  var elementFromPoint = function elementFromPoint(root, point) {\n    if (!('elementFromPoint' in root)) {\n      root = document;\n    }\n    return root.elementFromPoint(point.x, point.y);\n  };\n\n  var isEventTarget = function isEventTarget(e, target) {\n    // get root\n    var root = getRootNode(target);\n\n    // get element at position\n    // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n    var elementAtPosition = elementFromPoint(root, {\n      x: e.pageX - window.pageXOffset,\n      y: e.pageY - window.pageYOffset\n    });\n\n    // test if target is the element or if one of its children is\n    return elementAtPosition === target || target.contains(elementAtPosition);\n  };\n\n  var initialTarget = null;\n\n  var setDropEffect = function setDropEffect(dataTransfer, effect) {\n    // is in try catch as IE11 will throw error if not\n    try {\n      dataTransfer.dropEffect = effect;\n    } catch (e) {}\n  };\n\n  var dragenter = function dragenter(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      initialTarget = e.target;\n\n      clients.forEach(function(client) {\n        var element = client.element,\n          onenter = client.onenter;\n\n        if (isEventTarget(e, element)) {\n          client.state = 'enter';\n\n          // fire enter event\n          onenter(eventPosition(e));\n        }\n      });\n    };\n  };\n\n  var dragover = function dragover(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        var overDropTarget = false;\n\n        clients.some(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            onenter = client.onenter,\n            onexit = client.onexit,\n            ondrag = client.ondrag,\n            allowdrop = client.allowdrop;\n\n          // by default we can drop\n          setDropEffect(dataTransfer, 'copy');\n\n          // allow transfer of these items\n          var allowsTransfer = allowdrop(items);\n\n          // only used when can be dropped on page\n          if (!allowsTransfer) {\n            setDropEffect(dataTransfer, 'none');\n            return;\n          }\n\n          // targetting this client\n          if (isEventTarget(e, element)) {\n            overDropTarget = true;\n\n            // had no previous state, means we are entering this client\n            if (client.state === null) {\n              client.state = 'enter';\n              onenter(eventPosition(e));\n              return;\n            }\n\n            // now over element (no matter if it allows the drop or not)\n            client.state = 'over';\n\n            // needs to allow transfer\n            if (filterElement && !allowsTransfer) {\n              setDropEffect(dataTransfer, 'none');\n              return;\n            }\n\n            // dragging\n            ondrag(eventPosition(e));\n          } else {\n            // should be over an element to drop\n            if (filterElement && !overDropTarget) {\n              setDropEffect(dataTransfer, 'none');\n            }\n\n            // might have just left this client?\n            if (client.state) {\n              client.state = null;\n              onexit(eventPosition(e));\n            }\n          }\n        });\n      });\n    };\n  };\n\n  var drop = function drop(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        clients.forEach(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            ondrop = client.ondrop,\n            onexit = client.onexit,\n            allowdrop = client.allowdrop;\n\n          client.state = null;\n\n          // if we're filtering on element we need to be over the element to drop\n          if (filterElement && !isEventTarget(e, element)) return;\n\n          // no transfer for this client\n          if (!allowdrop(items)) return onexit(eventPosition(e));\n\n          // we can drop these items on this client\n          ondrop(eventPosition(e), items);\n        });\n      });\n    };\n  };\n\n  var dragleave = function dragleave(root, clients) {\n    return function(e) {\n      if (initialTarget !== e.target) {\n        return;\n      }\n\n      clients.forEach(function(client) {\n        var onexit = client.onexit;\n\n        client.state = null;\n\n        onexit(eventPosition(e));\n      });\n    };\n  };\n\n  var createHopper = function createHopper(scope, validateItems, options) {\n    // is now hopper scope\n    scope.classList.add('filepond--hopper');\n\n    // shortcuts\n    var catchesDropsOnPage = options.catchesDropsOnPage,\n      requiresDropOnElement = options.requiresDropOnElement,\n      _options$filterItems = options.filterItems,\n      filterItems =\n        _options$filterItems === void 0\n          ? function(items) {\n              return items;\n            }\n          : _options$filterItems;\n\n    // create a dnd client\n    var client = createDragNDropClient(\n      scope,\n      catchesDropsOnPage ? document.documentElement : scope,\n      requiresDropOnElement\n    );\n\n    // current client state\n    var lastState = '';\n    var currentState = '';\n\n    // determines if a file may be dropped\n    client.allowdrop = function(items) {\n      // TODO: if we can, throw error to indicate the items cannot by dropped\n\n      return validateItems(filterItems(items));\n    };\n\n    client.ondrop = function(position, items) {\n      var filteredItems = filterItems(items);\n\n      if (!validateItems(filteredItems)) {\n        api.ondragend(position);\n        return;\n      }\n\n      currentState = 'drag-drop';\n\n      api.onload(filteredItems, position);\n    };\n\n    client.ondrag = function(position) {\n      api.ondrag(position);\n    };\n\n    client.onenter = function(position) {\n      currentState = 'drag-over';\n\n      api.ondragstart(position);\n    };\n\n    client.onexit = function(position) {\n      currentState = 'drag-exit';\n\n      api.ondragend(position);\n    };\n\n    var api = {\n      updateHopperState: function updateHopperState() {\n        if (lastState !== currentState) {\n          scope.dataset.hopperState = currentState;\n          lastState = currentState;\n        }\n      },\n      onload: function onload() {},\n      ondragstart: function ondragstart() {},\n      ondrag: function ondrag() {},\n      ondragend: function ondragend() {},\n      destroy: function destroy() {\n        // destroy client\n        client.destroy();\n      }\n    };\n\n    return api;\n  };\n\n  var listening = false;\n  var listeners$1 = [];\n\n  var handlePaste = function handlePaste(e) {\n    requestDataTransferItems(e.clipboardData).then(function(files) {\n      // no files received\n      if (!files.length) {\n        return;\n      }\n\n      // notify listeners of received files\n      listeners$1.forEach(function(listener) {\n        return listener(files);\n      });\n    });\n  };\n\n  var listen = function listen(cb) {\n    // can't add twice\n    if (listeners$1.includes(cb)) {\n      return;\n    }\n\n    // add initial listener\n    listeners$1.push(cb);\n\n    // setup paste listener for entire page\n    if (listening) {\n      return;\n    }\n\n    listening = true;\n    document.addEventListener('paste', handlePaste);\n  };\n\n  var unlisten = function unlisten(listener) {\n    arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n    // clean up\n    if (listeners$1.length === 0) {\n      document.removeEventListener('paste', handlePaste);\n      listening = false;\n    }\n  };\n\n  var createPaster = function createPaster() {\n    var cb = function cb(files) {\n      api.onload(files);\n    };\n\n    var api = {\n      destroy: function destroy() {\n        unlisten(cb);\n      },\n      onload: function onload() {}\n    };\n\n    listen(cb);\n\n    return api;\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$c = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.id = 'filepond--assistant-' + props.id;\n    attr(root.element, 'role', 'status');\n    attr(root.element, 'aria-live', 'polite');\n    attr(root.element, 'aria-relevant', 'additions');\n  };\n\n  var addFilesNotificationTimeout = null;\n  var notificationClearTimeout = null;\n\n  var filenames = [];\n\n  var assist = function assist(root, message) {\n    root.element.textContent = message;\n  };\n\n  var clear$1 = function clear(root) {\n    root.element.textContent = '';\n  };\n\n  var listModified = function listModified(root, filename, label) {\n    var total = root.query('GET_TOTAL_ITEMS');\n    assist(\n      root,\n      label +\n        ' ' +\n        filename +\n        ', ' +\n        total +\n        ' ' +\n        (total === 1\n          ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n          : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n    );\n\n    // clear group after set amount of time so the status is not read twice\n    clearTimeout(notificationClearTimeout);\n    notificationClearTimeout = setTimeout(function() {\n      clear$1(root);\n    }, 1500);\n  };\n\n  var isUsingFilePond = function isUsingFilePond(root) {\n    return root.element.parentNode.contains(document.activeElement);\n  };\n\n  var itemAdded = function itemAdded(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    root.element.textContent = '';\n    var item = root.query('GET_ITEM', action.id);\n    filenames.push(item.filename);\n\n    clearTimeout(addFilesNotificationTimeout);\n    addFilesNotificationTimeout = setTimeout(function() {\n      listModified(\n        root,\n        filenames.join(', '),\n        root.query('GET_LABEL_FILE_ADDED')\n      );\n\n      filenames.length = 0;\n    }, 750);\n  };\n\n  var itemRemoved = function itemRemoved(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    var item = action.item;\n    listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n  };\n\n  var itemProcessed = function itemProcessed(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n    var root = _ref5.root,\n      action = _ref5.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemError = function itemError(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n  };\n\n  var assistant = createView({\n    create: create$c,\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: itemAdded,\n      DID_REMOVE_ITEM: itemRemoved,\n      DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n      DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n      DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n      DID_THROW_ITEM_REMOVE_ERROR: itemError,\n      DID_THROW_ITEM_LOAD_ERROR: itemError,\n      DID_THROW_ITEM_INVALID: itemError,\n      DID_THROW_ITEM_PROCESSING_ERROR: itemError\n    }),\n\n    tag: 'span',\n    name: 'assistant'\n  });\n\n  var toCamels = function toCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n      return sub.charAt(1).toUpperCase();\n    });\n  };\n\n  var debounce = function debounce(func) {\n    var interval =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n    var immidiateOnly =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var last = Date.now();\n    var timeout = null;\n\n    return function() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timeout);\n\n      var dist = Date.now() - last;\n\n      var fn = function fn() {\n        last = Date.now();\n        func.apply(void 0, args);\n      };\n\n      if (dist < interval) {\n        // we need to delay by the difference between interval and dist\n        // for example: if distance is 10 ms and interval is 16 ms,\n        // we need to wait an additional 6ms before calling the function)\n        if (!immidiateOnly) {\n          timeout = setTimeout(fn, interval - dist);\n        }\n      } else {\n        // go!\n        fn();\n      }\n    };\n  };\n\n  var testResult = null;\n  var isIOS = function isIOS() {\n    if (testResult === null) {\n      testResult =\n        /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    }\n    return testResult;\n  };\n\n  var MAX_FILES_LIMIT = 1000000;\n\n  var prevent = function prevent(e) {\n    return e.preventDefault();\n  };\n\n  var create$d = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // Add id\n    var id = root.query('GET_ID');\n    if (id) {\n      root.element.id = id;\n    }\n\n    // Add className\n    var className = root.query('GET_CLASS_NAME');\n    if (className) {\n      className.split(' ').forEach(function(name) {\n        root.element.classList.add(name);\n      });\n    }\n\n    // Field label\n    root.ref.label = root.appendChildView(\n      root.createChildView(\n        dropLabel,\n        Object.assign({}, props, {\n          translateY: null,\n          caption: root.query('GET_LABEL_IDLE')\n        })\n      )\n    );\n\n    // List of items\n    root.ref.list = root.appendChildView(\n      root.createChildView(listScroller, { translateY: null })\n    );\n\n    // Background panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'panel-root' })\n    );\n\n    // Assistant notifies assistive tech when content changes\n    root.ref.assistant = root.appendChildView(\n      root.createChildView(assistant, Object.assign({}, props))\n    );\n\n    // Measure (tests if fixed height was set)\n    // DOCTYPE needs to be set for this to work\n    root.ref.measure = createElement$1('div');\n    root.ref.measure.style.height = '100%';\n    root.element.appendChild(root.ref.measure);\n\n    // information on the root height or fixed height status\n    root.ref.bounds = null;\n\n    // apply initial style properties\n    root\n      .query('GET_STYLES')\n      .filter(function(style) {\n        return !isEmpty(style.value);\n      })\n      .map(function(_ref2) {\n        var name = _ref2.name,\n          value = _ref2.value;\n        root.element.dataset[name] = value;\n      });\n\n    // determine if width changed\n    root.ref.widthPrevious = null;\n    root.ref.widthUpdated = debounce(function() {\n      root.ref.updateHistory = [];\n      root.dispatch('DID_RESIZE_ROOT');\n    }, 250);\n\n    // history of updates\n    root.ref.previousAspectRatio = null;\n    root.ref.updateHistory = [];\n\n    // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n    var canHover = window.matchMedia('(pointer: fine) and (hover: hover)')\n      .matches;\n    var hasPointerEvents = 'PointerEvent' in window;\n    if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n      root.element.addEventListener('touchmove', prevent, { passive: false });\n      root.element.addEventListener('gesturestart', prevent);\n    }\n  };\n\n  var write$8 = function write(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props,\n      actions = _ref3.actions;\n\n    // route actions\n    route$5({ root: root, props: props, actions: actions });\n\n    // apply style properties\n    actions\n      .filter(function(action) {\n        return /^DID_SET_STYLE_/.test(action.type);\n      })\n      .filter(function(action) {\n        return !isEmpty(action.data.value);\n      })\n      .map(function(_ref4) {\n        var type = _ref4.type,\n          data = _ref4.data;\n        var name = toCamels(type.substr(8).toLowerCase(), '_');\n        root.element.dataset[name] = data.value;\n        root.invalidateLayout();\n      });\n\n    if (root.rect.element.hidden) return;\n\n    if (root.rect.element.width !== root.ref.widthPrevious) {\n      root.ref.widthPrevious = root.rect.element.width;\n      root.ref.widthUpdated();\n    }\n\n    // get box bounds, we do this only once\n    var bounds = root.ref.bounds;\n    if (!bounds) {\n      bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n      // destroy measure element\n      root.element.removeChild(root.ref.measure);\n      root.ref.measure = null;\n    }\n\n    // get quick references to various high level parts of the upload tool\n    var _root$ref = root.ref,\n      hopper = _root$ref.hopper,\n      label = _root$ref.label,\n      list = _root$ref.list,\n      panel = _root$ref.panel;\n\n    // sets correct state to hopper scope\n    if (hopper) {\n      hopper.updateHopperState();\n    }\n\n    // bool to indicate if we're full or not\n    var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n    var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = isMultiItem\n      ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT\n      : 1;\n    var atMaxCapacity = totalItems === maxItems;\n\n    // action used to add item\n    var addAction = actions.find(function(action) {\n      return action.type === 'DID_ADD_ITEM';\n    });\n\n    // if reached max capacity and we've just reached it\n    if (atMaxCapacity && addAction) {\n      // get interaction type\n      var interactionMethod = addAction.data.interactionMethod;\n\n      // hide label\n      label.opacity = 0;\n\n      if (isMultiItem) {\n        label.translateY = -40;\n      } else {\n        if (interactionMethod === InteractionMethod.API) {\n          label.translateX = 40;\n        } else if (interactionMethod === InteractionMethod.BROWSE) {\n          label.translateY = 40;\n        } else {\n          label.translateY = 30;\n        }\n      }\n    } else if (!atMaxCapacity) {\n      label.opacity = 1;\n      label.translateX = 0;\n      label.translateY = 0;\n    }\n\n    var listItemMargin = calculateListItemMargin(root);\n\n    var listHeight = calculateListHeight(root);\n\n    var labelHeight = label.rect.element.height;\n    var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n    var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n    var listMarginBottom =\n      totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n    var visualHeight =\n      currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n    var boundsHeight =\n      currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n    // link list to label bottom position\n    list.translateY =\n      Math.max(0, currentLabelHeight - list.rect.element.marginTop) -\n      listItemMargin.top;\n\n    if (aspectRatio) {\n      // fixed aspect ratio\n\n      // calculate height based on width\n      var width = root.rect.element.width;\n      var height = width * aspectRatio;\n\n      // clear history if aspect ratio has changed\n      if (aspectRatio !== root.ref.previousAspectRatio) {\n        root.ref.previousAspectRatio = aspectRatio;\n        root.ref.updateHistory = [];\n      }\n\n      // remember this width\n      var history = root.ref.updateHistory;\n      history.push(width);\n\n      var MAX_BOUNCES = 2;\n      if (history.length > MAX_BOUNCES * 2) {\n        var l = history.length;\n        var bottom = l - 10;\n        var bounces = 0;\n        for (var i = l; i >= bottom; i--) {\n          if (history[i] === history[i - 2]) {\n            bounces++;\n          }\n\n          if (bounces >= MAX_BOUNCES) {\n            // dont adjust height\n            return;\n          }\n        }\n      }\n\n      // fix height of panel so it adheres to aspect ratio\n      panel.scalable = false;\n      panel.height = height;\n\n      // available height for list\n      var listAvailableHeight =\n        // the height of the panel minus the label height\n        height -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      if (listHeight.visual > listAvailableHeight) {\n        list.overflow = listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = height;\n    } else if (bounds.fixedHeight) {\n      // fixed height\n\n      // fix height of panel\n      panel.scalable = false;\n\n      // available height for list\n      var _listAvailableHeight =\n        // the height of the panel minus the label height\n        bounds.fixedHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height\n      if (listHeight.visual > _listAvailableHeight) {\n        list.overflow = _listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // no need to set container bounds as these are handles by CSS fixed height\n    } else if (bounds.cappedHeight) {\n      // max-height\n\n      // not a fixed height panel\n      var isCappedHeight = visualHeight >= bounds.cappedHeight;\n      var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n      panel.scalable = true;\n      panel.height = isCappedHeight\n        ? panelHeight\n        : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n      // available height for list\n      var _listAvailableHeight2 =\n        // the height of the panel minus the label height\n        panelHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height (if is overflowing)\n      if (\n        visualHeight > bounds.cappedHeight &&\n        listHeight.visual > _listAvailableHeight2\n      ) {\n        list.overflow = _listAvailableHeight2;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.min(\n        bounds.cappedHeight,\n        boundsHeight - listItemMargin.top - listItemMargin.bottom\n      );\n    } else {\n      // flexible height\n\n      // not a fixed height panel\n      var itemMargin =\n        totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n      panel.scalable = true;\n      panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n    }\n  };\n\n  var calculateListItemMargin = function calculateListItemMargin(root) {\n    var item = root.ref.list.childViews[0].childViews[0];\n    return item\n      ? {\n          top: item.rect.element.marginTop,\n          bottom: item.rect.element.marginBottom\n        }\n      : {\n          top: 0,\n          bottom: 0\n        };\n  };\n\n  var calculateListHeight = function calculateListHeight(root) {\n    var visual = 0;\n    var bounds = 0;\n\n    // get file list reference\n    var scrollList = root.ref.list;\n    var itemList = scrollList.childViews[0];\n    var visibleChildren = itemList.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // no children, done!\n    if (children.length === 0) return { visual: visual, bounds: bounds };\n\n    var horizontalSpace = itemList.rect.element.width;\n    var dragIndex = getItemIndexByPosition(\n      itemList,\n      children,\n      scrollList.dragCoordinates\n    );\n\n    var childRect = children[0].rect.element;\n\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n\n    var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n    var removedItem = children.find(function(child) {\n      return child.markedForRemoval && child.opacity < 0.45;\n    })\n      ? -1\n      : 0;\n    var verticalItemCount = children.length + newItem + removedItem;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      children.forEach(function(item) {\n        var height = item.rect.element.height + itemVerticalMargin;\n        bounds += height;\n        visual += height * item.opacity;\n      });\n    }\n    // grid\n    else {\n      bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n      visual = bounds;\n    }\n\n    return { visual: visual, bounds: bounds };\n  };\n\n  var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(\n    root\n  ) {\n    var height = root.ref.measureHeight || null;\n    var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n    var fixedHeight = height === 0 ? null : height;\n\n    return {\n      cappedHeight: cappedHeight,\n      fixedHeight: fixedHeight\n    };\n  };\n\n  var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n    var allowReplace = root.query('GET_ALLOW_REPLACE');\n    var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = root.query('GET_MAX_FILES');\n\n    // total amount of items being dragged\n    var totalBrowseItems = items.length;\n\n    // if does not allow multiple items and dragging more than one item\n    if (!allowMultiple && totalBrowseItems > 1) {\n      return true;\n    }\n\n    // limit max items to one if not allowed to drop multiple items\n    maxItems = allowMultiple ? maxItems : allowReplace ? maxItems : 1;\n\n    // no more room?\n    var hasMaxItems = isInt(maxItems);\n    if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n      root.dispatch('DID_THROW_MAX_FILES', {\n        source: items,\n        error: createResponse('warning', 0, 'Max files')\n      });\n\n      return true;\n    }\n\n    return false;\n  };\n\n  var getDragIndex = function getDragIndex(list, children, position) {\n    var itemList = list.childViews[0];\n    return getItemIndexByPosition(itemList, children, {\n      left: position.scopeLeft - itemList.rect.element.left,\n      top:\n        position.scopeTop -\n        (list.rect.outer.top +\n          list.rect.element.marginTop +\n          list.rect.element.scrollTop)\n    });\n  };\n\n  /**\n   * Enable or disable file drop functionality\n   */\n  var toggleDrop = function toggleDrop(root) {\n    var isAllowed = root.query('GET_ALLOW_DROP');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.hopper) {\n      var hopper = createHopper(\n        root.element,\n        function(items) {\n          // these files don't fit so stop here\n          if (exceedsMaxFiles(root, items)) return false;\n\n          // allow quick validation of dropped items\n          var beforeDropFile =\n            root.query('GET_BEFORE_DROP_FILE') ||\n            function() {\n              return true;\n            };\n\n          // all items should be validated by all filters as valid\n          var dropValidation = root.query('GET_DROP_VALIDATION');\n          return dropValidation\n            ? items.every(function(item) {\n                return (\n                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                    query: root.query\n                  }).every(function(result) {\n                    return result === true;\n                  }) && beforeDropFile(item)\n                );\n              })\n            : true;\n        },\n        {\n          filterItems: function filterItems(items) {\n            var ignoredFiles = root.query('GET_IGNORED_FILES');\n            return items.filter(function(item) {\n              if (isFile(item)) {\n                return !ignoredFiles.includes(item.name.toLowerCase());\n              }\n              return true;\n            });\n          },\n          catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n          requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT')\n        }\n      );\n\n      hopper.onload = function(items, position) {\n        // get item children elements and sort based on list sort\n        var list = root.ref.list.childViews[0];\n        var visibleChildren = list.childViews.filter(function(child) {\n          return child.rect.element.height;\n        });\n        var children = root\n          .query('GET_ACTIVE_ITEMS')\n          .map(function(item) {\n            return visibleChildren.find(function(child) {\n              return child.id === item.id;\n            });\n          })\n          .filter(function(item) {\n            return item;\n          });\n\n        // go\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: getDragIndex(root.ref.list, children, position),\n          interactionMethod: InteractionMethod.DROP\n        });\n\n        root.dispatch('DID_DROP', { position: position });\n\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      hopper.ondragstart = function(position) {\n        root.dispatch('DID_START_DRAG', { position: position });\n      };\n\n      hopper.ondrag = debounce(function(position) {\n        root.dispatch('DID_DRAG', { position: position });\n      });\n\n      hopper.ondragend = function(position) {\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      root.ref.hopper = hopper;\n\n      root.ref.drip = root.appendChildView(root.createChildView(drip));\n    } else if (!enabled && root.ref.hopper) {\n      root.ref.hopper.destroy();\n      root.ref.hopper = null;\n      root.removeChildView(root.ref.drip);\n    }\n  };\n\n  /**\n   * Enable or disable browse functionality\n   */\n  var toggleBrowse = function toggleBrowse(root, props) {\n    var isAllowed = root.query('GET_ALLOW_BROWSE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.browser) {\n      root.ref.browser = root.appendChildView(\n        root.createChildView(\n          browser,\n          Object.assign({}, props, {\n            onload: function onload(items) {\n              // these files don't fit so stop here\n              if (exceedsMaxFiles(root, items)) return false;\n\n              // add items!\n              root.dispatch('ADD_ITEMS', {\n                items: items,\n                index: -1,\n                interactionMethod: InteractionMethod.BROWSE\n              });\n            }\n          })\n        ),\n\n        0\n      );\n    } else if (!enabled && root.ref.browser) {\n      root.removeChildView(root.ref.browser);\n      root.ref.browser = null;\n    }\n  };\n\n  /**\n   * Enable or disable paste functionality\n   */\n  var togglePaste = function togglePaste(root) {\n    var isAllowed = root.query('GET_ALLOW_PASTE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.paster) {\n      root.ref.paster = createPaster();\n      root.ref.paster.onload = function(items) {\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: -1,\n          interactionMethod: InteractionMethod.PASTE\n        });\n      };\n    } else if (!enabled && root.ref.paster) {\n      root.ref.paster.destroy();\n      root.ref.paster = null;\n    }\n  };\n\n  /**\n   * Route actions\n   */\n  var route$5 = createRoute({\n    DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      toggleBrowse(root, props);\n    },\n    DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n      var root = _ref6.root;\n      toggleDrop(root);\n    },\n    DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n      var root = _ref7.root;\n      togglePaste(root);\n    },\n    DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n      var root = _ref8.root,\n        props = _ref8.props;\n      toggleDrop(root);\n      togglePaste(root);\n      toggleBrowse(root, props);\n      var isDisabled = root.query('GET_DISABLED');\n      if (isDisabled) {\n        root.element.dataset.disabled = 'disabled';\n      } else {\n        // delete root.element.dataset.disabled; <= this does not work on iOS 10\n        root.element.removeAttribute('data-disabled');\n      }\n    }\n  });\n\n  var root = createView({\n    name: 'root',\n    read: function read(_ref9) {\n      var root = _ref9.root;\n      if (root.ref.measure) {\n        root.ref.measureHeight = root.ref.measure.offsetHeight;\n      }\n    },\n    create: create$d,\n    write: write$8,\n    destroy: function destroy(_ref10) {\n      var root = _ref10.root;\n      if (root.ref.paster) {\n        root.ref.paster.destroy();\n      }\n      if (root.ref.hopper) {\n        root.ref.hopper.destroy();\n      }\n      root.element.removeEventListener('touchmove', prevent);\n      root.element.removeEventListener('gesturestart', prevent);\n    },\n    mixins: {\n      styles: ['height']\n    }\n  });\n\n  // creates the app\n  var createApp = function createApp() {\n    var initialOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // let element\n    var originalElement = null;\n\n    // get default options\n    var defaultOptions = getOptions();\n\n    // create the data store, this will contain all our app info\n    var store = createStore(\n      // initial state (should be serializable)\n      createInitialState(defaultOptions),\n\n      // queries\n      [queries, createOptionQueries(defaultOptions)],\n\n      // action handlers\n      [actions, createOptionActions(defaultOptions)]\n    );\n\n    // set initial options\n    store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n    // kick thread if visibility changes\n    var visibilityHandler = function visibilityHandler() {\n      if (document.hidden) return;\n      store.dispatch('KICK');\n    };\n    document.addEventListener('visibilitychange', visibilityHandler);\n\n    // re-render on window resize start and finish\n    var resizeDoneTimer = null;\n    var isResizing = false;\n    var isResizingHorizontally = false;\n    var initialWindowWidth = null;\n    var currentWindowWidth = null;\n    var resizeHandler = function resizeHandler() {\n      if (!isResizing) {\n        isResizing = true;\n      }\n      clearTimeout(resizeDoneTimer);\n      resizeDoneTimer = setTimeout(function() {\n        isResizing = false;\n        initialWindowWidth = null;\n        currentWindowWidth = null;\n        if (isResizingHorizontally) {\n          isResizingHorizontally = false;\n          store.dispatch('DID_STOP_RESIZE');\n        }\n      }, 500);\n    };\n    window.addEventListener('resize', resizeHandler);\n\n    // render initial view\n    var view = root(store, { id: getUniqueId() });\n\n    //\n    // PRIVATE API -------------------------------------------------------------------------------------\n    //\n    var isResting = false;\n    var isHidden = false;\n\n    var readWriteApi = {\n      // necessary for update loop\n\n      /**\n       * Reads from dom (never call manually)\n       * @private\n       */\n      _read: function _read() {\n        // test if we're resizing horizontally\n        // TODO: see if we can optimize this by measuring root rect\n        if (isResizing) {\n          currentWindowWidth = window.innerWidth;\n          if (!initialWindowWidth) {\n            initialWindowWidth = currentWindowWidth;\n          }\n\n          if (\n            !isResizingHorizontally &&\n            currentWindowWidth !== initialWindowWidth\n          ) {\n            store.dispatch('DID_START_RESIZE');\n            isResizingHorizontally = true;\n          }\n        }\n\n        if (isHidden && isResting) {\n          // test if is no longer hidden\n          isResting = view.element.offsetParent === null;\n        }\n\n        // if resting, no need to read as numbers will still all be correct\n        if (isResting) return;\n\n        // read view data\n        view._read();\n\n        // if is hidden we need to know so we exit rest mode when revealed\n        isHidden = view.rect.element.hidden;\n      },\n\n      /**\n       * Writes to dom (never call manually)\n       * @private\n       */\n      _write: function _write(ts) {\n        // get all actions from store\n        var actions = store\n          .processActionQueue()\n\n          // filter out set actions (these will automatically trigger DID_SET)\n          .filter(function(action) {\n            return !/^SET_/.test(action.type);\n          });\n\n        // if was idling and no actions stop here\n        if (isResting && !actions.length) return;\n\n        // some actions might trigger events\n        routeActionsToEvents(actions);\n\n        // update the view\n        isResting = view._write(ts, actions, isResizingHorizontally);\n\n        // will clean up all archived items\n        removeReleasedItems(store.query('GET_ITEMS'));\n\n        // now idling\n        if (isResting) {\n          store.processDispatchQueue();\n        }\n      }\n    };\n\n    //\n    // EXPOSE EVENTS -------------------------------------------------------------------------------------\n    //\n    var createEvent = function createEvent(name) {\n      return function(data) {\n        // create default event\n        var event = {\n          type: name\n        };\n\n        // no data to add\n        if (!data) {\n          return event;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('error')) {\n          event.error = data.error ? Object.assign({}, data.error) : null;\n        }\n\n        if (data.status) {\n          event.status = Object.assign({}, data.status);\n        }\n\n        if (data.file) {\n          event.output = data.file;\n        }\n\n        // only source is available, else add item if possible\n        if (data.source) {\n          event.file = data.source;\n        } else if (data.item || data.id) {\n          var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n          event.file = item ? createItemAPI(item) : null;\n        }\n\n        // map all items in a possible items array\n        if (data.items) {\n          event.items = data.items.map(createItemAPI);\n        }\n\n        // if this is a progress event add the progress amount\n        if (/progress/.test(name)) {\n          event.progress = data.progress;\n        }\n\n        return event;\n      };\n    };\n\n    var eventRoutes = {\n      DID_DESTROY: createEvent('destroy'),\n\n      DID_INIT: createEvent('init'),\n\n      DID_THROW_MAX_FILES: createEvent('warning'),\n\n      DID_START_ITEM_LOAD: createEvent('addfilestart'),\n      DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n      DID_LOAD_ITEM: createEvent('addfile'),\n\n      DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_REMOVE_ERROR: [\n        createEvent('error'),\n        createEvent('removefile')\n      ],\n\n      DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n      DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n      DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n      DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n      DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n      DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n      DID_THROW_ITEM_PROCESSING_ERROR: [\n        createEvent('error'),\n        createEvent('processfile')\n      ],\n\n      DID_REMOVE_ITEM: createEvent('removefile'),\n\n      DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n      DID_ACTIVATE_ITEM: createEvent('activatefile')\n    };\n\n    var exposeEvent = function exposeEvent(event) {\n      // create event object to be dispatched\n      var detail = Object.assign({ pond: exports }, event);\n      delete detail.type;\n      view.element.dispatchEvent(\n        new CustomEvent('FilePond:' + event.type, {\n          // event info\n          detail: detail,\n\n          // event behaviour\n          bubbles: true,\n          cancelable: true,\n          composed: true // triggers listeners outside of shadow root\n        })\n      );\n\n      // event object to params used for `on()` event handlers and callbacks `oninit()`\n      var params = [];\n\n      // if is possible error event, make it the first param\n      if (event.hasOwnProperty('error')) {\n        params.push(event.error);\n      }\n\n      // file is always section\n      if (event.hasOwnProperty('file')) {\n        params.push(event.file);\n      }\n\n      // append other props\n      var filtered = ['type', 'error', 'file'];\n      Object.keys(event)\n        .filter(function(key) {\n          return !filtered.includes(key);\n        })\n        .forEach(function(key) {\n          return params.push(event[key]);\n        });\n\n      // on(type, () => { })\n      exports.fire.apply(exports, [event.type].concat(params));\n\n      // oninit = () => {}\n      var handler = store.query('GET_ON' + event.type.toUpperCase());\n      if (handler) {\n        handler.apply(void 0, params);\n      }\n    };\n\n    var routeActionsToEvents = function routeActionsToEvents(actions) {\n      if (!actions.length) {\n        return;\n      }\n\n      actions.forEach(function(action) {\n        if (!eventRoutes[action.type]) {\n          return;\n        }\n        var routes = eventRoutes[action.type];\n        (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n          setTimeout(function() {\n            exposeEvent(route(action.data));\n          }, 0);\n        });\n      });\n    };\n\n    //\n    // PUBLIC API -------------------------------------------------------------------------------------\n    //\n    var setOptions = function setOptions(options) {\n      return store.dispatch('SET_OPTIONS', { options: options });\n    };\n\n    var getFile = function getFile(query) {\n      return store.query('GET_ACTIVE_ITEM', query);\n    };\n\n    var prepareFile = function prepareFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PREPARE', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var addFile = function addFile(source) {\n      var options =\n        arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new Promise(function(resolve, reject) {\n        addFiles([{ source: source, options: options }], {\n          index: options.index\n        })\n          .then(function(items) {\n            return resolve(items && items[0]);\n          })\n          .catch(reject);\n      });\n    };\n\n    var removeFile = function removeFile(query) {\n      // request item removal\n      store.dispatch('REMOVE_ITEM', { query: query });\n\n      // see if item has been removed\n      return store.query('GET_ACTIVE_ITEM', query) === null;\n    };\n\n    var addFiles = function addFiles() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      return new Promise(function(resolve, reject) {\n        var sources = [];\n        var options = {};\n\n        // user passed a sources array\n        if (isArray(args[0])) {\n          sources.push.apply(sources, args[0]);\n          Object.assign(options, args[1] || {});\n        } else {\n          // user passed sources as arguments, last one might be options object\n          var lastArgument = args[args.length - 1];\n          if (\n            typeof lastArgument === 'object' &&\n            !(lastArgument instanceof Blob)\n          ) {\n            Object.assign(options, args.pop());\n          }\n\n          // add rest to sources\n          sources.push.apply(sources, args);\n        }\n\n        store.dispatch('ADD_ITEMS', {\n          items: sources,\n          index: options.index,\n          interactionMethod: InteractionMethod.API,\n          success: resolve,\n          failure: reject\n        });\n      });\n    };\n\n    var getFiles = function getFiles() {\n      return store.query('GET_ACTIVE_ITEMS');\n    };\n\n    var processFile = function processFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PROCESSING', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var prepareFiles = function prepareFiles() {\n      for (\n        var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n        _key2 < _len2;\n        _key2++\n      ) {\n        args[_key2] = arguments[_key2];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      var items = queries.length ? queries : getFiles();\n      return Promise.all(items.map(prepareFile));\n    };\n\n    var processFiles = function processFiles() {\n      for (\n        var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n        _key3 < _len3;\n        _key3++\n      ) {\n        args[_key3] = arguments[_key3];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      if (!queries.length) {\n        var files = getFiles().filter(function(item) {\n          return (\n            !(\n              item.status === ItemStatus.IDLE &&\n              item.origin === FileOrigin.LOCAL\n            ) &&\n            item.status !== ItemStatus.PROCESSING &&\n            item.status !== ItemStatus.PROCESSING_COMPLETE &&\n            item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n          );\n        });\n\n        return Promise.all(files.map(processFile));\n      }\n      return Promise.all(queries.map(processFile));\n    };\n\n    var removeFiles = function removeFiles() {\n      for (\n        var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n        _key4 < _len4;\n        _key4++\n      ) {\n        args[_key4] = arguments[_key4];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      var files = getFiles();\n\n      if (!queries.length) {\n        return Promise.all(files.map(removeFile));\n      }\n\n      // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n      var mappedQueries = queries\n        .map(function(query) {\n          return isNumber(query)\n            ? files[query]\n              ? files[query].id\n              : null\n            : query;\n        })\n        .filter(function(query) {\n          return query;\n        });\n\n      return mappedQueries.map(removeFile);\n    };\n\n    var exports = Object.assign(\n      {},\n\n      on(),\n      {},\n\n      readWriteApi,\n      {},\n\n      createOptionAPI(store, defaultOptions),\n      {\n        /**\n         * Override options defined in options object\n         * @param options\n         */\n        setOptions: setOptions,\n\n        /**\n         * Load the given file\n         * @param source - the source of the file (either a File, base64 data uri or url)\n         * @param options - object, { index: 0 }\n         */\n        addFile: addFile,\n\n        /**\n         * Load the given files\n         * @param sources - the sources of the files to load\n         * @param options - object, { index: 0 }\n         */\n        addFiles: addFiles,\n\n        /**\n         * Returns the file objects matching the given query\n         * @param query { string, number, null }\n         */\n        getFile: getFile,\n\n        /**\n         * Upload file with given name\n         * @param query { string, number, null  }\n         */\n        processFile: processFile,\n\n        /**\n         * Request prepare output for file with given name\n         * @param query { string, number, null  }\n         */\n        prepareFile: prepareFile,\n\n        /**\n         * Removes a file by its name\n         * @param query { string, number, null  }\n         */\n        removeFile: removeFile,\n\n        /**\n         * Moves a file to a new location in the files list\n         */\n        moveFile: function moveFile(query, index) {\n          return store.dispatch('MOVE_ITEM', { query: query, index: index });\n        },\n\n        /**\n         * Returns all files (wrapped in public api)\n         */\n        getFiles: getFiles,\n\n        /**\n         * Starts uploading all files\n         */\n        processFiles: processFiles,\n\n        /**\n         * Clears all files from the files list\n         */\n        removeFiles: removeFiles,\n\n        /**\n         * Starts preparing output of all files\n         */\n        prepareFiles: prepareFiles,\n\n        /**\n         * Sort list of files\n         */\n        sort: function sort(compare) {\n          return store.dispatch('SORT', { compare: compare });\n        },\n\n        /**\n         * Browse the file system for a file\n         */\n        browse: function browse() {\n          // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n          var input = view.element.querySelector('input[type=file]');\n          if (input) {\n            input.click();\n          }\n        },\n\n        /**\n         * Destroys the app\n         */\n        destroy: function destroy() {\n          // request destruction\n          exports.fire('destroy', view.element);\n\n          // stop active processes (file uploads, fetches, stuff like that)\n          // loop over items and depending on states call abort for ongoing processes\n          store.dispatch('ABORT_ALL');\n\n          // destroy view\n          view._destroy();\n\n          // stop listening to resize\n          window.removeEventListener('resize', resizeHandler);\n\n          // stop listening to the visiblitychange event\n          document.removeEventListener('visibilitychange', visibilityHandler);\n\n          // dispatch destroy\n          store.dispatch('DID_DESTROY');\n        },\n\n        /**\n         * Inserts the plugin before the target element\n         */\n        insertBefore: function insertBefore$1(element) {\n          return insertBefore(view.element, element);\n        },\n\n        /**\n         * Inserts the plugin after the target element\n         */\n        insertAfter: function insertAfter$1(element) {\n          return insertAfter(view.element, element);\n        },\n\n        /**\n         * Appends the plugin to the target element\n         */\n        appendTo: function appendTo(element) {\n          return element.appendChild(view.element);\n        },\n\n        /**\n         * Replaces an element with the app\n         */\n        replaceElement: function replaceElement(element) {\n          // insert the app before the element\n          insertBefore(view.element, element);\n\n          // remove the original element\n          element.parentNode.removeChild(element);\n\n          // remember original element\n          originalElement = element;\n        },\n\n        /**\n         * Restores the original element\n         */\n        restoreElement: function restoreElement() {\n          if (!originalElement) {\n            return; // no element to restore\n          }\n\n          // restore original element\n          insertAfter(originalElement, view.element);\n\n          // remove our element\n          view.element.parentNode.removeChild(view.element);\n\n          // remove reference\n          originalElement = null;\n        },\n\n        /**\n         * Returns true if the app root is attached to given element\n         * @param element\n         */\n        isAttachedTo: function isAttachedTo(element) {\n          return view.element === element || originalElement === element;\n        },\n\n        /**\n         * Returns the root element\n         */\n        element: {\n          get: function get() {\n            return view.element;\n          }\n        },\n\n        /**\n         * Returns the current pond status\n         */\n        status: {\n          get: function get() {\n            return store.query('GET_STATUS');\n          }\n        }\n      }\n    );\n\n    // Done!\n    store.dispatch('DID_INIT');\n\n    // create actual api object\n    return createObject(exports);\n  };\n\n  var createAppObject = function createAppObject() {\n    var customOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // default options\n    var defaultOptions = {};\n    forin(getOptions(), function(key, value) {\n      defaultOptions[key] = value[0];\n    });\n\n    // set app options\n    var app = createApp(\n      Object.assign(\n        {},\n\n        defaultOptions,\n        {},\n\n        customOptions\n      )\n    );\n\n    // return the plugin instance\n    return app;\n  };\n\n  var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n    return string.charAt(0).toLowerCase() + string.slice(1);\n  };\n\n  var attributeNameToPropertyName = function attributeNameToPropertyName(\n    attributeName\n  ) {\n    return toCamels(attributeName.replace(/^data-/, ''));\n  };\n\n  var mapObject = function mapObject(object, propertyMap) {\n    // remove unwanted\n    forin(propertyMap, function(selector, mapping) {\n      forin(object, function(property, value) {\n        // create regexp shortcut\n        var selectorRegExp = new RegExp(selector);\n\n        // tests if\n        var matches = selectorRegExp.test(property);\n\n        // no match, skip\n        if (!matches) {\n          return;\n        }\n\n        // if there's a mapping, the original property is always removed\n        delete object[property];\n\n        // should only remove, we done!\n        if (mapping === false) {\n          return;\n        }\n\n        // move value to new property\n        if (isString(mapping)) {\n          object[mapping] = value;\n          return;\n        }\n\n        // move to group\n        var group = mapping.group;\n        if (isObject(mapping) && !object[group]) {\n          object[group] = {};\n        }\n\n        object[group][\n          lowerCaseFirstLetter(property.replace(selectorRegExp, ''))\n        ] = value;\n      });\n\n      // do submapping\n      if (mapping.mapping) {\n        mapObject(object[mapping.group], mapping.mapping);\n      }\n    });\n  };\n\n  var getAttributesAsObject = function getAttributesAsObject(node) {\n    var attributeMapping =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // turn attributes into object\n    var attributes = [];\n    forin(node.attributes, function(index) {\n      attributes.push(node.attributes[index]);\n    });\n\n    var output = attributes\n      .filter(function(attribute) {\n        return attribute.name;\n      })\n      .reduce(function(obj, attribute) {\n        var value = attr(node, attribute.name);\n\n        obj[attributeNameToPropertyName(attribute.name)] =\n          value === attribute.name ? true : value;\n        return obj;\n      }, {});\n\n    // do mapping of object properties\n    mapObject(output, attributeMapping);\n\n    return output;\n  };\n\n  var createAppAtElement = function createAppAtElement(element) {\n    var options =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // how attributes of the input element are mapped to the options for the plugin\n    var attributeMapping = {\n      // translate to other name\n      '^class$': 'className',\n      '^multiple$': 'allowMultiple',\n      '^capture$': 'captureMethod',\n\n      // group under single property\n      '^server': {\n        group: 'server',\n        mapping: {\n          '^process': {\n            group: 'process'\n          },\n\n          '^revert': {\n            group: 'revert'\n          },\n\n          '^fetch': {\n            group: 'fetch'\n          },\n\n          '^restore': {\n            group: 'restore'\n          },\n\n          '^load': {\n            group: 'load'\n          }\n        }\n      },\n\n      // don't include in object\n      '^type$': false,\n      '^files$': false\n    };\n\n    // add additional option translators\n    applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n    // create final options object by setting options object and then overriding options supplied on element\n    var mergedOptions = Object.assign({}, options);\n\n    var attributeOptions = getAttributesAsObject(\n      element.nodeName === 'FIELDSET'\n        ? element.querySelector('input[type=file]')\n        : element,\n      attributeMapping\n    );\n\n    // merge with options object\n    Object.keys(attributeOptions).forEach(function(key) {\n      if (isObject(attributeOptions[key])) {\n        if (!isObject(mergedOptions[key])) {\n          mergedOptions[key] = {};\n        }\n        Object.assign(mergedOptions[key], attributeOptions[key]);\n      } else {\n        mergedOptions[key] = attributeOptions[key];\n      }\n    });\n\n    // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n    // these will then be automatically set to the initial files\n    mergedOptions.files = (options.files || []).concat(\n      Array.from(element.querySelectorAll('input:not([type=file])')).map(\n        function(input) {\n          return {\n            source: input.value,\n            options: {\n              type: input.dataset.type\n            }\n          };\n        }\n      )\n    );\n\n    // build plugin\n    var app = createAppObject(mergedOptions);\n\n    // add already selected files\n    if (element.files) {\n      Array.from(element.files).forEach(function(file) {\n        app.addFile(file);\n      });\n    }\n\n    // replace the target element\n    app.replaceElement(element);\n\n    // expose\n    return app;\n  };\n\n  // if an element is passed, we create the instance at that element, if not, we just create an up object\n  var createApp$1 = function createApp() {\n    return isNode(arguments.length <= 0 ? undefined : arguments[0])\n      ? createAppAtElement.apply(void 0, arguments)\n      : createAppObject.apply(void 0, arguments);\n  };\n\n  var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n  var createAppAPI = function createAppAPI(app) {\n    var api = {};\n\n    copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n    return api;\n  };\n\n  /**\n   * Replaces placeholders in given string with replacements\n   * @param string - \"Foo {bar}\"\"\n   * @param replacements - { \"bar\": 10 }\n   */\n  var replaceInString = function replaceInString(string, replacements) {\n    return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n      return replacements[group];\n    });\n  };\n\n  var createWorker = function createWorker(fn) {\n    var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n      type: 'application/javascript'\n    });\n\n    var workerURL = URL.createObjectURL(workerBlob);\n    var worker = new Worker(workerURL);\n\n    return {\n      transfer: function transfer(message, cb) {},\n      post: function post(message, cb, transferList) {\n        var id = getUniqueId();\n\n        worker.onmessage = function(e) {\n          if (e.data.id === id) {\n            cb(e.data.message);\n          }\n        };\n\n        worker.postMessage(\n          {\n            id: id,\n            message: message\n          },\n\n          transferList\n        );\n      },\n      terminate: function terminate() {\n        worker.terminate();\n        URL.revokeObjectURL(workerURL);\n      }\n    };\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var renameFile = function renameFile(file, name) {\n    var renamedFile = file.slice(0, file.size, file.type);\n    renamedFile.lastModifiedDate = file.lastModifiedDate;\n    renamedFile.name = name;\n    return renamedFile;\n  };\n\n  var copyFile = function copyFile(file) {\n    return renameFile(file, file.name);\n  };\n\n  // already registered plugins (can't register twice)\n  var registeredPlugins = [];\n\n  // pass utils to plugin\n  var createAppPlugin = function createAppPlugin(plugin) {\n    // already registered\n    if (registeredPlugins.includes(plugin)) {\n      return;\n    }\n\n    // remember this plugin\n    registeredPlugins.push(plugin);\n\n    // setup!\n    var pluginOutline = plugin({\n      addFilter: addFilter,\n      utils: {\n        Type: Type,\n        forin: forin,\n        isString: isString,\n        isFile: isFile,\n        toNaturalFileSize: toNaturalFileSize,\n        replaceInString: replaceInString,\n        getExtensionFromFilename: getExtensionFromFilename,\n        getFilenameWithoutExtension: getFilenameWithoutExtension,\n        guesstimateMimeType: guesstimateMimeType,\n        getFileFromBlob: getFileFromBlob,\n        getFilenameFromURL: getFilenameFromURL,\n        createRoute: createRoute,\n        createWorker: createWorker,\n        createView: createView,\n        createItemAPI: createItemAPI,\n        loadImage: loadImage,\n        copyFile: copyFile,\n        renameFile: renameFile,\n        createBlob: createBlob,\n        applyFilterChain: applyFilterChain,\n        text: text,\n        getNumericAspectRatioFromString: getNumericAspectRatioFromString\n      },\n\n      views: {\n        fileActionButton: fileActionButton\n      }\n    });\n\n    // add plugin options to default options\n    extendDefaultOptions(pluginOutline.options);\n  };\n\n  // feature detection used by supported() method\n  var isOperaMini = function isOperaMini() {\n    return (\n      Object.prototype.toString.call(window.operamini) === '[object OperaMini]'\n    );\n  };\n  var hasPromises = function hasPromises() {\n    return 'Promise' in window;\n  };\n  var hasBlobSlice = function hasBlobSlice() {\n    return 'slice' in Blob.prototype;\n  };\n  var hasCreateObjectURL = function hasCreateObjectURL() {\n    return 'URL' in window && 'createObjectURL' in window.URL;\n  };\n  var hasVisibility = function hasVisibility() {\n    return 'visibilityState' in document;\n  };\n  var hasTiming = function hasTiming() {\n    return 'performance' in window;\n  }; // iOS 8.x\n\n  var supported = (function() {\n    // Runs immidiately and then remembers result for subsequent calls\n    var isSupported =\n      // Has to be a browser\n      isBrowser() &&\n      // Can't run on Opera Mini due to lack of everything\n      !isOperaMini() &&\n      // Require these APIs to feature detect a modern browser\n      hasVisibility() &&\n      hasPromises() &&\n      hasBlobSlice() &&\n      hasCreateObjectURL() &&\n      hasTiming();\n\n    return function() {\n      return isSupported;\n    };\n  })();\n\n  /**\n   * Plugin internal state (over all instances)\n   */\n  var state = {\n    // active app instances, used to redraw the apps and to find the later\n    apps: []\n  };\n\n  // plugin name\n  var name = 'filepond';\n\n  /**\n   * Public Plugin methods\n   */\n  var fn = function fn() {};\n  exports.Status = {};\n  exports.FileStatus = {};\n  exports.FileOrigin = {};\n  exports.OptionTypes = {};\n  exports.create = fn;\n  exports.destroy = fn;\n  exports.parse = fn;\n  exports.find = fn;\n  exports.registerPlugin = fn;\n  exports.getOptions = fn;\n  exports.setOptions = fn;\n\n  // if not supported, no API\n  if (supported()) {\n    // start painter and fire load event\n    createPainter(\n      function() {\n        state.apps.forEach(function(app) {\n          return app._read();\n        });\n      },\n      function(ts) {\n        state.apps.forEach(function(app) {\n          return app._write(ts);\n        });\n      }\n    );\n\n    // fire loaded event so we know when FilePond is available\n    var dispatch = function dispatch() {\n      // let others know we have area ready\n      document.dispatchEvent(\n        new CustomEvent('FilePond:loaded', {\n          detail: {\n            supported: supported,\n            create: exports.create,\n            destroy: exports.destroy,\n            parse: exports.parse,\n            find: exports.find,\n            registerPlugin: exports.registerPlugin,\n            setOptions: exports.setOptions\n          }\n        })\n      );\n\n      // clean up event\n      document.removeEventListener('DOMContentLoaded', dispatch);\n    };\n\n    if (document.readyState !== 'loading') {\n      // move to back of execution queue, FilePond should have been exported by then\n      setTimeout(function() {\n        return dispatch();\n      }, 0);\n    } else {\n      document.addEventListener('DOMContentLoaded', dispatch);\n    }\n\n    // updates the OptionTypes object based on the current options\n    var updateOptionTypes = function updateOptionTypes() {\n      return forin(getOptions(), function(key, value) {\n        exports.OptionTypes[key] = value[1];\n      });\n    };\n\n    exports.Status = Object.assign({}, Status);\n    exports.FileOrigin = Object.assign({}, FileOrigin);\n    exports.FileStatus = Object.assign({}, ItemStatus);\n\n    exports.OptionTypes = {};\n    updateOptionTypes();\n\n    // create method, creates apps and adds them to the app array\n    exports.create = function create() {\n      var app = createApp$1.apply(void 0, arguments);\n      app.on('destroy', exports.destroy);\n      state.apps.push(app);\n      return createAppAPI(app);\n    };\n\n    // destroys apps and removes them from the app array\n    exports.destroy = function destroy(hook) {\n      // returns true if the app was destroyed successfully\n      var indexToRemove = state.apps.findIndex(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (indexToRemove >= 0) {\n        // remove from apps\n        var app = state.apps.splice(indexToRemove, 1)[0];\n\n        // restore original dom element\n        app.restoreElement();\n\n        return true;\n      }\n\n      return false;\n    };\n\n    // parses the given context for plugins (does not include the context element itself)\n    exports.parse = function parse(context) {\n      // get all possible hooks\n      var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n      // filter out already active hooks\n      var newHooks = matchedHooks.filter(function(newHook) {\n        return !state.apps.find(function(app) {\n          return app.isAttachedTo(newHook);\n        });\n      });\n\n      // create new instance for each hook\n      return newHooks.map(function(hook) {\n        return exports.create(hook);\n      });\n    };\n\n    // returns an app based on the given element hook\n    exports.find = function find(hook) {\n      var app = state.apps.find(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (!app) {\n        return null;\n      }\n      return createAppAPI(app);\n    };\n\n    // adds a plugin extension\n    exports.registerPlugin = function registerPlugin() {\n      for (\n        var _len = arguments.length, plugins = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        plugins[_key] = arguments[_key];\n      }\n\n      // register plugins\n      plugins.forEach(createAppPlugin);\n\n      // update OptionTypes, each plugin might have extended the default options\n      updateOptionTypes();\n    };\n\n    exports.getOptions = function getOptions$1() {\n      var opts = {};\n      forin(getOptions(), function(key, value) {\n        opts[key] = value[0];\n      });\n      return opts;\n    };\n\n    exports.setOptions = function setOptions$1(opts) {\n      if (isObject(opts)) {\n        // update existing plugins\n        state.apps.forEach(function(app) {\n          app.setOptions(opts);\n        });\n\n        // override defaults\n        setOptions(opts);\n      }\n\n      // return new options\n      return exports.getOptions();\n    };\n  }\n\n  exports.supported = supported;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n});\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n"],"sourceRoot":""}